<html>
 <head>
  <title>Les passerelles en infographie</title>
  <meta name="author" CONTENT="David Brunet obligement@free.fr">
 </head>

<body bgcolor="#000000" text="#cccccc" link="#cccc33" vlink="#aaaa22" alink="#cccccc" marginheight="0" marginwidth="0" topmargin="5" leftmargin="0">

<a name="top">

<map name="ObMap">
  <area shape="rect" coords="0,0,760,82" href="http://obligement.free.fr">
  <area shape="rect" coords="8,87,62,104" href="../index.html" alt="Intro">
  <area shape="rect" coords="80,87,168,104" href="edito.html" alt="Editorial">
  <area shape="rect" coords="186,87,278,104" href="apropos.html" alt="A Propos">
  <area shape="rect" coords="296,87,399,104" href="sommaire.html" alt="Sommaire">
  <area shape="rect" coords="414,87,473,104" href="quizz.html" alt="Quizz">
  <area shape="rect" coords="491,87,589,104" href="musiques.html" alt="Musiques">
  <area shape="rect" coords="607,87,648,104" href="pub.html" alt="Pub">
  <area shape="rect" coords="666,87,756,104" href="archives.html" alt="Archives">
</map>

<table align="center" valign="top" width="760" height="100%" background="../gfx/fondsommaire.jpg" bgcolor="#112233" cellspacing="0" cellpadding="0">
 <tr>
  <td align="center">
   <img src="../gfx/oblogo.jpg" ismap usemap="#ObMap" border="0" height="108" width="760" alt="Obligement">

   <br><br><br>
   <table align="center" width="75%">
    <tr>
     <td>

<div align="center"><font size="+3">Labo : les passerelles en infographie </font>par&nbsp;<a href="mailto:Pixel-Art@wanadoo.fr">Jean-Yves&nbsp;Auger</a></div><br><br><br>

Avec l'arrivé du Pegasos, le parc de machine s'étoffe et il n'est plus rare de posséder un Pegasos,
un PC dans un coin qui sert de poubelle, un Mac pour les fortunés et un Amiga pour la nostalgie.<br><br>

Or dans le vaste monde de l'infographie, les logiciels ont, eux aussi, leurs "caprices" : Photoshop (Mac, PC),
TVPaint (Amiga, Pegasos, PC via Aura), PerfectPaint (Amiga, pas encore Pegasos), Painter (Mac, PC), etc.
et les spéciaux : Broadcast Painter (Amiga sur carte Xanadu), DCTV (Amiga avec la carte du même nom), etc.<br><br>

De ce fait, il est quelquefois difficile et/ou impossible de passer, sans perte d'information, de l'un à
l'autre sans de multiples conversions par des formats externes parfois très gourmands (exemple : la
même image en IFF 24 sera 4 à 5 fois plus importante en BMP (merci Micro...). Le JPEG est devenu LA
passerelle car, à de rares exceptions, ce format est présent dans tous les logiciels de dessin passés,
présents et futurs avec le JPEG 2000 (seulement sur Mac OS X pour l'instant). Mais, il y a un mais,
le JPEG compresse (même si le taux est 0%) et la couleur rouge est particulièrement et joyeusement
"massacrée" : personne n'y peut rien, c'est un principe en image et vidéo.<br><br>

<font size="+1" color="#ccbb33">Le format passerelle</font><br><br>

Il est donc conseillé de trouver un autre format "passerelle" non compressé qui permettrait de passer
partout ou presque, quelque soit le nombre de couleurs, la taille, le niveau de rouge, etc.
Je laisse de coté les BMP, PCX (grosse usine à gaz) compatible avec eux mêmes et encore, mais qui
ont la fâcheuse tendance à l'obésité (entre 4 et 5 fois plus gros que tous les autres formats
existants). Les formats propriétaires seront eux aussi, retirés, même si l'on retrouve l'IFF dans
Photoshop, mais malheureusement la version 7 ne sait plus écrire dans ce format. A noter que
dans la version 5.5, l'écriture en IFF était risquée (2 fois sur 3, le fichier était endommagé).
Il reste donc les "bons vieux gros" formats d'antan : TIFF (en non compressé), Targa (un peu
de compression) ou SGI (Silicon Graphics) qui ne sont guère plus utilisés de nos jours et c'est
pourtant là que se trouve la solution. En effet, la plupart des logiciels nécessitant une carte
graphique sur Amiga ont intégré (à l'époque), la plupart de ces formats en plus de l'IFF 24,
tradition oblige, ainsi que le format propriétaire de la carte, du logiciel et/ou des deux
(DCTV par exemple), qui lui, est incompatible avec tous les autres.<br><br>

<font size="+1" color="#ccbb33">La couche Alpha</font><br><br>

Quand vous travaillez en 16 millions de couleurs, vous pouvez avoir besoin de plus de couleurs (ça paraît
stupide, mais c'est bien utile). En effet, il est parfois intéressant d'avoir un dessin transparent
(c'est d'ailleurs visible sous la forme d'un damier d'échiquier), car celui-ci peut être complété
par un second programme, qui va ensuite fusionner le tout avec un fond, sans difficulté.
Cette transparence se décline en 256 nuances soit 8 bits (2^8) et constitue une couche supplémentaire :
la couche Alpha. C'est la raison pour laquelle on parle de dessin en 32 bits (24 bits + 8 bits).
Il est donc bien agréable de profiter de cette "transparence" dans Photoshop et dans TVPaint par exemple.
Or comment sauver un dessin avec cette couche Alpha ? La réponse sera en deux temps : oui, mais...<br><br>

Oui, sur Amiga (encore !), ça existe et ça marche : Le PNG (32 bits) sait gérer la couche Alpha ainsi
qu'un taux de compression variable, mais sa relative jeunesse l'a éloigné de l'Amiga et peu de
logiciel savent lire et écrire dans ce format. PerfectPaint sait le faire (via une commande shell),
mais ne peut afficher la transparence (pas encore). Les datatypes ont la même difficulté à cause
de la picture.library de l'OS 3.9 qui ne travaille qu'en 24 bits au lieu de 32, d'où cette impossibilité
d'affichage. Le Pegasos (sous MorphOS) sait gérer le PNG 32 bits (ses icônes en sont) mais par une
routine interne. Les logiciels actuels ne l'utilisent pas et ont donc la même contrainte.<br><br>

<font size="+1" color="#ccbb33">Targa, TIFF et SGI</font><br><br>

Le format Targa intègre nativement la couche Alpha (d'où la taille impressionnante du fichier), mais il
a tendance à compresser un peu trop et les dégâts sont visibles notamment sur le texte. En pratique, dès
que vous sauvez un dessin avec une transparence (le fameux damier) en Targa, un masque ou "détourage"
sera généré automatiquement et sauvé dans le fichier. Ce même masque sera restitué automatiquement au
chargement dans Photoshop (version 7 aussi) et vous retrouverez le damier (le fond transparent).
Des essais dans les deux sens entre TVPaint 3.59 et Photoshop 7 (Mac OS 9 et X) ont parfaitement
exportés et importés le dessin avec sa couche Alpha.<br><br>

Le format SGI (Silicon Graphics) réagit selon le même principe, mais le fichier est plus imposant.<br><br>

Le format TIFF V6.0 est le plus approprié : il intègre en option la couche Alpha (RGBA <-- Alpha)
et a une compression en option en LZW (ne pas l'utiliser, c'est incompatible avec quelques logiciels).<br><br>

<div align="center">
<a href="../gfx/passerelles-tiff.jpg" target="_blank"><img src="../gfx/passerelles-tiff-small.jpg" width="200" height="136" border="1" hspace="80"></a><br>
<font size="-1">(cliquer pour agrandir)</font>
</div><br><br>

Exemple avec TVPaint : il faut sélectionner un layer avec de la transparence, choisir SAVE FILE (TIFF V6.0 et
prendre les options : RGBA et Compression : NONE) :<br><br>

<div align="center">
<img src="../gfx/passerelles-tvpaint1.jpg" width="426" height="238" border="0"></a>
<br><br>
<img src="../gfx/passerelles-tvpaint2.jpg" width="400" height="300" border="0"></a>
</div><br><br>

Exemple avec Photoshop 7 : la couche Alpha est détectée à la sauvegarde en TIFF et vous propose le choix.
Au chargement, il se débrouille tout seul.<br><br>

Exemple avec PerfectPaint 2.93 : le TIFF est lu via les datatypes, mais la couche Alpha n'est pas isolée.
Il faut dans ce cas passer par TVPaint et exporter via le format TVDEEP directement.
Ce même fichier importé dans Photoshop sera parfaitement restitué avec le damier (celui de
Photoshop cette fois).<br><br>

Même PaintShopPro sur PC a retrouvé la couche Alpha ! (si un PC peut le faire alors...). Voilà donc un moyen
de travailler avec un Amiga en 24 bits ET transparence, continuer sur Mac et finir sur PC (mais c'est
vraiment pour montrer le résultat, histoire d'écoeurer les PCistes).<br><br>

N.B : TVPaint sait nativement lire et écrire dans les 3 derniers formats précités, mais pour les autres
logiciels de dessin, il faut quelquefois passer par des commandes shell qui lisent et/ou écrivent vers ses
formats. Il existe un logiciel gratuit sur Aminet qui, à partir du format Targa, extrait en IFF, le
dessin et la couche Alpha sous la forme d'un fichier en niveaux de gris.<br><br>

Pour l'exploiter, il suffit de charger cette couche Alpha en tant que Stencil (PerfectPaint entre autre) et
vous retrouvez votre dessin "détouré" dont vous pourrez changer le fond sans endommager le reste.<br><br><br>


<div align="center"><a href="#top">Retour en haut</a> | <a href="sommaire.html">Retour au sommaire</a></div><br><br> 


     </td>
    </tr>
   </table>
  </td>
 </tr>
</table>


</body>
</html>
