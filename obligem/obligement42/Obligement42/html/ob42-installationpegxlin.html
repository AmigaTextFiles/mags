<html>
 <head>
  <title>Installation de PegXLin</title>
  <meta name="author" CONTENT="David Brunet obligement@free.fr">
 </head>

<body bgcolor="#000000" text="#cccccc" link="#cccc33" vlink="#aaaa22" alink="#cccccc" marginheight="0" marginwidth="0" topmargin="5" leftmargin="0">

<a name="top">

<map name="ObMap">
  <area shape="rect" coords="0,0,760,82" href="http://obligement.free.fr">
  <area shape="rect" coords="14,85,74,105" href="../index.html" alt="Intro">
  <area shape="rect" coords="90,85,184,105" href="edito.html" alt="Editorial">
  <area shape="rect" coords="200,85,302,105" href="apropos.html" alt="A Propos">
  <area shape="rect" coords="318,85,430,105" href="sommaire.html" alt="Sommaire">
  <area shape="rect" coords="442,85,512,105" href="quizz.html" alt="Quizz">
  <area shape="rect" coords="526,85,630,105" href="musiques.html" alt="Musiques">
  <area shape="rect" coords="648,85,746,105" href="archives.html" alt="Archives">
</map>

<table align="center" valign="top" width="760" height="100%" background="../gfx/fondsommaire.jpg" bgcolor="#112233" cellspacing="0" cellpadding="0">
 <tr>
  <td align="center">
   <img src="../gfx/oblogo.jpg" ismap usemap="#ObMap" border="0" height="108" width="760" alt="Obligement">

   <br><br><br>
   <table align="center" width="75%">
    <tr>
     <td>

<div align="center"><font size="+3">En pratique&nbsp;: installation de PegXLin </font>par&nbsp;<a href="mailto:sebastien.dallasta@wanadoo.fr">Sébastien&nbsp;Dallasta</a></div><br><br><br>

<font size="+1" color="#ccbb33">Introduction</font><br><br>

Voici une petite aide pour installer Linux "facilement" sur votre Pegasos. Pour vous donnez une idée,
cette liste de programmes est fournie avec PegXLin&nbsp;:<br>

<ul>
<li>KDE 3.1.3 - Interface graphique pour Linux.
<li>Gnome 2.2 - Pareil.
<li>Xfree 4.3 X11 - Pour faire fonctionner Linux.
<li>Cups 1.1.19 - Système de management des imprimantes.
<li>MOL 0.9.69 - Mac On Linux pour faire tourner le système MacOS sur Linux.
<li>Kernel 2.4.21-benh2 - Version de Linux.
<li>K3B - Logiciel de gravure.
<li>Xmms - Lecteur audio/vidéo (MP3, WMA, Wave, Mod, CDDA, Vorbis, Mpeg1, etc.).
<li>Noatum - lecteur audio.
<li>XawTV - logiciel pour les cartes tunner.
<li>XCam - logiciel pour appareils photos numériques.
<li>KsCD - lecteur cédé audio.
<li>Krec - logiciel d'enregistrement audio.
<li>KAudioKreator - Compresseur audio (MP3, OggVorbis).
<li>Gimp 1.2 - Clone de Photoshop mais gratuit.
<li>XFig - Dessin vectoriel.
<li>QuiteInSane - logiciel pour les scanners.
<li>PovRay - Modeleur 3D avec GUI.
<li>Mozilla - Navigateur web compatible Netscape et bien plus.
<li>Kmail - Gestion de courriers électroniques.
<li>Kfax - Gestion de Fax.
<li>Divers editeurs de texte (Kwrite, Kate, Latex,...).
<li>Une quinzaine de jeux.
<li>MAME - Emulateur de bornes d'arcade.
<li>UAE 0.8.22 - Emulateur Amiga.
<li>Xine - Lecteur vidéo (DivX, DVD, VCD, Mpg,... 50 lecteurs audio et 135 video au total).
<li>Plein de petits utilitaires (calculatrice, calendrier, impression d'étiquette cédé, racourcis clavier, horloge, économiseur d'écran,...).
<li>Quelques programmes scientifiques (planetarium, fonctions mathématiques,...).<br>
<li>Petite suite bureautique KOffice (tableur, traitement de texte, PAO, présentation,...).
</ul>
<br>

Voilà, j'espère que cela va vous convaincre de continuer cette installation malgré tout ce que l'on peut dire
sur Linux. Donc on continue.<br><br>

<font size="+1" color="#ccbb33">Ce qu'il faut</font><br><br>

<ul>
<li>Le cédé de PegXLin.
<li>Un Pegasos&nbsp;:-).
<li>MorphOS 1.4 ou moins (ou plus&nbsp;:o).
<li>128 Mo de Ram minimum.
<li>Un disque dur.
<li>Un périphérique pour lire les cédés (DVD, cédérom voire graveur).
<li>Une carte vidéo (Voodoo ou Radeon serait le mieux).
<li>Un peu de temps (30 min) avec un poil de patiente (15 min).
<li>Un papier et un stylo.
</ul>
<br>

Si vous n'avez pas le tout, ça risque de se compliquer un peu beaucoup.<br><br>

<font size="+1" color="#ccbb33">Les partitions</font><br><br>

Lancez MorphOS puis UnitControl et SCSIConfig. Identifiez votre lecteur de cédé et votre disque dur dans la
chaine IDE. IDE.device 2 (graveur) et 3 (DVD) pour exemple et 1 pour le disque dur. Important&nbsp;: notez les
dans l'ordre&nbsp;!<br><br>

<div align="center">
<img src="../gfx/pegxlin-unitcontrol.jpg" width="462" height="138" border="0" alt="UnitControl"><br><br>
<font size="-1">HDA est l'unité 0, HDB est l'unité 1, HDC est l'unité 2 et HDD est l'unité 3.</font><br><br><br>
</div>

Dans SCSIConfig créez les 2 partitions comme suit&nbsp;:<br>
- 3.5 Go pour Linux en Dostype&nbsp;: 0X4c4e5800.<br>
- 200 Mo pour le SWAP en Dostype&nbsp;: 0X53575000.<br><br>

<div align="center">
<img src="../gfx/pegxlin-scsiconfig.jpg" width="523" height="261" border="0" alt="UnitControl"><br><br>
<font size="-1">Liste des partitions&nbsp;: créez "Linux" et "Swap"</font><br><br><br>
</div>

Attention&nbsp;: notez aussi l'ordre de vos partitions. Ex: 1=D0 (partition de Boot), 2=D1, ..., 8=Linux, 9=Swap.
Cet ordre est très important par la suite.<br><br>

Copiez ensuite les fichiers "Install" et "PegXlin" du cédé de PegXLin sur la partition où se trouve votre
"boot.img" de MorphOS. Puis faites un reset.<br><br>

<font size="+1" color="#ccbb33">La pré-installation</font><br><br>

Choses à savoir concernant HDXY&nbsp;: X correspond à l'unité IDE A=1, B=2, C=3, D=4 et Y correspond au numéro de la partition 1=D0, 2=D1, ..., 8=Linux, 9=Swap, etc.<br><br>

Entrez dans L'OpenFirmware (OF) et tapez&nbsp;: boot install hdc=ide-scsi (pour l'exemple, ce sera le graveur qui sera utilisé).
Un Penguin devrait apparaitre en haut à gauche puis une page.<br><br>

<b>1.1)</b> Sélectionnez la ligne que vous comprenez dans votre langage (normalement, ce devrait être le Français...) puis appuyez sur "Entrée".<br>
<b>1.2)</b> Configurez le clavier en Français.<br>
<b>1.3)</b> Initialisez votre partition Swap. En théorie, c'est reconnue automatiquement sinon, pour mon exemple c'est HDA9.<br>
<b>1.4)</b> Initialisez votre partition Linux. Pour mon exemple, c'est HDA8. Là, sélectionnez EXT2 ou 3, ne vérifiez pas le
disque, laissez le monter les fichiers racine.<br>
<b>1.5)</b> Exécutez un shell. Tapez&nbsp;: cd bin (et appuyez sur "Entrée").<br>
<b>1.6)</b> Tapez&nbsp;: hdinstall (et appuyez sur "Entrée").<br>
Un message apparait&nbsp;: "Custom install will take at least 10-40 minutes...". Cela veut dire qu'il lui faudra entre
10 et 40 minutes pour installer. Pour mon cas, avec un graveur 52X, cela prend environ 15 minutes. Ne vous
attendez pas à voir apparaitre quoi que se soit pendant tout ce temps.
Une fois terminé, un écran noir apparait avec l'éditeur de texte Nano-Tiny. Attention&nbsp;! C'est là qu'il faut régler vos
configs pour Linux.<br>
<b>1.7)</b> Une ligne doit comporter l'adresse de la partition Linux et une du Swap. Cette ligne commence par&nbsp;:<br>
"/dev/hd(xy) / ext3 errors=remount-ro 0 1", changez juste "hd(xy)" par votre configuration de partition. C'est "hda8" dans mon exemple.
Idem avec la ligne "/dev/hd(xy) swap .....", remplacez "hd(xy)" par votre configuration de partition. C'est "hda9" dans mon exemple.<br><br>
<b>1.8)</b> Enregistrez les modifs dans le fichier "/target/etc/fstab" qui doit être par défaut. Attendez 5 secondes puis faites un reset.
La pré-installation est maintenant prête.<br><br>

<font size="+1" color="#ccbb33">Fin de L'installation</font><br><br>

Si vous avez bien tout compris, vous devriez pouvoir enfin bootez sur Linux. Ici aussi quelques petites
précisions sont à mettre au claire. La commande video='tdfx' ou 'radeon'" correspond en fait au type
de carte graphique dont vous disposez. "Tdfx" sera pour les Voodoo et "radeon" pour... les Radeon (je vois que
tout le monde suit). Ne tapez pas bêtement les lignes qui suivent mais (c'est mon exemple de configuration).
Remplacez "xy" de "hdXY" par les paramètres de votre partition Linux et "video=tdfx" par "video=radeon"
si vous avez une radeon&nbsp;:-). De même que "hdc" peut correspondre chez vous par "hdb" voire "hdd" suivant
où se trouve le media que vous allez utiliser et où il se trouve dans la chaine IDE.<br><br>

<b>2.1)</b> Entrez dans l'OF puis tapez&nbsp;: boot pegxlin root=/dev/hd(xy) video=tdfx hdc=ide-scsi.<br>
<b>2.2)</b> Linux doit maintenant booter et un prompt vous demande de vous loguer.<br>
<b>2.3)</b> Tapez "root" (et appuyer sur Entrée) puis "pass".<br><br>

J'explique&nbsp;:<br><br>

Root est le nom de la personne qui veut se connecter sur Linux.<br>
Pass est le mot de passe de cette personne.<br>
Il existe déjà 2 personnes, Root et Pegxlin qui ont tous les deux le même mot de passe&nbsp;: "pass".<br><br>

Attention&nbsp;: il est possible que le clavier soit repassé en Qwerty. Méfiez vous.<br><br>

<font size="+1" color="#ccbb33">Configuration</font><br><br>

<b>3.1)</b> Une fois cela terminé, tapez&nbsp;: dpkg-reconfigure xserver-xfree86.<br><br>

C'est là que tout se joue&nbsp;! Une mauvaise config plantera le départ de Linux. Je vais faire de mon mieux
pour vous expliquez ce qu'il veut.<br><br>

<b>3.2)</b> 1ère page&nbsp;: lisez-la si vous voulez puis appuyez sur "yes".<br>
<b>3.3)</b> Type de chip sur votre carte graphique. C'est à vous de dire quelle est votre carte graphique, appuyer ensuite sur "ok".<br>
<b>3.4)</b> Donnez lui son nom. Appuyer ensuite sur "ok".<br>
<b>3.5)</b> Appuyer sur "ok".<br>
<b>3.6)</b> Votre carte doit être soit PCI ou AGP. Dans mon cas c'est&nbsp;: AGP:1:00:0. Appuyer sur "ok".<br>
<b>3.7)</b> Ici, c'est la mémoire de la carte. Exemple&nbsp;: 16384 pour le cas d'une carte graphique avec 16 Mo de mémoire. Appuyer sur "ok".<br>
<b>3.8)</b> Le Framebuffer&nbsp;: iIl est préférable de mettre "no".<br>
<b>3.9)</b> Laissez xfree86. Appuyer sur "ok".<br>
<b>3.10)</b> Appuyer sur "ok".<br>
<b>3.11)</b> Le type de clavier&nbsp;: mettre "pc105". Appuyer sur "ok".<br>
<b>3.12)</b> Localisation de clavier&nbsp;: mettre "fr". Appuyer sur "ok".<br>
<b>3.13)</b> Appuyer sur "ok".<br>
<b>3.14)</b> Laissez le champ vide. Appuyer sur "ok".<br>
<b>3.15)</b> Appuyer sur "ok".<br>
<b>3.16)</b> Laissez le champ vide aussi. Appuyer sur "ok".<br>
<b>3.17)</b> Le port de la souris&nbsp;: votre souris est en PS/2 normalement donc mettre "/dev/psaux". Appuyer sur "ok".<br>
<b>3.18)</b> Type de souris&nbsp;: "ImPS/2" est un bon choix en général (souris sur port PS/2). Appuyer sur "ok".<br>
<b>3.19)</b> 3 boutons&nbsp;: si votre souris à trois boutons plus une molette, mettre "no" sinon "yes".<br>
<b>3.20)</b> La molette&nbsp;: si la souris a une molette, mettre "yes" sinon "no".<br>
<b>3.21)</b> Le moniteur&nbsp;: laissez "generic". Appuyer sur "ok".<br>
<b>3.22)</b> LCD&nbsp;?&nbsp;: si votre moniteur est un LCD alors mettre "yes" sinon "no".Appuyer sur "ok".<br>
<b>3.23)</b> Appuyer sur "ok".<br>
<b>3.24)</b> Configuration du moniteur&nbsp;: mettre "simple". Appuyer sur "ok". Cette configuration pourra être modifiée ultérieurement.<br>
<b>3.25)</b> Taille&nbsp;: mettre la taille de votre moniteur. Appuyer sur "ok".<br>
<b>3.26)</b> Taille écran&nbsp;: laissez les valeurs par défaut. Une mauvaise configuration à ce niveau peut engendrer de
graves dégats à votre moniteur s'il n'est pas compatible avec la résolution.<br>
<b>3.27)</b> Profondeur&nbsp;: je vous conseille de mettre 16 bits même si votre carte supporte plus, n'oubliez pas que vous
avez un G3/600 et qu'une valeur supérieure peut le ralentir franchement.<br>
<b>3.28)</b> Appuyer sur "ok".<br>
<b>3.29)</b> Server modules&nbsp;: Laissez par défaut. De toute façon, la 3D ne fonctionnera pas pour le moment&nbsp;:'(. A suivre... Appuyer sur "ok".<br>
<b>3.30)</b> Appuyer sur "yes".<br>
<b>3.31)</b> Appuyer sur "yes".<br>
<b>3.32)</b> Maintenant, votre server est configuré. Tapez "reboot". La machine écrit les configs. Attendez 5 secondes puis "Reset".<br><br>

<font size="+1" color="#ccbb33">Linux&nbsp;: enfin&nbsp;!</font><br><br>

<b>4.1)</b> Entrez dans l'OF.<br>
<b>4.2)</b> Tapez maintenant&nbsp;: boot pegxlin root=/dev/hd(xy) video=(tdfx ou radeon) hdc=ide-scsi l2cr=0X800000000.<br>
Mon Exemple donne cela&nbsp;: boot pegxlin root=/dev/hda8 video=tdfx hdc=ide-scsi hdd=ide-scsi l2cr=0X800000000.
Où "hda8" est ma partition Linux, "video=tdfx" est ma Voodoo3 AGP, "hdc=ide-scsi" est mon graveur et "hdd=ide-scsi"
est mon lecteur DVD. "l2cr=0X800000000" est l'activation de la cache L2 du PowerPC G3. Si vous ne mettez pas
le cache, ça rame lamentablement.<br><br>

Si vous voulez que Linux soit en boot automatique, tapez&nbsp;:
setenv boot-file pegxlin root=/dev/hd(xy) video=(tdfx ou radeon) hdc=ide-scsi l2cr=0X800000000 (entrez évidemment vos
configurations à la place de "xy", "tdfx", "radeon", etc.). Attention&nbsp;: vérifiez bien votre commande sinon,
la machine ne bootera pas correctement.<br><br>

<b>4.3)</b> Loguez vous en "Pegasos" au début car une mauvaise manipulation en "root" peut détruire entièrement votre système.<br><br>

Voila&nbsp;! Je pense qu'avec cela, il vous sera possible de découvrir Linux dans de bonnes conditions. Sachez qu'il
existe des distributions de Debian sur 7 cédés. Cela vous permet d'étendre Linux. Pour ce qui est de
l'installation de logiciels, je traiterai le sujet un peu plus tard car, sous PegXLin, il existe déja
des outils pour simplifier ce genre de choses. Il existe aussi des docs et des livres sur Linux en
Français pour vous aidez à faire vos premiers pas.<br><br>

Si malgré tout cela, vous n'arrivez pas à lancer ou installer Linux, contactez-moi&nbsp;: <a href="mailto:sebastien.dallasta@wanadoo.fr">sebastien.dallasta@wanadoo.fr</a>,
je ne vous promets pas de miracles mais je ferais tout mon possible pour vous aider.<br><br><br>


<div align="center"><a href="#top">Retour en haut</a> | <a href="sommaire.html">Retour au sommaire</a></div><br><br> 



     </td>
    </tr>
   </table>
  </td>
 </tr>
</table>


</body>
</html>

