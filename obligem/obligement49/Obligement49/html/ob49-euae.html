<html>
 <head>
  <title>Installation et configuration de E-UAE</title>
  <meta name="author" CONTENT="David Brunet obligement@free.fr">
 </head>

<body bgcolor="#000000" text="#cccccc" link="#cccc33" vlink="#aaaa22" alink="#cccccc" marginheight="0" marginwidth="0" topmargin="5" leftmargin="0">

<a name="top">
</a>

<map name="ObMap">
  <area shape="rect" coords="0,0,760,82" href="http://obligement.free.fr" alt="Obligement">
  <area shape="rect" coords="8,87,62,104" href="../index.html" alt="Intro">
  <area shape="rect" coords="80,87,168,104" href="edito.html" alt="Editorial">
  <area shape="rect" coords="186,87,278,104" href="apropos.html" alt="A Propos">
  <area shape="rect" coords="296,87,399,104" href="sommaire.html" alt="Sommaire">
  <area shape="rect" coords="414,87,473,104" href="quizz.html" alt="Quizz">
  <area shape="rect" coords="491,87,589,104" href="musiques.html" alt="Musiques">
  <area shape="rect" coords="607,87,648,104" href="pub.html" alt="Pub">
  <area shape="rect" coords="666,87,756,104" href="archives.html" alt="Archives">
</map>

<table summary="" align="center" valign="top" width="760" height="100%" background="../gfx/fondsommaire.jpg" bgcolor="#112233" cellspacing="0" cellpadding="0">
 <tr valign="top">
  <td align="center">
   <img src="../gfx/oblogo.jpg" ismap usemap="#ObMap" border="0" height="108" width="760" alt="Obligement">

   <br><br><br>
   <table summary="" align="center" width="75%">
    <tr>
     <td>

<div align="center"><font size="+3">En pratique&nbsp;: installation et configuration de E-UAE </font>par&nbsp;<a href="mailto:alexis.mouth@tiscali.fr">Alexis&nbsp;Mouth</a></div><br><br><br>



<font size="+1" color="#ccbb33">Pré-requis</font><br><br>

Cet article va vous permettre d'installer et de configurer au mieux E-UAE, un émulateur
Amiga Classic pour les machines non-Windows. L'article s'appuie sur la version MorphOS
mais il pourrait s'adapter facilement à l'AmigaOS 4.0.<br><br>

Cette version toute neuve d'E-UAE pour MorphOS a été compilée par Fabien Coeurjoly et dispose du
support de la librairie SDL (PowerSDL v10.5).<br><br>

Elle va nous permettre d'avoir le support de quasiment toutes les fonctions disponibles
dans WinUAE sauf l'émulation JIT (pour l'instant).<br><br>

L'archive de E-UAE est disponible sur <a href="http://perso.wanadoo.fr/fabien.coeurjoly/e-uae.lha">perso.wanadoo.fr/fabien.coeurjoly/e-uae.lha</a>.<br><br>


<font size="+1" color="#ccbb33">L'installation</font><br><br>

Si ce n'est déjà fait, il vous faut d'abord avoir un système SDL fonctionnel. Pour cela,
téléchargez et installez <a href="http://www.lehtoranta.net/powersdl/powersdl.lha">PowerSDL</a> (version 10.5).<br><br>

Ensuite procédez aux étapes suivantes&nbsp;:<br><br>

<b>Etape 1</b><br><br>

Créez un tiroir du nom de "E-UAE" sur une partition de votre disque dur.<br><br>

<b>Etape 2</b><br><br>

Décompressez l'archive d'E-UAE. Celle-ci contient deux fichiers&nbsp;: E-UAE (qu'il faut copier
dans le tiroir que nous venons de créer) et powersdl.library (que vous devez effacer car vous
venez d'installer la dernière version).<br><br>

<b>Etape 3</b><br><br>

Dans votre tiroir "E-UAE", créez un tiroir nommé "Workbench". Et copiez-y l'intégralité
des fichiers constituant votre ancien Workbench (le Workbench 3.9 dans mon cas),
évitez d'y copier des Workbench personnalisés pourvus de fichiers PowerPC.
Si vous ne disposez pas d'un Workbench pré-installé, il existe le Workbench 3.1
et le Workbench 3.5 quasiment pré-installé sur les cédés de l'OS 3.5 et 3.9.<br><br>

<b>Etape 4</b><br><br>

Enfin, placez une ROM Kickstart dans le tiroir "E-UAE" (la 3.0 ou 3.1 pour cet exemple).
Si vous ne l'avez pas, vous pouvez la "dumper" de votre A1200. Ceci peut se faire par
exemple avec VirusExecutor disponible sur Aminet, qui propose une telle fonction dans son menu.<br><br>


<font size="+1" color="#ccbb33">Ensuite, il faut configurer E-UAE&nbsp;!</font><br><br>

Il faut savoir que lorsque vous lancez UAE, il utilise une configuration par défaut nommée ".uaerc".<br><br>

Nous allons donc créer ce fichier. Dans un Shell, tapez&nbsp;:<br><br>

ed nom_du_lecteur:uae/.uaerc<br><br>

Un fichier vierge s'ouvre, il porte le nom de ".uaerc". Et vous allez entrer les paramètres suivants&nbsp;:<br><br>

<table border="1" bgcolor="#c0c0c0" width="100%"><tr><td><font color="#000000" size="-1">
kickstart_rom_file=nom_du_lecteur:e-uae/kick31.rom<br>
gfx_framerate=2<br>
gfx_width=640<br>
gfx_height=480<br>
sound_output=normal<br>
sound_frequency=22050<br>
sound_bits=8<br>
sound_max_buff=1024<br>
sound_channels=mono<br>
cpu_type=68020<br>
cpu_speed=5<br>
fastmem_size=8<br>
chipmem_size=4<br>
filesystem=rw,DH1:nom_du_lecteur:e-uae/workbench<br>
chipset=aga<br>
gfx_fullscreen_amiga=yes<br>
immediate_blits=yes<br>
gfx_center_horizontal=simple<br>
gfx_center_vertical=simple
</font>
</td></tr></table>
<br>

Vous pouvez faire les modifications que vous voulez mais essayez de rester proche de l'exemple pour débuter.
Maintenant votre fichier de configuration est prêt, il n'y a plus qu'à le sauver.<br><br>

Ici, nous avons un système d'exploitation se lançant à partir d'un disque dur
dans le but d'obtenir un A1200 avec disque dur et mémoire Fast.<br><br>

Quelques explications&nbsp;:<br><br>

<b>kickstart_rom_file=nom_du_lecteur:e-uae/kick31.rom</b><br>
Cette ligne indique quelle ROM doit utiliser E-UAE.<br><br>

<b>gfx_framerate=2</b><br>
Saute 1 image sur 2 à l'affichage. Léger gain de vitesse.<br><br>

<b>gfx_width=640</b><br>
Fixe la largeur de l'écran à 640 pixels.<br><br>

<b>gfx_height=480</b><br>
Fixe la hauteur de l'écran à 480 pixels.<br><br>

<b>sound_output=normal</b><br>
Active le son dans UAE. Mettre la valeur "none" le désactive.<br><br>

<b>sound_frequency=22050</b><br>
Fréquence de l'audio. On peut monter jusqu'à 48000.<br><br>

<b>sound_bits=8</b><br>
Le son sort en 8 bits (c'est d'origine), mais on peut mettre "16" pour avoir un meilleur rendu sonore.<br><br>

<b>sound_max_buff=1024</b><br>
Règle le cache du son. Ce paramètre a une grande importance. A manipuler avec précaution.<br><br>

<b>sound_channels=mono</b><br>
Sortie son en mono. On peut remplacer par "stereo".<br><br>

<b>cpu_type=68020</b><br>
Jeu d'instructions d'un 68020. On peut mettre aussi "68040" ou "68000".<br><br>

<b>cpu_speed=5</b><br>
Règle la vitesse du processeur par rapport au chipset, plus c'est petit plus le processeur va vite mais pas le reste...<br><br>

<b>fastmem_size=8</b><br>
Taille de la mémoire Fast. Ici 8 Mo. Mettre plus est impossible sous UAE sans émuler un A4000.<br><br>

<b>chipmem_size=4</b><br>
Taille de la mémoire Chip. 2 Mo suffisent normalement mais avec 4 Mo, les jeux AGA passeront sans problème.<br><br>

<b>filesystem=rw,DH1:nom_du_lecteur:e-uae/workbench:</b><br>
Cela permet à E-UAE de dire qu'il y a un dique dur du nom de "DH1:" qui se trouve à cet endroit.<br><br>

<b>chipset=aga</b><br>
Chipset graphique de base. On peut mettre aussi "ECS" et "OCS". L'AGA est plus joli mais plus lent.<br><br>

<b>gfx_fullscreen_amiga=yes</b><br>
L'émulation se lance en mode plein écran. Avec "no", elle se lance dans une fenêtre.<br><br>

<b>immediate_blits=yes</b><br>
Accélère les fonctions du blitter. Quelques jeux sont allergiques à cette fonction.<br><br>

<b>gfx_center_horizontal=simple</b><br>
Centre l'affichage horizontalement.<br><br>

<b>gfx_center_vertical=simple</b><br>
Centre l'affichage verticalement.<br><br>


<font size="+1" color="#ccbb33">Démarrons E-UAE</font><br><br>

Maintenant, lancez l'exécutable E-UAE, et hop, magie ça démarre&nbsp;!
On se retrouve sur un Workbench de base (regardez <a href="../gfx/e-uae.jpg">ici</a> ce que cela donne chez
moi), mais avec une vitesse lente (E-UAE est plus lent
que UAE). Et grâce à WHDLoad, on peut lancer tous les jeux ECS/OCS/AGA depuis son disque dur.<br><br>

<b>Quelques touches utiles&nbsp;:</b><br><br>

F12 + Q = Quitte UAE.<br>
F12 + R = Redémarre UAE (warm reset).<br>
F12 + shift gauche + R = Redémarre UAE (cold reset).<br>
F12 + D = Affiche la fenêtre de débogage.<br><br>

F12 + S = Passe du mode plein écran au mode fenêtré (et inversement).<br><br>

F12 + G = Passe au mode grab souris (en mode fenêtré).<br>
F12 + M = Passe en mode souris.<br>

F12 + P (ou touche "imprime écran") = Capture l'écran.<br><br>

F12 + pavé numérique + = Augmente le frameskip.<br>
F12 + pavé numérique - = Diminue le frameskip.<br>

F12 + F1 = Insert un disque dans le Df0:.<br>
F12 + F2 = Insert un disque dans le Df1:.<br>
F12 + F3 = Insert un disque dans le Df2:.<br>
F12 + F4 = Insert un disque dans le Df3:.<br>
F12 + Shift Gauche + F1 = Ejecte le disque de Df0:.<br>
F12 + Shift Gauche + F2 = Ejecte le disque de Df1:.<br>
F12 + Shift Gauche + F3 = Ejecte le disque de Df2:.<br>
F12 + Shift Gauche + F4 = Ejecte le disque de Df3:.<br><br>


<font size="+1" color="#ccbb33">Autres exemples de fichiers de configuration</font><br><br>

Cet article se base sur le lancement d'un système 3.x sur disque dur, et avec 8 Mo de mémoire Fast.
D'autres configurations sont possibles mais certaines (comme les configurations pour lancer des
jeux OCS/ECS en disquette) sont peu performantes par rapport à la version 0.8.22 d'UAE codé par DJBase
(voir le <a href="http://obligement.free.fr/articles/uaemorphos.php" target="_blank">comparatif des versions d'UAE pour MorphOS</a> pour plus de détails).<br><br>

<b>1) Exemple pour lancer Personnal Paint à "pleine puissance"</b><br><br>

<table border="1" bgcolor="#c0c0c0" width="100%"><tr><td><font color="#000000" size="-1">
kickstart_rom_file=nom_du_lecteur:e-uae/kick31.rom<br>
gfx_framerate=1<br>
gfx_width=640<br>
gfx_height=480<br>
sound_output=none<br>
sound_frequency=22050<br>
sound_bits=8<br>
sound_max_buff=1024<br>
sound_channels=mono<br>
cpu_type=68040<br>
cpu_speed=1<br>
fastmem_size=8<br>
chipmem_size=4<br>
filesystem=rw,DH1:nom_du_lecteur:e-uae/workbench<br>
chipset=aga<br>
gfx_fullscreen_amiga=yes<br>
immediate_blits=yes<br>
gfx_center_horizontal=simple<br>
gfx_center_vertical=simple
</font>
</td></tr></table>
<br>     

Ici, nous avons baissé le paramètre "cpu_speed" pour donner plus de puissance au 68020
et désactivé le son ("sound_output=none") pour gagner encore un peu de vitesse.<br><br>

<b>2) Exemple pour lancer un vieux jeu OCS/ECS en disquette&nbsp;:</b><br><br>

<table border="1" bgcolor="#c0c0c0" width="100%"><tr><td><font color="#000000" size="-1">
kickstart_rom_file=nom_du_lecteur:e-uae/kick13.rom<br>
gfx_framerate=1<br>
gfx_width=640<br>
gfx_height=480<br>
sound_output=normal<br>
sound_frequency=22050<br>
sound_bits=8<br>
sound_max_buff=1024<br>
sound_channels=mono<br>
cpu_type=68000<br>
cpu_speed=4<br>
fastmem_size=0<br>
chipmem_size=2<br>
floppy0=nom_du_lecteur:e-uae/nom_de_la_rom.adf<br>
chipset=ocs<br>
gfx_fullscreen_amiga=yes<br>
immediate_blits=yes<br>
gfx_center_horizontal=simple<br>
gfx_center_vertical=simple
</font>
</td></tr></table>
<br>

Ici, nous avons remplacé "AGA" par "OCS", remplacé "68020" par "68000", annulé la mémoire Fast
("fastmem_size=0"), mis la mémoire Chip à 1 Mo ("chipmem_size=2") et nous avons effacé
la ligne correspontant au disque dur ("filesystem") pour la remplacer
par une ligne pour le lecteur de disquette ("floppy0=nom_du_lecteur:e-uae/nom_de_la_rom.adf").
Bien sûr, il faut remplacer ce nom par celui de votre fichier ADF.<br><br>


<font size="+1" color="#ccbb33">Pour conclure</font><br><br>

A terme, l'idéal serais d'avoir une GUI qui génère des scripts .uaerc.
Côté performance, cette version apporte une bonne jouabilité pour 90 % des jeux OCS/ECS. Le peu
de jeux AGA que j'ai passent pas mal.<br><br>

Les réglages d'origine d'E-UAE sont très mous... alors utilisez un script&nbsp;!
Je précise que ma configuration est un Pegasos G3 à 600 MHz, donc je pense que les choses
s'améliorent un peu sur les Pegasos 2.<br><br>

Le script que je vous ai décrit n'est nullement le plus parfait du monde, je me contente d'émuler
un A1200 avec Fastram. Ce E-UAE demeure plus lent que les versions d'UAE précédemment vues mais
il est d'une redoutable stabilité, ce qui est un argument de poids&nbsp;!<br><br><br>


<div align="center"><a href="#top">Retour en haut</a> | <a href="sommaire.html">Retour au sommaire</a></div><br><br> 

     </td>
    </tr>
   </table>
  </td>
 </tr>
</table>


</body>
</html>

