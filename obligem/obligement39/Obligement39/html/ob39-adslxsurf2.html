<html>
 <head>
  <title>ADSL sur X-Surf 2</title>
  <meta name="author" CONTENT="David Brunet obligement@free.fr">
 </head>

<body bgcolor="#000000" text="#cccccc" link="#cccc33" vlink="#aaaa22" alink="#cccccc" marginheight="0" marginwidth="0" topmargin="5" leftmargin="0">

<a name="top">

<map name="ObMap">
  <area shape="rect" coords="0,0,760,82" href="http://obligement.free.fr">
  <area shape="rect" coords="8,87,62,104" href="../index.html" alt="Intro">
  <area shape="rect" coords="80,87,168,104" href="edito.html" alt="Editorial">
  <area shape="rect" coords="186,87,278,104" href="apropos.html" alt="A Propos">
  <area shape="rect" coords="296,87,399,104" href="sommaire.html" alt="Sommaire">
  <area shape="rect" coords="414,87,473,104" href="quizz.html" alt="Quizz">
  <area shape="rect" coords="491,87,589,104" href="musiques.html" alt="Musiques">
  <area shape="rect" coords="607,87,648,104" href="pub.html" alt="Pub">
  <area shape="rect" coords="666,87,756,104" href="archives.html" alt="Archives">
</map>

<table align="center" width="760" height="100%" background="../gfx/fondsommaire.jpg" bgcolor="#113333" cellspacing="0" cellpadding="0">
 <tr>
  <td align="center">
   <img src="../gfx/oblogo.jpg" ismap usemap="#ObMap" border="0" height="108" width="760" alt="Obligement">

   <br><br><br>
   <table align="center" width="75%">
    <tr>
     <td>

<div align="center"><font size="+3">En pratique : ADSL avec carte X-Surf II </font>par&nbsp;<a href="mailto:bachelet.adelphe@free.fr">Adelphe&nbsp;Bachelet</a></div><br><br><br>


L'Amiga et l'ADSL, c'est possible&nbsp;? Mais oui. Mais c'est pas si facile qu'on ne le pense. Cet article va vous
relater ma petite expérience toute récente dans ce domaine.<br><br>

M'étant basé sur l'article figurant sur l'excellent site <a href="http://amigaenreseau.free.fr">Amiga En Réseau</a>,
vous retrouverez des ressemblances. Mais le but de cet article n'est pas de réinventer la roue, mais de vous faire
part de mon expérience, avec ma configuration bien précise (A1400 + XSurf II).<br><br>

<font size="+1" color="#ccbb33">1. Configuration</font><br><br>

Ma configuration&nbsp;:<br>
- Amiga 1400 (A1200 + ZorroII Micronik)<br>
- Blizzard PPC 603e+ + 96 Mo Fast RAM<br>
- Cybervision 64/3D<br>
- Carte Ethernet X-Surf II<br>
- Modem Alcatel Speed Touch Home<br>
- OS 3.9<br>
- MiamiDeluxe 1.0c et miamipppoe.device v1.7<br>
- AWeb 3.4 APL<br>
- Yam 2.3p1<br><br>

Configuration minimale requise&nbsp;:<br>
- Un Amiga avec un Bus ZorroII/III de libre<br>
- Un processeur 680x0 (68040 à 25Mhz ou + recommandé car le miamipppoe.device est gourmand)<br>
- Un modem Ethernet ADSL (Alcatel Speed Touch Home dans notre cas)<br>
- MiamiDeluxe v1.0c<br>
- MUI 3.8 ou +<br>
- Miamipppoe.device v1.7<br>
- Et un bon disque dur, of course&nbsp;:-)<br><br>

<font size="+1" color="#ccbb33">2. Présentation de la X-Surf II</font><br><br>

Sur Amiga, il existe une seule grande possibilité de connexion pour l'ADSL&nbsp;: carte éthernet + modem éthernet.
Soit vous optez pour une carte éthernet venant sur l'un des ports ZorroII (AriadneII, X-Surf, X-Surf II), ou
bien, pour les A1200, vous optez pour le port PCMCIA en optant pour le PCMCIA 10Mbs + le modem éthernet ADSL.<br><br>

Et l'USB&nbsp;? me direz vous&nbsp;: du point de vu hardware, oui, avec les cartes Highway et Subway et les modems ADSL USB.
En l'état actuel, les pilotes n'existent pas encore (mais cela ne saurait tarder).<br><br>

C'est pourquoi, dans mon cas, et ayant des bus ZorroII dans mon A1200, j'ai opté pour la X-Surf II et le modem
Alcatel Speed Touch Home.<br><br>

<div align="center">
<img src="../gfx/xsurf.jpg" border="0" hspace="0" width="302" height="310" alt="X-Surf"><br><br><font size="-1">
N'ayant pas trouvé d'illustration de la carte X-surf II, j'ai choisi une photo de la X-Surf I.
Ces deux cartes sont semblables. La principale différence réside dans le fait que la X-surf II ne possède pas de prise
10Base2-BNC (la prise blanche à droite).
</font><br><br><br>
</div>

La X-Surf II est en fait la nouvelle version de la célèbre carte X-Surf. Elle est compatible avec tout les types
de Bus Zorro (A2000, A3000, A4000, ZorroII pour A1200 de Micronik, RBM etc.).<br><br>

Normalement, elle inclue les pilotes PPPoE, Sana II. Elle permet des taux de transfert de 20 MBit en FullDuplex
(quand l'Amiga reçoit des données et en envoi en même temps). Et comme si cela ne suffisait pas, elle possède
deux ports IDE (1 port de 2,5 pouces et 1 port de 3,5 pouces) permettant ainsi de connecter jusqu'à quatre unités IDE
non bootables ainsi que de deux ports horloge pouvant accueillir les cartes Silversurfer, VarIO et Subway par exemple.<br><br>

D'après ses caractéristiques, la X-Surf II se contente de Genesis ou de Miami, pour la bonne et simple raison qu'elle
intègre le pilote pour le PPPoE. J'ai des doutes sur ce fait car je n'ai pas reussi à utiliser Miami ou Genesis.
Dommage car cela oblige de passer par MiamiDX.<br><br>

<font size="+1" color="#ccbb33">3. Installation logicielle de la X-Surf II</font><br><br>

La carte X-Surf II est founie avec un cédérom. En fait, ce cédé ne nous sert quasiment à rien... ou presque&nbsp;:-)
Insérez le cédé, ouvrez le répertoire "X-Surf_Install:Amiga/" et cliquez sur l'icône d'installation. Ce script 
va installer le x-surf.device. Il créera en plus dans SYS: un autre répertoire avec des outils (pour les 
réseaux en local) mais cela ne nous sert à rien dans l'immédiat.<br><br>

Voilà, c'est tout, vous pouvez retirer le cédé. Maintenant, passons à la configuration de Miami Deluxe...<br><br>

<font size="+1" color="#ccbb33">4. Réglages de Miami Deluxe (avec x-surf.device)</font><br><br>

Lancer MiamiDX.<br><br>

<b>4.1 Réglages matériel</b><br><br>

La première étape consiste à faire reconnaître votre carte éthernet (ici, la X-Surf II).<br><br>

Dans la rubrique "Hardware", cliquez sur "New" et choisissez comme type&nbsp;: "Ethernet".<br>
Pour ne pas dérroger à la tradition, nous allons lui donner le nom de "eth0".<br>
Une nouvelle fenêtre intitulée "Hardware Definition&nbsp;: Ethernet" devrait s'ouvrir. Entrez les paramètres suivants&nbsp;:<br><br>

Name : eth0<br>
Type : Sana-II driver<br>
Driver : x-surf.device<br>
Unit : 0<br><br>

Ensuite, sélectionnez "SANA II parameters..." et cliquez sur "Query Device". Faites OK pour finir.<br><br>

<div align="center">
<img src="../gfx/miamidx02.jpg" border="0" hspace="0" width="479" height="304" alt="Hardware definition&nbsp;: ethernet"><br><br>
<font size="-1">Hardware definition : ethernet</font><br><br><br>
</div>

Maintenant, nous allons faire reconnaître votre Modem (Alcatel Speed Touch Home dans notre cas).<br><br>

Toujours dans la rubrique "Hardware", cliquez à nouveau sur "New" et choisissez le type&nbsp;: "Serial".
Dans la nouvelle fenêtre intitulée "Hardware definition&nbsp;: Serial", entrez les informations suivantes&nbsp;:<br><br>

Name : seradsl<br>
Type : Serial device driver<br>
Driver : miamipppoe.device<br>
Unit : 0<br>
Speed : 460800<br>
Flow control : RTS/CTS<br>
EOF Mode : auto<br>
MTU : 1492<br>
Serial mode : 8n1<br><br>

Ensuite, cliquez sur "Modem settings" et entrez les informations suivantes&nbsp;:<br><br>

DTR mode : hangup<br>
Init string : rien<br>
Exit string : rien<br>
Dial prefix : ATD<br>
Dial suffix : \r<br>
Escape char : +<br><br>

Puis validez en cliquant sur OK.<br><br>

<div align="center">
<img src="../gfx/miamidx03.jpg" border="0" hspace="0" width="479" height="304" alt="Hardware definition : ethernet"><br><br>
<font size="-1">Hardware definition : ethernet</font><br><br><br>
</div>

<b>4.2 Réglages du Dialer</b><br><br>

Maintenant, nous allons procéder aux réglages du dialer. Dans la rubrique "Dialer", sélectionnez "New" 
et entrez les informations suivantes dans la nouvelle fenêtre intitulée "Dialer definition"&nbsp;:<br><br>

Name : diaadsl<br>
Login ID : entrez le Login fournis par votre FAI<br>
Password : entrez le mot de passe fournis par votre FAI<br><br>

Dans la fenetre "Phone numbers", sélectionnez "Add" et entrez l'adresse IP de votre modem Speed Touch
Home&nbsp;: 10.0.0.138 (Adresse IP par défaut pour ce modem).<br><br>

Validez avec OK.<br><br>

<div align="center">
<img src="../gfx/miamidx04.jpg" border="0" hspace="0" width="484" height="406" alt="Dialer definition"><br><br>
<font size="-1">Dialer definition</font><br><br><br>
</div>

<b>4.3 Réglages des Interfaces</b><br><br>

Maintenant, nous allons nous atteler à la création des interfaces.<br><br>

Commençons par l'interface de la carte éthernet. Dans la rubrique "Interfaces", sélectionnez "New".
Choisissez le type "Ethernet" et comme "Hardware", choisissez "eth0".<br><br>

Dans la nouvelle fenêtre intitulée "Interface définition", entrez les données suivantes&nbsp;:<br><br>

Alias : eth0<br>
Hardware : eth0<br>
IP type : Static<br>
IP address : 10.0.0.1<br>
Netmask type : static<br>
Netmask : 255.0.0.0<br>
Gateway type : Static<br>
Gateway : 0.0.0.0<br><br>

Pour le reste, vous laissez comme c'est.<br><br>

<div align="center">
<img src="../gfx/miamidx06.jpg" border="0" hspace="0" width="550" height="305" alt="Interface definition"><br><br>
<font size="-1">Interface definition</font><br><br><br>
</div>

Maintenant, nous allons créer l'interface pour le protocole pppoe. Dans la rubrique "Interfaces", 
re-sélectionnez sur "New". Choisissez comme type&nbsp;: "PPP dialout, internet" et comme Hardware, choisissez
"seradsl".<br><br>

Dans la nouvelle fenêtre intitulée "Interface définition&nbsp;: ppp0", entrez les informations suivantes&nbsp;:<br><br>

Alias : dialadsl<br>
Hardware : seradsl<br>
Dialer : dialadsl<br>
IP type : dynamic<br>
Gateway type : dynamic<br>
Multicasts : disabled (comme vous voulez)<br>
GUI default : activé<br><br>

Cliquez ensuite sur "TCP/IP settings..." et mettez&nbsp;:<br><br>

Get dynamics host name, priority : 1<br>
Get dynamic DNS Servers : verify & add<br><br>

Validez avec OK.<br><br>

<div align="center">
<img src="../gfx/miamidx07.jpg" border="0" hspace="0" width="550" height="305" alt="Interface definition ppp0"><br><br>
<font size="-1">Interface definition ppp0</font><br><br><br>
</div>

<b>4.4 Réglages des bases de données</b><br><br>

Maintenant, il ne nous reste plus qu'à régler les bases de données. Sélectionnez la rubrique "Database" 
et choisissez "domains". Si votre FAI vous a fournis le nom de domaine, sélectionnez "Add" et entrez 
le (Free dans notre exemple).<br><br>

<div align="center">
<img src="../gfx/miamidx08.jpg" border="0" hspace="0" width="550" height="303" alt="Rubrique database - domains"><br><br>
<font size="-1">Rubrique database - domains</font><br><br><br>
</div>

Ensuite, choisissez "DNS servers". si votre FAI vous a fourni les adresses IP des serveurs DNS 
primaire et secondaire, sélectionnez "Add" et entrez les.<br><br>

<div align="center">
<img src="../gfx/miamidx09.jpg" border="0" hspace="0" width="550" height="303" alt="Rubrique DNS Servers"><br><br>
<font size="-1">Rubrique DNS Servers</font><br><br><br>
</div>

Enfin, nous allons créer les données concernant les utilisateurs. choisissez "Users" et cliquez sur Add
pour le premier User.<br><br>

Entrez les données suivantes :<br><br>

User name : root<br>
User id : 0<br>
Group id : 0<br><br>

Ensuite, recliquez sur "Add" pour créer le deuxième utilisateur (je ne sais pas si cela est obligatoire, mais ça mange
pas de pain) et entrez les données suivantes&nbsp;:<br><br>

User name : (ce que vous voulez) par exemple : Amiga<br>
User id : 1000<br>
Group id : 1000<br><br>

<div align="center">
<img src="../gfx/miamidx10.jpg" border="0" hspace="0" width="550" height="303" alt="Rubrique database - users"><br><br>
<font size="-1">Rubrique database - users</font><br><br><br>
</div>

Voilà, Miami Deluxe est paramétré, sauvegardez les réglages. Pour vous connecter, il ne vous reste plus cas
cliquez sur le bouton "Online".<br><br>

<font size="+1" color="#ccbb33">5. Réglages de Miami Deluxe (avec MNI)</font><br><br>

Au chapitre 4, nous avons vu comment paramétrer MiamiDX en utilisant le x-surf.device. Mais nous pouvons
aussi utilisez un device interne à MiamiDX&nbsp;: le MNI. Ici, en l'occurence, ce MNI ce nomme&nbsp;: z2-dp8390.mni.<br><br>

Au niveau des réglages, il n'y a pas grand chose qui change par rapport au x-surf.device. En fait, seule la
première partie (réglages Hardware de la carte Ethernet au 4.1) change.<br><br>

Dans la rubrique "Hardware", double cliquez sur "eth0" et modifiez les paramètres suivants&nbsp;:<br><br>

Type : MNI driver<br>
Drivers : Miami:MNI/z2-dp8390.mni<br>
Unit : 300 (paramètre automtiquement réglé en cliquant sur "Find Boards...")<br>
MNI OPTIONS : MEDIA=10BASET DUPLEX=FULL (au choix).<br><br>

Le bouton "MNI information..." vous donne des infos sur le MNI choisi.<br>
Le bouton "Find boards..." vous permet de voir si votre carte est reconnu par le MNI.<br><br>

MEDIA=10BASET signifie que le Modem est relié à la prise 10BaseT de la carte.<br>
MEDIA=AUTO signifie que la carte détemine automatiquement la prise sur laquelle est branché le modem.<br><br>

DUPLEX=HALF indique que le mode de connexion est en FullDuplex Partiel.<br>
DUPLEX=FULL indique que le mode de connexion est en FullDuplex Total.<br><br>


Validez par OK.<br>
Les autres paramètres ne changent pas.<br><br>

<div align="center">
<img src="../gfx/miamidx11.jpg" border="0" hspace="0" width="479" height="304" alt="KaM"><br><br>
<font size="-1">Hardware definition : Ethernet via MNI</font><br><br><br>
</div>

<font size="+1" color="#ccbb33">6. Problèmes rencontrés</font><br><br>

Au début, j'avais utilisé les paramètres de MiamiDX via le x-surf.device. Cela fonctionnait bien sauf que,
quand je me déconnectais, je ne pouvais plus me reconnecter après plusieurs heures, et sans compter
les nombreux plantages...<br><br>
En utilisant le MNI, ce problème semble avoir disparu. La X-surf II est très proche de la X-Surf I. En fait,
on peut dire que la X-Surf II correspond à la X-Surf I, mais en light, sans matière grasse :-)<br><br>

Il peut arriver quelques fois que Miami Deluxe ne se connecte pas correctement&nbsp;:<br><br>

1) MiamiDX ne se connecte pas du premier coup et reste bloqué au dialer (en général, dans la journée et
rarement la nuit)&nbsp;: il devrait se connecter au bout de deux ou trois essais. Sinon, faites "Cancel (f1)", puis
éteignez et rallumez le modem, et reconnectez MiamiDX (bouton "Online") et tout rendre dans l'ordre.<br><br>

2) MiamiDx passe bien l'étape de la connexion mais bloque à l'étape de configuration de PPP (en
général, dans la journée et rarement la nuit)&nbsp;: là aussi, déconnectez MiamiDX (bouton "Offline"), éteignez
et rallumez le modem, et reconnectez MiamiDX (bouton "Online") et cela devrait faire l'affaire.<br><br>

3) De plus, j'ai noté des interruptions de chargement des pages, ainsi que des mails aussi bien avec le x-surf.device
que le MNI. En fait, j'ai constaté que la led verte situé à l'arrière du modem signal une bonne intégrité du réseau,
tandis que celle situé sur la carte X-Surf II n'est plus allumée.
Est-ce un probleme de ligne, de MiamiDX, de la carte, ou tout simplement ma configuration hardware qui vieillit
mal (Dieu sait qu'elle a souffert la pauvre machine), je ne sais pas.
Mais là aussi, la procédure est simple&nbsp;: déconnectez MiamiDX (bouton "Offline"), éteignez et rallumez le modem,
et reconnectez MiamiDX (bouton "Online") et tout rendre dans l'ordre.<br><br>

Bien sûr, si vous utilisez le x-surf.device, vous avez pas le choix, vous devez réinitialiser le système, car si
vous coupez la connection, MiamiDX va "planter" lamentablement.<br><br>

<font size="+1" color="#ccbb33">7. Pour conclure</font><br><br>

La carte X-Surf II est une excellente carte. Mais&nbsp;:<br><br>

- La documentation est trop légère. En fait, une fois que la carte est branchée et que le pilote est installé, on
ne sais plus quoi faire. Dommage.<br><br>

- De plus, le soit disant pilote PPPoE intégré est inutilisé, ou inutilisable. Je ne sais pas. Mais s'il y a
une manipulation spéciale à faire, il serait bon de le signaler sur la document et dans toutes les langues.<br><br>

D'après mon revendeur :<br><br>

"L'installation présente sur le cédé permet une connexion sur un réseau local, ou une connexion Internet en
DHCP avec Miami ou Genesis. Si vous êtes en PPPoE, le logiciel sur le cédé ne suffit pas."<br><br>

C'est bien, mais le modem Alcatel Speed Touch Home a son mode DHCP désactivé par défaut (contrairement à sa
version Pro) et il est plus que recommandé de ne pas toucher aux paramétrages par défaut du modem si vous n'êtes
pas sûr de ce que vous faites (ce qui est mon cas&nbsp;:-).<br>
De plus, cela pourrait être indiqué dans la documentation de la X-Surf II.

Un petit mot sur les finances dans mon cas&nbsp;:<br><br>

Le modem Speed Touch Home plus un filtre supplémentaite (dans mon cas): 133 Euros TTC<br>
La carte Ethernet X-surf II : 100 Euros TTC<br>
Abonnement ADSL chez Free : 30 Euros TTC<br>
Total : 263 Euros <br><br>

Là ou je rage, c'est que Free m'a envoyé son Modem ADSL en USB (inutilisable). Et si, par rapport à ma config,
les pilotes des modems ADSL en USB existaient, cela m'aurait couté moins cher (environ 143 euros), pour peut-être le même résultat, voire un taux de tranfert plus important.<br><br>

Enfin, on ne doit pas oublier la possibilité de la carte PCMCIA 10Mbs&nbsp;:<br><br>

Modem ADSL Speed Touch Home plus un filtre supplémentaire : 133 Euros TTC<br>
Carte PCMCIA 10 Mb plus coude pour la tour : 118 Euros TTC<br>
Abonnement ADSL chez Free : 30 Euros TTC<br>
Total : 284 euros TTC<br><br>

Aux vues des deux possibilités (X-Surf II ou PCMCIA 10 Mb) qui s'offraient à moi&nbsp;: quelles sont les résultats
avec la PCMCIA 10 Mb&nbsp;? Je ne sais pas. Mais pour 20 Euros de moins, vous avez plus de
possibilités d'extension avec la X-Surf II (2 ports IDE, port horloge pouvant accueillir la SilverSurfer,
VarIO, Subway...).<br><br>

Avec ma config actuelle et mes réglages actuels, j'ai obtenu avec AWeb sur une archive de 1,1 Mo un taux de
transfert de 50&nbsp;000 cps. Mais j'ai pas trop confiance en AWeb qui est réputé pour être relativement lent.
De plus, cet essai, je l'ai réalisé à cinq heures du matin, donc le réseau n'était pas surchargé.
Que ce soit avec le x-surf.device ou le MNI, les performances semblent identiques.<br><br>

<b>Bon, faisont le bilan&nbsp;:</b><br><br>

J'ai aimé :-) :<br><br>

- Simple d'installation dans l'Amiga<br>
- Propose deux ports IDE (quatre unités IDE non bootables) et deux ports horloge<br><br>

Je n'ai pas aimé, mais vraiment pas :-( :<br><br>

- Documentation plus qu'insuffisante<br>
- Pilote interne PPPoE inutilisable (à cause de la documentation trop légère)<br><br>

Enfin, pour conclure, il est certain que les configurations présentées ci-dessus sont loin d'être parfaites.
Il est de même certain qu'en taux de transfert on peut faire mieux. Enfin, il est certain que mon matériel
limite les capacités de l'ADSL (68040 à 25 Mhz, bus ZorroII etc...). Mais à moyen terme, l'ADSL via la X-Surf II
est un bon investissement.<br><br>

N'hésitez donc pas à tester d'autres programmes (IBrowse v2.3 entre autre) ou bien d'autres paramètres de
Miami Deluxe et faites nous part des résultats.<br><br>

Quoiqu'il en soit, je continue à tester les différentes possibilités de paramétrages de MiamiDX afin
d'optimiser la X-Surf II. J'ai toujours pas résolu le problème d'interruption de transfert mais je
continue mes recherches.<br><br><br>


<div align="center"><a href="#top">Retour en haut</a> | <a href="sommaire.html">Retour au sommaire</a></div><br><br> 


     </td>
    </tr>
   </table>
  </td>
 </tr>
</table>


</body>
</html>

