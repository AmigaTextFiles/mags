<html>
<head>
  <title>Workshops</title>
  <meta name="Generator" content="GuideML V1.5">
  <meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<a href="main.html">CONTENTS</a> | <a href="workshops1.html">PREV</a> | <a href="workshops3.html">NEXT</a>
<hr>
<pre>

2. KDE unter NetBSD auf dem Amiga - ein Erfahrungsbericht (von Alexx Riedel)

&raquo;Diejenigen, die auf ihrem Amiga neben dem AmigaOS auch noch die
Unix-Variante NetBSD laufen haben, werden in letzter Zeit wohl schon &ouml;fters
neidisch in Richtung PC geblickt haben: Dort hat Linux jetzt mit KDE eine
wirklich ansprechende und recht intuitive Oberfl&auml;che erhalten, die es jedem
erm&ouml;glicht, ein leistungsf&auml;higes, aber komplexes Betriebssystem wie Unix
einfach und komfortabel mit einer graphischen Oberfl&auml;che zu nutzen. Dank
vieler Zusatzprogramme und u.a. nahtloser Internetintegration ist Linux/KDE
auf dem PC wohl als das &quot;bessere Windows&quot; anzusehen. Da sowohl von KDE als
auch vom Widget-Toolkit Qt, auf dessen Klassen KDE basiert, der Sourcecode
frei erh&auml;ltlich ist, kann man diesen nat&uuml;rlich auch auf anderen
Unix-Systemen, also auch NetBSD, kompilieren, wenn man etwas Phantasie und
vor allem Geduld mitbringt. 


1. Die Installation des &quot;GUI-Toolkits&quot; Qt:

Eine nahegelegene FTP-Site f&uuml;r den Download der Qt-Sourcen findet man auf
dem Server der Herstellerfirma, TrollTech (<a href="http://www.troll.no">http://www.troll.no</a>). Die
aktuelle Version ist 1.33, aktuellere Betas gibt's nat&uuml;rlich auch.
Kompilieren und Installation gehen vorbildlich problemlos &uuml;ber die B&uuml;hne:
Archiv &quot;qt*.tar.gz&quot; in &quot;/usr/local&quot; entpacken, das entstandene Directory
nach &quot;qt&quot; umbenennen, und dieses in die Environment-Variable &quot;QTDIR&quot;
(= /usr/local/qt/) eintragen. Ein anschlie&szlig;ender Aufruf von
&quot;make netbsd-gcc-shared&quot; generiert dann die passenden Binaries f&uuml;r
NetBSD/Amiga. Abschlie&szlig;end sollte man noch die Qt-Libraries f&uuml;r den
dynamischen Linker zug&auml;nglich machen, am besten, indem man den Pfad
(/usr/local/qt/lib) in die Datei &quot;/etc/ld.so.conf&quot; aufnimmt. Insbesondere
f&uuml;r die KDE-Installation sollte auch das Programm &quot;moc&quot; (im Pfad
&quot;/usr/local/qt/bin/moc&quot;) im Standardbefehlssuchpfad aufzufinden sein.


2. Die Installation von KDE:

Der Server der KDE-Entwickler (<a href="http://www.kde.org">http://www.kde.org</a>) verweist auf geeignete
FTP-Server. Der KDE-Sourcecode der aktuellen Beta4 wird in mehreren
Paketen archiviert. F&uuml;r die Minimalinstallation braucht man zumindest
&quot;kdesupport&quot;, &quot;kdelibs&quot; und &quot;kdebase&quot;. Da diese nicht im gewohnten
&quot;*.tar.gz&quot;, sondern im &quot;*.tar.bz2&quot;-Format gespeichert sind, sollte man sich
einen passenden Dekomprimierer (Bsp: Source auf KDE-Mirrorsites, Binary auf
<a href="ftp://ftp.de.netbsd.org,">ftp://ftp.de.netbsd.org,</a> Amiga-Binaries im Aminet) gleich mitziehen.


Die drei oben aufgef&uuml;hrten Pakete entpackt man wie &uuml;blich nach
&quot;/usr/local&quot;. Als Basisverzeichnis f&uuml;r die KDE-Installation erstellt man
noch das Verzeichnis &quot;/usr/local/kde&quot; und tr&auml;gt diesen Pfad in die
Environmentvariable &quot;KDEDIR&quot; ein. Die Pakete m&uuml;ssen nacheinander in der
Reihenfolge &quot;kdesupport&quot;, &quot;kdelibs&quot; und abschlie&szlig;end &quot;kdebase&quot;
installiert werden. Die Vorgehensweise ist, wie auch schon bei Qt, gut
dokumentiert: In jedem der drei Paketverzeichnise (nacheinander) mit
&quot;./configure&quot; ein Maschinenprofil erstellen, mit &quot;make&quot; kompilieren und mit
&quot;make install&quot; dann nach $KDEDIR installieren.


Zumindest bei &quot;kdesupport&quot; und &quot;kdebase&quot; klappt das auch ohne Probleme, da
Compilerwarnungen eh nur f&uuml;r Feiglinge sind, &uuml;bersehen wir diese gro&szlig;z&uuml;gig.
Bei der Installation des Base-Archives treten allerdings Probleme auf:

Zum einen baut das Configure-Skript scheinbar Mist, es erstellt Makefiles,
die eine Library namens &quot;libdl&quot; verlangen, welche, zumindest auf meinem
BSD-System, nicht vorhanden ist. Um dem abzuhelfen, gibt es zwei
M&ouml;glichkeiten: Entweder, man kopiert die korrekt erstellte Datei
&quot;config.cache&quot; aus einem der beiden anderen Verzeichnisse nach
&quot;/usr/local/kdebase&quot; und ruft dann &quot;./configure&quot; auf (verk&uuml;rzt nebenbei
die Dauer des ganzen Vorganges), oder man entfernt in allen generierten
Makefiles die Zeile mit dem &quot;-ldl&quot; (m&uuml;hsam, da ja jedes Unterverzeichnis
sein eigenes Makefile hat).

Das zweite Problem ist, da&szlig; sich der Terminalemulator, &quot;kvt&quot;, nicht
kompilieren l&auml;&szlig;t. Das ist halb so schlimm, weil der gute alte &quot;xterm&quot; ja
auch noch da ist. Der Einfachheit halber sollte man die Datei
&quot;/usr/local/kdebase/Makefile&quot; dahingehend ab&auml;ndern, da&szlig; der Eintrag
&quot;SUBDIRS =&quot; das Verzeichnis &quot;kvt&quot; nicht mehr enth&auml;lt, dann kann der
Compiler die Nacht durchlaufen, ohne abzubrechen. Man kann ja &quot;kvt&quot; immer
noch nachinstallieren, indem man das Makefile im entsprechenden
Unterverzeichnis einzeln aufruft.


Das war die Installation des Minimal-KDE-Systems. Es h&ouml;rt sich alles recht
einfach an, aber der Computer ist daf&uuml;r n&auml;chtelang am Kompilieren (auf
meinem 040er). Den KDE-Befehlspfad &quot;/usr/local/kde/bin&quot; f&uuml;gt man
sinnigerweise noch dem Suchpfad hinzu, die KDE-Libraries in
&quot;/usr/local/kde/lib&quot; nimmt man noch nach &quot;/etc/ld.so.conf&quot; auf. Dann kann
man schon mal seine &quot;xinitrc&quot; &auml;ndern und statt des Standard-Windowmanagers
(meist wohl Fvwm2) &quot;startkde&quot; (&quot;kwm&quot; startet nur den Windowmanager,
&quot;startkde&quot; gleich die ganze Benutzeroberfl&auml;che) eintragen. Wie das dann in
der Standardkonfiguration aussieht, zeigt der beigef&uuml;gte Screenshot.

<a href="kdeamiga.png">Screenshot</a> (ab OS 3.0; PNG-Datatype mu&szlig; installiert sein)


Die weiteren Zusatzpakete lassen sich dann auf &auml;hnliche Weise installieren,
nur folgende Anmerkungen dazu:


- Die &quot;libjpeg&quot;-Installation aus dem kdesupport-Archiv vergi&szlig;t scheinbar,
  die Headerdatei &quot;jconfig.h&quot; richtig zu installieren. Dies f&uuml;hrt bei
  manchen Programmen zum Abbruch des Kompiliervorganges
  (v.a. &quot;kdegraphics&quot;-Archiv).

- Das Paket &quot;kdeadmin&quot; meldete bei mir, da&szlig; meine Systemarchitektur nicht
  unterst&uuml;tzt wird, also braucht man es sich gar nicht erst downzuloaden.


Noch ein paar Hinweise:

- Da GCC/G++ scheinbar defaultm&auml;&szlig;ig auf 68030/882 optimieren, habe ich f&uuml;r
  meinen Prozessor die Option &quot;-m68040&quot; in den Dateien &quot;config.cache&quot;
  manuell eingetragen (danach nochmal &quot;./configure&quot; aufrufen):

  ac_cv_prog_CXX=${ac_cv_prog_CXX='g++ -m68040'}

  ac_cv_prog_CXX=${ac_cv_prog_CXX='g++ -m68040'}

  Das ist wohl nicht ganz die saubere Superl&ouml;sung, aber es funktioniert
  so, und vielleicht wird der Code dadurch in manchen F&auml;llen schneller.

- Qt unterst&uuml;tzt OpenGL, einige Screenblanker von KDE ebenfalls OpenGL
  und die libXpm. Hat man diese Programme installiert (z.B. Mesa,
  Version &#062; 2), dann mu&szlig; man den Installationsroutinen auch mit der Hand
  nachhelfen, damit sie die notwendigen Headerdateien und Libraries finden.

- Die Komponente &quot;kwmsound&quot; st&uuml;rzt des &ouml;fteren ab (das erkennt man aber nur
  am Coredump). Da ich mit meinem NetBSD noch nie was mit Sound gemacht
  habe, kann ich nicht beurteilen, ob der Fehler am KDE oder an meiner
  Installation liegt.


3. Abschlie&szlig;end noch Anmerkungen bez&uuml;glich Leistung und Geschwindigkeit:

Wunder braucht man keine zu erwarten, KDE sprintet nicht gerade ab,
zumindest auf einem 040/25MHz. Vor allem Speichermangel bremst KDE ziemlich
aus, das System ist (bei mir 16 MB Fast-RAM) dauernd am Auslagern.
Andererseits: Die Terminalausgabe z.B. erscheint mir, rein subjektiv, eher
schneller als die unter Fvwm2. Auch die Qt-Beispiele laufen flott durch.

Ein anderer Grund d&uuml;rfte der X-Server sein: In meinem Fall (CV64/3D)
behandelt er die Grafikkarte scheinbar als &quot;dumb chunky framebuffer&quot;,
was im Klartext wohl hei&szlig;t, da&szlig; f&uuml;r alle Grafikoperationen der Prozessor
(und nicht die GraKa) am R&ouml;deln ist. BTW: Kennt jemand einen schnelleren
Server?


Ansonsten macht die Arbeit mit KDE richtig Spa&szlig;, man gew&ouml;hnt sich schnell
an Scherzchen wie integrierten Webbrowser und lernt das zu sch&auml;tzen. Und,
obwohl noch im Betastadium, l&auml;uft KDE ziemlich stabil und hat nur noch
wenige Ecken und Kanten. F&uuml;r Besitzer von NetBSD (oder einer der neuen
Linux-Distributionen f&uuml;r den Amiga) ist Qt &amp; KDE auf alle F&auml;lle einen
Versuch wert, wenn man die beigef&uuml;gten READMEs durchliest, stellt die
Installation keine un&uuml;berwindlichen Probleme dar (wenn sogar ich es
schaffe...). Nur ein gut ausgestatteter Rechner sollte schon vorhanden
sein...&laquo;
</pre>
</body>
</html>
