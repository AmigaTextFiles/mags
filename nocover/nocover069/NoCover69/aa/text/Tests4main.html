<HTML>
<BODY ALINK=#FFAA00 VLINK=#000077 LINK=#0022CC BGCOLOR=#FFFFFF TEXT=#000000>
<TABLE BORDER=0 WIDTH="100%">
<TR><TD><PRE>
4. Softwaretest: Filesystem PFS3 (von Michael Alzheimer)

»PFS3 - Voll krass!

PFS3 ist das neue "Professional File System" in der Version 3. Und das ist 
nicht mal gelogen (Ich meinte das mit dem Professional, nicht das mit der 
Version, obwohl die auch nicht gelogen ist!). PFS3 ist ein Filesystem f&uuml;r 
die Festplatte / Diskette oder &auml;hnliches. Praktisch so etwas wie das 
Standard "FastFileSystem", welches noch aus Commodores Zeiten stammt, nur 
westentlich perfomanter. In machen Bereichen bis zu schlappen 500%. Und 
ehrlich gesagt: Ich habe noch niemals zuvor so schnell ein Verzeichnis mit 
20.000 Dateien Inhalt gel&ouml;scht!

Aber bei PFS3 handelt es sich nicht nur um ein gew&ouml;hnliches FileSystem, 
sondern um ein ganzes Diskverwaltungspaket. Denn neben dem eigentlichen 
Filesystem werden auch extrem brauchbare Tools mitgeliefert, wie z. B. das 
Standard-Festplatteninstallationstool "HDInstTools", nur in seiner neuesten 
Version. Genauso ist auch der sogenannte "TD64" Treiber in das Filesystem 
eingebunden. Dies hat zu Folge, dass der AMIGA nicht nur unter OS3.5 
Festplatten und Partitionen verwalten kann, die gr&ouml;sser als 4 GigaByte 
sind. Toll, was?

Und als kleines Schmankerl wird bei PFS3 auch noch ein Spiel mitgeliefert! 
Zugegeben, ich hab es noch kein einziges Mal gespielt, aber des wird wohl 
noch kommen. 8-)

Eins vorweg: Dies ist keine komplette Installationsanleitung - mehr oder 
weniger nur die Kurzform. Wenn ihr mehr Informationen oder tiefere Infos 
braucht, lest bitte auch die PFS3-Anleitung! Denn mit Festplatten ist nicht 
zu spa&szlig;en.

Wenn man zun&auml;chst die CD in seinen H&auml;nden h&auml;lt, denkt man sich "Mh - was 
f&uuml;r ein tolles Cover", schmei&szlig;t die CD ins Laufwerk und ist ganz gespannt.

Installiert wird PFS3 &uuml;ber das mitgelieferte Install-Script, das auf der CD 
liegt. Und man sollte auch wirklich nur dieses nehmen, um PFS3 zu 
installieren. Alles andere kann schief gehen, wenn man nicht genau weiss, 
was man tun muss.

Also sch&ouml;n, ihr habt nun das Install-Script gestartet, und nach dem 
allgemeinen Blabla, werdet ihr aufgefordert, euren Namen einzugen. Dies 
solltet ihr tun, denn PFS3 muss registriert werden, damit es funktioniert. 
Anschlie&szlig;end m&uuml;sst ihr den CD-Key eingeben, der steht (wie sch&ouml;n, ihr m&uuml;sst 
die CD nicht wieder rausnehmen), auf dem CD-Cover. Nun k&ouml;nnt ihr ausw&auml;hlen, 
wo PFS3 installiert werden. Dabei handelt es sich um die Dokus und die 
Tools, NICHT um das Filesystem selber. Das FileSystem selber wird 
automatisch ins Verzeichnis "L:" kopiert. Zwischendurch m&uuml;sst ihr euch 
entscheiden, ob die Standard-Version installieren wollt, oder die Version 
mit MultiUser-Support. Wenn ihr Multiuser verwendet solltet ihr letzteres 
nehmen. Ansonsten, die Version ohne MultiUser. Das Tool "pfsformat" (steht 
im .../PFS3/Tools/" Verzeichnis) solltet ihr sicherheitshalber auf die 
Workbench-Disc kopieren. Falls was schief l&auml;uft und ihr neu formatieren 
m&uuml;sst. Und formatieren tut ihr besser &uuml;ber dieses Tools (bei Platten, die 
gr&ouml;&szlig;er als 4 GB sind, sowieso).

Wenn ihr nun denkt, jetzt ist PFS3 auf der Partition drauf - habt ihr 
falsch gedacht. Bis jetzt sind lediglich s&auml;mtliche Treiber und Files 
installiert. Der eigentliche Schritt, das Aufspielen auf die Partition 
kommt jetzt erst! Denn nach wie vor habt ihr das "FFS" auf der Platte 
drauf.

Installieren der einzelnen Partitionen mit PFS3
Um das Filesystem zu installieren, ist es zwingend notwendig an den 
Partitionseigenschaften Ver&auml;nderungen vorzunehmen. Dies kann zur Folge 
haben, dass Partitionen zerst&ouml;rt werden! Laut dem Autor von PFS3 ist PFS3 
voll abw&auml;rtskompatibel zu Partitionen, deren FileSystem bereits PFS2 oder 
AFS ist. Will hei&szlig;en, PFS3 kann auf solchen (aber nur auf solchen!!!) 
installiert werden, ohne dass die Daten, die darauf enthalten waren, 
zerst&ouml;rt werden. Aber meine Meinung dazu ist: Es kann gut gehen, muss aber 
nicht! Also, wenn ihr die M&ouml;glichkeit habt, erstellt euch vorher ein 
komplettes Backup aller Partitionen der Festplatte - sei es duch brennen 
mehrerer CD's oder durch kurzfristiges Einbauen einer weiteren Festplatte 
von einem Freund (kann auch eine MS-DOS-Platte sein - wenn ihr die dann 
formatiert, l&ouml;scht ihr wenigstens nichts wichtiges....). Also nochmal - 
seht zu, dass ihr ein Backup anlegt! Wenn ihr vorhabt sowieso komplett neu 
zu partitionieren, weil euch die Partitionsgrenzen nicht gefallen haben, 
dann m&uuml;sst ihr euch ja sowieso ein Backup erstellen.

Prinzipiell ist es recht einfach PFS3 auf einer Partition zu installieren, 
wenn der AMIGA mitspielt. Startet einfach das Tool "HDInstTools" - steht im 
Verzeichnis, wo ihr PFS3 installiert habt (Alos z. B. "SYS:Tools/PFS3/"). 
"HDInstTools" untersucht nun die einzelnen angeschlossenen Festplatten. 

Screenshot:
<IMG SRC="../extra/PFS3-Hit.png" ALT="Screenshot">

Nach der Analyse, k&ouml;nnt ihr die Festplatte ausw&auml;hlen, auf 
deren Partitionen ihr PFS3 installieren wollt. Habt ihr die Platte 
ausgew&auml;hlt, muss zuerst das Dateisystem der Platte bekannt gegeben werden. 
Dazu auf "Dateisystem" klicken. Dort auf "Hinzuf&uuml;gen" klicken. Es erscheint 
ein Dateiauswahlfenster. 

Screenshot:
<IMG SRC="../extra/PFS3-SFS.png" ALT="Screenshot">

Dort wechselt ihr in das Verzeichnis "L:" (sollte bereits automatisch
geschehen sein) und w&auml;hlt einen der "PFS" Treiber aus - je nachdem welchen
ihr ben&ouml;tigt. Also z. B. "pfs3" f&uuml;r Platten kleiner als 4 GB - "pfs3ds" f&uuml;r
Platten gr&ouml;&szlig;er 4 GB. 
Habt ihr die Version f&uuml;r Multiuser installiert, k&ouml;nnt ihr ebenfalls auch 
diese als mit und ohne "ds" installieren.

Hinweis: "ds" steht f&uuml;r "direct SCSI" - also direkt angesprochenes SCSI-
Device. Hat zur Folge, dass man mit PFS3 Festplatten gr&ouml;&szlig;er als 4 GB 
verwenden kann, auch unter &auml;lteren OS-Versionen als OS3.5! Sollte man in 
jedem Fall nehmen, wenn die Platte gr&ouml;&szlig;er als 4 GB ist. Sonst bekommt man 
tierische Probleme!

Jetzt w&auml;hlt ihr "Laden" an. Es erscheint ein neues Fenster, in dem ihr 
Dateisystemspezifische Einstellungen vornehmen k&ouml;nnt.

Screenshot:
<IMG SRC="../extra/PFS3-SFS1.png" ALT="Screenshot">

Also "Name" (wird vorgegeben), "DOSType" (steht meistens auf DOS1 - sollte
z.B. bei pfs3ds auf "PFS0" stehen), "Version" (wird vorgegeben) und
Revision (wird ebenfalls vorgegeben). Habt ihr alles eingegeben, klickt auf 
"Benutzen". Jetzt ist das Filesystem der Platte bekannt. Geht mit 
"Benutzen" raus.

Nachdem nun PFS3 der Festplatte bekannt ist, w&auml;hlt ihr "Teilungen 
einrichten" aus.

Screenshot:
<IMG SRC="../extra/PFS3-Part1.png" ALT="Screenshot">

Jetzt erscheint ein anderes Fenster, mit allen bereits vorhandenen
Partitionen. Klickt einfach eine Partition an, wo PFS3 installiert werden
soll, und sagt (klickt) "Teilung bearbeiten" an. 

Screenshot:
<IMG SRC="../extra/PFS3-Part2.png" ALT="Screenshot">

Es erscheint ein neues Fenster. Im Feld "Dateisystem" 
klickt ihr solange durch, bis ihr "Custom" habt. Dann tragt ihr in dem Feld 
drunter den Dateisystemnamen (DOSType) ein, also z. B. "PFS0". Jetzt k&ouml;nnt 
ihr noch ein paar &Auml;nderungen vornehmen, wie z. B. "Automount", oder 
"Bootbar". Dann vielleicht noch die Bootpriorit&auml;t, oder die Puffergr&ouml;&szlig;e 
ver&auml;ndern. Wichtig ist allerdings, wenn ihr was an den "Zylindern", also an 
"Zylinder, AnfangsZyl, EndZyl, PreAlloc, Reserved und Gr&ouml;&szlig;e" ver&auml;ndert, hat 
dies zur Folge, dass ihr danach diese Partition formatieren m&uuml;sst, weil sie 
in einem undefinierten Zustand liegt. Und dann - byebye ihr Daten, die da 
drauf waren! Also wenn ihr einfach nur ein neues Filesystem haben wollt, 
einfach lediglich den DOSType und das Dateisystem &auml;ndern (Dazu kann auch 
die Maske und MaxTransfer geh&ouml;ren).
Diesen Schritt wiederholt ihr f&uuml;r jede Partition.

Tip: Wollt ihr FFS und PFS3 Partitionen verwenden - legt FFS innerhalb der 
ersten 4 GB der Festplatten an, und auch nur dort! Ihr erlebt sonst unter 
Umst&auml;nden euer blaues wunder! Ausser bei OS3.5 - da sollte man es anlegen 
k&ouml;nnen wo man will, da OS3.5 ja Platten gr&ouml;&szlig;er 4 GB unterst&uuml;tzt - aber 
ausprobiert hab ich das auch noch nicht!

Seid ihr mit dem Einrichten der Partitionen fertig, verlasst ihr das 
Partitionsfenster mit "Benutzen". Mit "&Auml;nderungen auf Platte sichern", 
werden alle von euch gemachten Einstellungen auf Platte geschrieben. 
ACHTUNG! Wenn ihr dieses Feld gedr&uuml;ckt habt, werdet ihr nochmals gefragt, 
ob ihr wirklich alle &Auml;nderungen speichern wollt.

Screenshot:
<IMG SRC="../extra/PFS3-Abfrage1.png" ALT="Screenshot">

Wenn ihr "Ja" sagt dann werden die Partitionen umgeschrieben. Habt ihr auch
nur die kleinste &Auml;nderung an den Partitionsgr&ouml;&szlig;en gemacht, sind diese
weg!!! 
Also ihr m&uuml;sst genau wissen, was ihr da macht! Mit dem Fensterschlie&szlig;symbol 
kommt ihr immer wieder raus, ohne dass irgendeine &Auml;nderung wirksam wird.

Sind also alle &Auml;nderungen auf die Platte geschrieben worden, muss das 
System neu gebootet werden. 

Screenshot:
<IMG SRC="../extra/PFS3-Abfrage2.png" ALT="Screenshot">

Jetzt entscheidet es sich, ob alles gut gegangen ist - oder nicht. Ist nach
dem Neustart noch alles da - ist alles gutgegangen - Gl&uuml;ckwunsch! Das
Backup war f&uuml;r umsonst! Fehlt eine Partition oder ist eine Partition
zerst&ouml;rt - Gl&uuml;ckwunsch! Ihr habt ein Backup zum wiedereinspielen!

Also mal im Ernst - wenn ihr neu partitioniert habt, m&uuml;sst ihr eh alles neu 
formatieren - vermutlich hat die Kiste erst gar nicht gebootet (einfach 
&uuml;ber die Workbench-Disk booten! Geht immer!). Hat das System &uuml;ber die WB-
Disk gebootet - &ouml;ffnet ihr einfach eine Shell. Dort wechselt ihr in das 
Verzeichnis, indem das Tool "pfsformat", dass ihr am Anfang auf die Disk 
kopiert habt. Zum Formatieren gebt ihr ein:
pfsformat DEVICE=&lt;Device-Name also z. B. "DH0:"&gt; NAME=&lt;Plattenname z. B. 
"Work"&gt;. Dann k&ouml;nnt ihr noch einige Optionen eingeben. Die Erkl&auml;rung hierzu 
stehen in der PFS3-Anleitung.
Diesen Schritt wiederholt ihr dann f&uuml;r jede zerst&ouml;rte Partition.

Danach k&ouml;nnt ihr einfach das Backup wieder einspielen. Es sollte dann 
wieder alles funktionieren!

Im &Uuml;brigen: PFS3 kann auch auf Disketten eingesetzt werden!! Daf&uuml;r gibt es 
in der Schublade ".../Storage/DOSDrivers/" die entprechenden Dateien. So 
kann z. B. durch doppelklick auf "PF0" das PF0: Device (entspricht dem DF0: 
Device nur mit PFS-Filesystem) aktiviert, und verwendet werden.

Allgemein: Wenn ihr ein Laufwerk (oder auch Partition), das PFS als 
Filesystem enth&auml;lt, formatieren wollt, nehmt immer anstatt dem Standard-
Tool "Format" das mitgelieferte "pfsformat"-Tool. Ist kompatibler und hat 
mehr Optionen.

Also, ihr habt euch nun den Aufwand gemacht, und euch PFS3 auf eure 
Partitionen gehauen. Und wof&uuml;r?

 - F&uuml;r Disketten/Partitionen sind IMMER g&uuml;ltig - d. h. nie mehr "Disk not   
   validated!"
 - F&uuml;r Atemberaubente Plattengeschwindigkeiten!!! Wirklich!! Dies ist       
   besonders bei WEB-Browsern zu sehen. Wenn die ihre Dateien ins "Cache"   
   Verzeichnis abspeichern, bekommt man praktisch nichts mehr mit! Oder     
   wenn ihr mal 5000 Dateien in ein Verzeichnis kopiert und wieder l&ouml;scht!  
   Macht das mal unter FFS - ihr bekommt die Kriese - und es ist nicht die  
   Berta Kriese aus der Lindenstra&szlig;e! Aber unter PFS3 - eine Leichtigkeit.  
   Ein kleiner Vergleichstest hat gezeigt:
   AMIGA mit 50 Mhz, 64 MB Fast-RAM, 2 MB Chip-RAM, 8 GB Festplatte (IDE    
   mit PFS3-Dateisystem) im direkten Vergleich mit SUNSparc2 mit 40 Mhz, 64  
   MB RAM, 4 GB Festplatte (SCSI mit Unix-FileSystem) - Der AMIGA war beim  
   L&ouml;schen und Erstellen von 5000 Dateien in einem Verzeichnis etwa genauso  
   schnell wie die SUNSparc2!
   Gemessene Geschwindigkeit auf meinem AMIGA (A1200, 68030/50Mhz + 68882   
   FPU - 8GB IDE-Platte - interner IDE-Bus):
      78 Files/Sec. Erstellt
      51 Files/Sec. Ge&ouml;ffnet und wieder geschlossen.
     150 Files/Sec. l&ouml;schen.
     0.9 MB/Sec. Geschrieben
     1.4 MB/Sec. Gelesen.
     Wobei diese Daten sehr stark prozessorabh&auml;ngig sind. Meiner war        
     n&auml;mlich auf Anschlag! Also m&uuml;sste es z. B. mit einem G4-Board noch     
     viel schneller gehen!
 - F&uuml;r Partitionen gr&ouml;&szlig;er als 4 GB. Denn endlich k&ouml;nnen auch die            
   Partitionen gr&ouml;&szlig;er als 4 GB sein. Ist besonders bei gro&szlig;en Animationen   
   und gro&szlig;en Rendervorg&auml;ngen verdammt gut! Die Grenze von PFS3 -           
   Partitionen liegt laut Autor bei 104 GB. Also mehr als ausreichend -     
   oder hat jemand von euch einen A5000 - Mass-Storage von SUN zu Hause     
   steh'n? Also ich nicht!
 - F&uuml;r lange Dateinamen (bis zu 107 Zeichen!).
 - F&uuml;r Undelete - Verzeichnisse, in denen die Dateien bevor sie tats&auml;chlich  
   gel&ouml;scht werden, erstmal zwischengespeichert werden (&auml;hnelt dem          
   Papierkorb von Windoof, da die Dateien NICHT im Trash liegen, sondern    
   versteckt auf der Platte).
 - F&uuml;r Rollover-Files. Dies ist besonders bei gro&szlig;en LOG-Files n&uuml;tzlich.
 - F&uuml;r den PFSDoktor - zum Checken und Reparieren von PFS-Partitionen.      
   Zugegeben, ich hab ihn noch nie ben&ouml;tigt. Scheint aber ein gutes Tool zu  
   sein.
 - F&uuml;r ein Game!

Fazit: Wer bisher noch das FFS als Filesystem verwendet, sollte diese paar 
Mark (oder sagt man jetzt Euro?) investieren - es lohnt sich wirklich!!! 
Wer bereits PFS2 verwendet hatte, muss nicht unbedingt auf PFS3 umsteigen. 
PFS2 ist schon sehr gut. Bis auf einige Tools, die neu hinzugekommen sind.
Was aber auff&auml;llig ist, ist der Aufbau von PFS3! Dort gibt es sogannte 
"anodes" zum Adressieren der Datenbl&ouml;cken. Seltsam seltsam - bei Unix 
hei&szlig;en diese "Inodes" und sehen irgendwie genauso aus?!? Das zeigt wie 
genial PFS3 doch ist!

Also ich setze nun PFS3 bereits extrem erfolgreich ein! Ich hatte mal zum 
Spa&szlig; von 15 Aminet-CD's s&auml;mtliche ".info" Files in ein Verzeichnis kopiert. 
Das waren so um die 70 Tausend! Es gab keine Probleme! Im Gegenzug habe ich 
versucht aus einer Aminet-CD s&auml;mtliche ".info" Files auf eine FFS-Partition 
zu entpacken, bereits nach 500 Dateien hat FFS schlapp gemacht, und die 
Platte nur noch ger&ouml;delt.

Somit kann ich guten Gewissens PFS3 wirklich nur jedem empfehlen!

M. Alzheimer &lt;m.alzheimer@msp.baynet.de&gt;«

</PRE></TD></TR>
</TABLE>
</BODY>
</HTML>
</PRE></TD></TR>
</TABLE>
</BODY>
</HTML>
