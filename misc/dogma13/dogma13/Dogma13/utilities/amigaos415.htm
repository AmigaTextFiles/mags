<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<!-- created on MacBook(White) 2.26GHz Core2Duo/5Gb/GForce 9400M 256mb/Super/AirPort/MacOSX 10.9.x -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="keywords" content="amiga, poweramiga, амига, dogma, догма, magazine, e-zine, журнал, электронный журнал, amif1team, amifone, vinnny, russia, ukraine, amigaone, pegasos, amigaos, morphos, motorola, powerpc, g3, g4, a1200, a4000, cd32, workbench, opus, dopus, back to the future, back for the future">
<meta name="description" content="Dogma - русскоязычное периодическое интернет-издание, посвящённое компьютерной платформе Amiga. From Now Until the End of Time!">
<meta name="author" content="amifone/team Dogma">
<meta name="copyright" content="Copyright © 2002-2013 team Dogma">
<link rel="icon" href="../pix/main/icon.png" type="image/png">
<link rel="shortcut icon" href="../pix/main/favicon.ico" type="image/x-icon">
<title>Dogma - электронное Амижное издание</title>

<link rel="stylesheet" href="../themes/style.css" type="text/css" media="screen" />
<script type="text/javascript">
    document.documentElement.className = 'js';
</script>

<meta content="SimplePress v.4.8" name="generator"/><link rel='stylesheet' id='et_responsive-css'  href='../themes/css/responsive-ver=3.5.1.css' type='text/css' media='all' />

<link rel='stylesheet' id='et-shortcodes-css-css'  href='../themes/epanel/shortcodes/css/shortcodes-ver=3.0.css' type='text/css' media='all' />
<link rel='stylesheet' id='et-shortcodes-responsive-css-css'  href='../themes/epanel/shortcodes/css/shortcodes_responsive-ver=3.0.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='../themes/plugins/pagenavi-css-ver=2.70.css' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox-css'  href='../themes/epanel/page_templates/js/fancybox/jquery.fancybox-1.3.4-ver=1.3.4.css' type='text/css' media='screen' />
<link rel='stylesheet' id='et_page_templates-css'  href='../themes/epanel/page_templates/page_templates-ver=1.8.css' type='text/css' media='screen' />
<script type='text/javascript' src='../themes/includes/js/jquery/jquery-ver=1.8.3.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php.xml-rsd.html" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../themes/includes/wlwmanifest.xml.html" /> 
<meta name="generator" content="WordPress 3.5.1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<!--[if lt IE 7]>
    <link rel="stylesheet" type="text/css" href="../themes/css/ie6style.css" />
    <script type="text/javascript" src="../themes/js/DD_belatedPNG_0.0.8a-min.js"></script>
    <script type="text/javascript">DD_belatedPNG.fix('img#logo, .slider_image img, .banner, .banner .readmore, .wrap .image img, .thumb div .image img, div.avatar span.overlay');</script>
<![endif]-->
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="../themes/css/ie7style.css" />
<![endif]-->
</head>
<body class="home blog chrome et_includes_sidebar">

<!-- logo & menu -->
<script language="JavaScript" src="../menu_up.js" charset="UTF-8"></script>
<!-- end . logo & menu -->

    <div id="content">
        <div class="content_wrap">
            <div class="content_wrap">
                <div id="posts" >
                    <div id="breadcrumbs">
                        			<a href="../index.html">Dogma</a> <span class="separate">&raquo;</span>
									<a href="../utilities/index.html">Офисный пакет</a> <span class="separate">&raquo;</span>
							AmigaOS 4.1.5 оптимизация			                    </div>
                    <br class="clear"  />

                    		<div class="post">
                    		
                    		<div class="thumb">
			<div>
			<span class="image" style="background-image: url('../pix/utilities/amigaos41.png');">
					<img src="../themes/images/thumb-overlay.png" alt="" />
				</span>
			</div>
			<span class="shadow"></span>
		</div>

<b>По материалам:</b> -=/ <a href="http://www.amiga.pekdar.net/" target="_blank">Amiga Pekdar Net</a> /=-<br>
<b>Автор:</b> -=/ Pekdar /=- опубликовано 16 ноября 2012 года<br>
<b>Перевод:</b> -=/ <a href="../about/author.html" rel="author">amifone</a> /=- опубликовано 14 августа 2013 года<br><br>

<div class="code"><strong class="dd">И</strong>так, мы обновились до последней версии операционной системы AmigaOS 4.1.5 и теперь пришла пора провести несколько шагов по оптимизации нашей системы. Будем изменять системный файл <b>SYS:S/Startup-Sequence</b> и отключать ненужные нам модули в <b>SYS:Kickstart/KickLayout-A4000</b>, которые только забивают и так «на вес золота» нашу оперативную память.<br><br>

<h2>1. Изменение последовательности загрузки.</h2><br>

Запускаем <b>NotePad</b> (Блокнот) и открываем в нём системный файл <b>Startup-Sequence</b> находящийся в каталоге <b>SYS:S/Startup-Sequence</b>. Большинство пользователей вообще не понимают того факта, что множество маленьких файлов, которые система во время запуска загружает в память, можно хранить не в памяти, а на диске. Это исправление никоим образом не уменьшает функциональность системы. Итак, исправляем:<br><br>

Перед первой строкой <b>C:Assign >NIL: T: RAM:T</b><br>
Вставляем строку SYS:c/delete >NIL: SYS:T/#? QUIET<br><br>

Далее строку <b>C:Assign >NIL: T: RAM:T</b><br>
Заменяем на C:Assign >NIL: T: SYS:T<br><br>

А строку <b>C:Assign >NIL: CLIPS: RAM:Clipboards</b><br>
Меняем на C:Assign >NIL: CLIPS: SYS:Clipboards<br><br>

Сохраняем файл Startup-Sequence путём его перезаписи. И далее на системном диске в корневом каталоге создаём две новые директории <b>T</b> и <b>Clipboards</b>, данное действие вызывается из системного меню - Workbench-> execute и прописываем простую строку:<br>
MakeDir SYS: T SYS: Clipboards

<p align="center"><img class="image" src="../pix/utilities/amigaos415/sspomodyfikacji.jpg" alt="" width="569" height="447" /></p><br>

<h2>2. Модификация Kicklayout</h2><br>

Новая система кикстарта имеет модульную структуру. Необходимые модули (драйверы, файлы конфигурации и прочее) можно включать и отключать ненужные. Итак, давай отключать те резервные модули, которыми наша операционная система не пользуется. Задача может показаться более чем тривиальной, просто заходим в системный каталог <b>SYS:Kickstart</b> и смотрим по именам файлов, чем пользуемся, а чем нет, исходя из нашей модели Amiga.<br><br>

Но не всё так просто, как кажется! Можно заблудиться в трёх соснах. Для Amiga 4000D не нужно использовать набор <b>Kicklayout-A4000T</b> (он предназначен Амиг в башне). Используйте <b>Kicklayout-A4000</b>.<br><br>

Использование правильного Kicklayout файла влияет на применение соответствующих модулей именно для нашей модели Amiga. А как следствие, использование неправильно Kicklayout ведёт к дестабилизации системы в целом. Как узнать правильный ли Kicklayout мы выбрали для своей Амиги? Для этой цели можно применить два способа:

<ul><ol>1. Отключим файл <b>Kicklayout-A4000</b> простым переименованием. Если после перезагрузки мы отключили использующийся Kicklayout-A4000, то система просто перейдёт в AmigaDOS, где с помощью команды <b>Rename</b> вернём файлу первоначальное имя, и уже будем знать, что именно этот набор используется системой. В противном случае, продолжаем переименовывать и перезагружать систему.</ol>
<ol>2. Более элегантный способ заключается в изменении файла S:Startup-Sequence, где строку <b>Bootloader</b>
меняем на <b>Bootloader VERBOSE</b><br><br>

После делаем «холодную» перезагрузку системы комбинацией клавиш (<b>Ctrl+LAlt+PAlt</b>). Далее переключаем видео на RGB-порт (AGA). Вы увидите много информации на экране. Среди неё, кстати, вы найдёте достаточно много действительно полезной информации, тут можно отследить работу практически всех модулей работающих «неправильным» образом и найти причину.</ol></ul>

<center><img class="image" src="../pix/utilities/amigaos415/kicklayout.jpg" alt="" width="569" height="447" /></center><br>

Ладно давайте вернемся к существу нашего вопроса, нажимаем клавишу «Space», дабы остановить поток данной информации. И возвращаемся к информации связанной именно с использованием файла Kicklayout, тут в качестве примера приведён пример использования на модели Amiga 4000D системного файла Kicklayout-4000T, что естественно не верно - теперь то я об этом знаю. Исправляем данную ошибку следующим образом, снова запускаем NotePad (Блокнот) и опять открываем системный файл SYS: S / Startup-Sequence - найдя ранее прописанную строчку:<br><br>

VERBOSE Bootloader и заменяем её же со знанием дела, по шаблону:<br>
bootloader FILENAME "SYS: Kickstart/KickLayout" VERBOSE, к примеру:<br><br>

<b>Bootloader FILENAME "SYS: Kickstart/KickLayout-4000" VERBOSE</b><br><br>

Как обычно сохраняем изменения и осуществляем «холодную» перезагрузку (Ctrl + LAlt + overcoats), если хотите больше узнать что именно мы делаем данной командой обратитесь к системной документации SYS: Documentation / kernel / BootLoader.doc. Как только мы убедимся что система используем именно тот системный набор который нам необходим мы удаляем команду "VERBOSE" из загрузочного системного файла.<br><br>

<h2>Отключаем ненужные модули</h2><br>
 
Как обычно запускаем NotePаd и начинаем редактирование <b>SYS: Kickstart/KickLayout-A4000</b> - тут отключение ненужных модулей осуществляется вставкой перед началом имени модуля знака пунктуации «;» (точки с запятой). Также следует внимательно оценивать то что вы отключаете дабы не отключить какой-нибудь необходимый системе драйвер! И так, отключаем следующие модули:<br><br>

; <b>MODULE Kickstart / JXFileSystem</b>, это системная поддержка соответствующей файловой системы, правда у неё есть один серьёзный недостаток, в случае повреждения структуры файловой системы отсутствует инструмент восстановления данных. Так что отключаем его от греха по дальше.<br><br>

Модули обслуживающие SATA контроллер (а также поддерживающие FastSCSI диски с полным DMA доступом):<br><br>

; MODULE Kickstart/sii3112ide.device.kmod<br>
; MODULE Kickstart/sii3114ide.device.kmod<br>
; MODULE Kickstart/sii3512ide.device.kmod<br><br> 

Модуль использующийся только при наличии моста Prometheus и Firestorm, конечно при его наличии оставляйте данный модуль включённым:<br><br>

; MODULE Kickstart/sii0680ide.device.kmod<br><br>

Отключаем просто ненужный модуль:<br><br>
 
; MODULE Kickstart / nvram.config

<p align="center"><img class="image" src="../pix/utilities/amigaos415/os4.1u5-bootbevice.jpg" alt="" width="355" height="119" /></p><br>

Различные не используемые графические карты, драйвера которых просто занимают оперативную память:<br><br>

; MODULE Kickstart / 3DLabsPermedia2.chip<br>
; MODULE Kickstart / ATIRadeon.chip<br>
; MODULE Kickstart / CVisionPPC.card<br>
; MODULE Kickstart / Graffity.card<br>
; MODULE Kickstart / PicassoII.card<br>
; MODULE Kickstart / Piccolo.card<br>
; MODULE Kickstart / Spectrum.card<br>
; MODULE Kickstart / CirrusGD542X.chip<br>
; MODULE Kickstart / PiccoloSD64.card<br>
; MODULE Kickstart / Pixel64.card<br>
; MODULE Kickstart / CirrusGD5434.chip<br> 
; MODULE Kickstart / PicassoIV.card<br>
; MODULE Kickstart / CirrusGD5446.chip<br>
; MODULE Kickstart / RetinaBLT.card<br>
; MODULE Kickstart / NCR77C32BLT.chip<br>
; MODULE Kickstart / CyberVision.card<br>
; MODULE Kickstart / S3Trio64.chip<br>
; MODULE Kickstart / CVision3D.card<br>
; MODULE Kickstart / S3ViRGE.chip<br>
; MODULE Kickstart / Domino.card<br>
; MODULE Kickstart / TsengET4000.chip<br>
; MODULE Kickstart / Merlin.card<br>
; MODULE Kickstart / TsengET4000W32.chip<br><br> 

Данный USB модуль несмотря на то, что я его также отключаю, всё равно присутствует в системе:<br>
; MODULE Kickstart / highway.usbhcd<br><br>

Вот так ... всё достаточно просто и понятно? Не забудьте только случайно не отключить свою видео карту :) Хотя ничего плохого не произойдёт, система просто будет перегружаться в AGA режиме. Конечно, прийдётся опять всё вернуть на круги своя и включить отключённую ранее использующуюся видео карту. Тут стоит обратить внимание на данный системный модуль MODULE Kickstart / BootDevice.<br>

<p align="center"><img class="image" src="../pix/utilities/amigaos415/aos4.1u5-workbenchikona.jpg" alt="" width="575" height="478" /></p><br>

Просто на моей Amiga также установлена и стандартная Amiga OS3.9, она расположена на системном разделе - (3dh0 :) он имеет приоритет загрузки выше нежели у (DH0 OS4.1 :). Чтобы каждый раз не обращаться к системному меню «Startup Menu» и не указывать приоритеты загрузок той или иной операционной системы, и был разработан данный модуль хранящий в себе информацию о последнем загрузочном разделе той или иной системы, в соответствии с этой и грузиться последняя работающая операционная система - осуществляется быстрая перезагрузка.<br><br>

Сохраняем изменения в файле Kicklayout, перво-наперво, создаём файл <b>SYS: Kickstart / BootDevice</b>. Запускаем командную строку Shell и вводим следующую команду, при этом особое внимание обращаем на свои системные разделы, к примеру:<br><br>

<b>echo> SYS: Kickstart / BootDevice "dh0"</b>, так как мой системный радел под OS4.x - DH0, убедитесь что всё верно задав команду type <b>SYS: Kickstart / BootDevice</b>.<br><br>

Как можно убедиться из прилагаемого скриншота, у нас всё получилось. Как обычно осуществляем «холодную» перезагрузку - <b>Ctrl + LAlt + PALT</b>. Теперь вернемся к старому Kickstart и ESM, который также будет указывать на OS4.x раздел в данном случае (DH0 :) - что ж, после перезагрузки убеждаемся что объём свободной оперативной памяти также незначительно, но вырос!<br>

<p align="center"><img class="image" src="../pix/utilities/amigaos415/aos4.1u5-workbenchprefs.jpg" alt="" width="431" height="553" /></p><br>

<h2>И напоследок, маленькие хитрости - а можно ли изменить надписи в верхней системной панели ?</h2><br>

Нет ничего невозможного! Откроем каталог SYS: Prefs и запустим Workbench настройки. В окне мы увидим текстовый шаблон по которому и формируется информация системной панели. Нажимаем кнопку редактирования - расположенную справа от заданного шаблона и в открывшемся окне вы сможете удалять или добавлять элементы отображающие самую разнообразную системную информацию. К примеру я хочу например добавить: configuration memory-> virtual-> Open-> MB (% mvmMB), но лучше сделать таким образом as% mfmMB или tag% mvmMB, кстати данная функция не работает на 68к классических платформах. <b>Конец</b>.

</div>

<br class="clear" />
			<span class="readmore"><a href="../utilities/index1.html">К оглавлению</a></span>

					</div>
			<!-- .post -->

                </div><!-- #posts -->
                
<!-- right menu -->
<script language="JavaScript" src="../menu_down.js" charset="UTF-8"></script>
<!-- end . right menu -->
     
<a class="twitter-timeline" href="https://twitter.com/team_dogma" data-widget-id="380735389687750656">Твиты пользователя @team_dogma</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!-- right menu year -->
<script language="JavaScript" src="../menu_down_year.js" charset="UTF-8"></script>
<!-- end . right menu year -->
     
<script type="text/javascript"> 
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script> 
<script type="text/javascript"> 
	var pageTracker = _gat._getTracker("UA-5205247-2");
	pageTracker._trackPageview();
</script> 
 
<script type='text/javascript' src='../themes/js/jquery.fitvids-ver=1.0.js'></script>
<script type='text/javascript' src='../themes/js/jquery.flexslider-min-ver=1.0.js'></script>
<script type='text/javascript' src='../themes/js/et_flexslider-ver=1.0.js'></script>
<script type='text/javascript' src='../themes/epanel/page_templates/js/fancybox/jquery.easing-1.3.pack-ver=1.3.4.js'></script>
<script type='text/javascript' src='../themes/epanel/page_templates/js/fancybox/jquery.fancybox-1.3.4.pack-ver=1.3.4.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var et_ptemplates_strings = {"captcha":"Captcha","fill":"Fill","field":"field","invalid":"Invalid email"};
/* ]]> */
</script>
<script type='text/javascript' src='../themes/epanel/page_templates/js/et-ptemplates-frontend-ver=1.1.js'></script>
<script src="../themes/js/easing.js" type="text/javascript"></script>
<script src="../themes/js/superfish.js" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
	jQuery.noConflict();

	jQuery('ul.superfish').superfish({
		delay:       300,                            // one second delay on mouseout
		animation:   {'marginLeft':'0px',opacity:'show'},  // fade-in and slide-down animation
		speed:       'fast',                          // faster animation speed
		onBeforeShow: function(){ this.css('marginLeft','20px'); },
		autoArrows:  true,                           // disable generation of arrow mark-up
		dropShadows: false                            // disable drop shadows
	});

	
	jQuery('.gallery_item .thumb').hover(function() {
		jQuery(this).children('.readmore').animate({opacity:'show', 'top':'170px'}, "fast");
	}, function() {
		jQuery(this).children('.readmore').animate({opacity:'hide', 'top':'148px'}, "fast");
	});

	var pagemenuwidth = jQuery("ul.nav").width();
	var pagemleft = Math.round((960 - pagemenuwidth) / 2);
	jQuery("ul.nav").css('padding-left',pagemleft);


	jQuery('div#navwrap ul.nav li a').hover(function() {
		jQuery(this).animate({opacity: .4}, "fast");
	}, function() {
		jQuery(this).animate({opacity: 1}, "fast");
	});

	jQuery('img#logo').hover(function() {
		jQuery(this).animate({opacity: .6}, "fast");
	}, function() {
		jQuery(this).animate({opacity: 1}, "fast");
	});

	jQuery('.thumb div .image').hover(function() {
		jQuery(this).animate({opacity: .8}, "fast");
	}, function() {
		jQuery(this).animate({opacity: 1}, "fast");
	});

	//]]>
</script>
</body>
</html>