<html>
<!-- created on Pegasos I/600Mhz ATI Radeon 9200SE 128Mb 40GB Nec Combo -->
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<meta http-equiv="content-language" content="ru">
<meta name="robots" content="index,follow">
<meta name="keywords" content="amiga, poweramiga, амига, dogma, догма, magazine, e-zine, журнал, электронный журнал, amif1team, akuji, vinnny, russia, ukraine, amigaone, pegasos, amigaos, morphos, motorola, powerpc, g3, g4, a1200, a4000, cd32, workbench, opus, back to the future, back for the future">
<meta name="description" content="Догма - русскоязычное переодическое интернет издание посвящённое компьютерной платформе Amiga/Pegasos. Until the End of Time!">
<meta name="author" content="amif1team/team Dogma">
<meta name="copyright" content="Copyright © 2002-2008 team Dogma">
<link rel="icon" href="../gfx/icon.png" type="image/png">
<link rel="shortcut icon" href="../gfx/favicon.ico">
<title>Догма - электронное Амижное издание</title>
</head>
<body bgcolor="black" link="yellow">

<script language = "JavaScript">
function newImage(ImageIndex, NewButton)
{
NewButton = "../gfx/" + NewButton+".png"
document.images[ImageIndex].src = NewButton
return;
}
</script>

<table align="center" width="800" border="0" cellspacing="0" cellpadding="0" bgcolor="#eeeeee">

<tr height="125">
<td width="800"><a href="http://www.dogma.org.ru/"><img src="../gfx/up.png" width="800" height="125" border="0" alt="Догма - электронное Амижное издание"></a></td>
</tr>

<table align="center" width="800" border="0" cellspacing="0" cellpadding="0" bgcolor="white">

<tr height="25">

<td width="89"><a href="../about/index.html" onmouseover="newImage(1, '1a')" onmouseout="newImage(1, '1')"><img src="../gfx/1.png" alt="Колонка редакции" width="89" height="25" border="0"></a></td>

<td width="65"><a href="../interview/index.html" onmouseover="newImage(2, '2a')" onmouseout="newImage(2, '2')"><img src="../gfx/2.png" alt="Наши гости" width="65" height="25" border="0" valign="top"></a></td>

<td width="82"><a href="../history/index.html" onmouseover="newImage(3, '3a')" onmouseout="newImage(3, '3')"><img src="../gfx/3.png" alt="Хроника событий" width="82" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="86"><a href="../focus/index.html" onmouseover="newImage(4, '4a')" onmouseout="newImage(4, '4')"><img src="../gfx/4.png" alt="В фокусе" width="86" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="159"><img src="../gfx/5.png" alt="" width="159" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="86"><a href="../exclusive/index.html" onmouseover="newImage(6, '6a')" onmouseout="newImage(6, '6')"><img src="../gfx/6.png" alt="Xклюзив" width="86" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="80"><a href="../utilities/index.html" onmouseover="newImage(7, '7a')" onmouseout="newImage(7, '7')"><img src="../gfx/7.png" alt="Программы и утилиты" width="80" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="87"><a href="../games/index.html" onmouseover="newImage(8, '8a')" onmouseout="newImage(8, '8')"><img src="../gfx/8.png" alt="Игротека" width="87" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="66"><a href="../download/index.html" onmouseover="newImage(9, '9a')" onmouseout="newImage(9, '9')"><img src="../gfx/9.png" alt="Download" width="66" height="25" hspace="0" vspace="0" border="0" align="top"></a></td>

</tr>
</table>

<table align="center" width="800" border="0" cellspacing="0" cellpadding="0" bgcolor="black">
<tr>
<td bgcolor="black" width="800" valign="top">



<table align="right" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="black">
<tr>
<td bgcolor="#ffffff" valign="top">

<table width="100%" border="0" cellspacing="0" cellpadding="8" bgcolor="black">
<tr bgcolor="black" background="../gfx/back.png">
<td colspan="3"><font color="white" size="2">

<p align="center"><font size="+1" color="yellow"><b>Megadrive256 - Эмулятор дисковода Амиги</b></font></p>


<p>Название: Megadrive256<br>
Тип изделия: Эмулятор дисковода Амиги<br>
Разработчик: <a href="mailto:tim.tashpulatov(at)gmail.com">Тимур Ташпулатов</a><br>
Период разработки: 2005-н.в.</p>

<center><b><font color="yellow">История зарождения</font></b></center>

<p>Весной 2005 года мне позвонил приятель.  Его знакомая искала помощников,
чтобы дотащить до помойки какой-то раритетный "коммодор".  Так я стал
счастливым обладателем Commodore Amiga 500 французского розлива, монитора
1085S и штук тридцати дискет с играми и программами.  Из игр запустилась от
силы половина, а дискет с системой не оказалось ни одной, кроме загрузочной
с каким-то редактором.  Очень быстро выяснилось, что формат дискеты,
используемой Амигой, невозможно ни прочитать, ни тем более записать на PC.
С грехом пополам, используя загрузочную дискету с редактором, самодельный
шнур PC-Amiga и утилиту transadf, удалось сделать себе несколько системных
и игровых дискет, но путь этот был столь же геморройным, сколь и
малоэффективным.  Тут и появилась идея заменить встроенный дисковод Амиги
на что-нибудь электронное, с поддержкой современной flash-памяти, чтобы
можно было залить туда несколько сотен образов дискет.  Таким образом,
можно будет пересмотреть всё лучшее для Амиги, избежав возни с дискетами.</p>

<center><a href="../gfx/floppy_emulator/megadrive256_1.jpg" target="_blank"><img src="../gfx/floppy_emulator/megadrive256_1.jpg" width=320 height=240 border=0 alt="Amiga Floppy Emulator"></a><br><br>

<b><font color="yellow">Реализация</font></b></center>

<p>Прототип эмулятора был построен на МК ATmega161 семейства AVR компании
Atmel.  Согласно прикидкам, для эмуляции дисковода двойной плотности (DD,
880К) должно было хватить 8МГц тактовой частоты МК.  В качестве дисплея
применялся популярный LCD от мобильных телефонов Nokia 3310 (84x48 точек,
шина SPI).  Внешняя память - карточка SD/MMC в режиме доступа также по SPI.
Для хранения образа дискеты использовался внешний 30-pin 4МБ SIMM модуль.</p>

<p>Более цивилизованный вариант эмулятора использовал ATmega128L с тактовой
частотой 8МГц и отдельный 8MБ чип DRAM.  Предполагалось, что может быть
поддержано одновременно до двух эмулируемых дисководов, а один MFM-образ
DD-дискеты занимает более 2.5МБ.  Впоследствии от использования DRAM в виде
отдельных чипов пришлось отказаться по причине их малой распространённости
и низковольтности.</p>

<center><img src="../gfx/floppy_emulator/megadrive256_2.jpg" width=425 height=640 border=0 alt="Megadrive256"></center>

<p>Сегодняшний вариант эмулятора работает на ATmega2560 с тактовой частотой
16МГц.  В качестве дисплея применён графический LCD (128x64 точек, I2C).  В
качестве ОЗУ - 72-pin 4МБ SIMM.</p>

<p>Общая картина работы эмулятора:  с карточки flash-памяти выбирается
желаемый файл .ADF, загружается и преобразуется в MFM-образ дискеты в DRAM,
после чего эмулятор готов к работе.  МК отрабатывает формируемые Амигой
сигналы управления дисководом (выбор устройства, DIR, SIDE, STEP), формируя
в свою очередь сигналы TRK0, RDY и поток MFM-данных.  Поддерживаются также
сигнал DISK CHANGE и специфическая процедура определения Амигой параметров
подключенного дисковода с использованием сигналов MTR и RDY.</p>

<center><b><font color="yellow">Текущие возможности</font></b></center>

<p>На сегодня устройство эмулирует один стандартный дисковод Амиги двойной
плотности (880K).  Поддерживается только чтение.  Также поддерживается
работа с PC DD (720K) форматом, который используется в MSX и Atari ST.
Присутствует экспериментальная поддержка TR-DOS (файлы .TRD).</p>

<center><a href="../gfx/floppy_emulator/megadrive256_3.jpg" target="_blank"><img src="../gfx/floppy_emulator/megadrive256_3.jpg" width=320 height=240 border=0 alt="Tim Tashpulatov"></a><br><br>

<b><font color="yellow">Область применения</font></b></center>

<p>Предполагается, что это старинная вычислительная техника, синтезаторы.</p>

<center><b><font color="yellow">Планы на будущее</font></b></center>

<p>Поддержка записи, поддержка других популярных форматов (.FDI, .DMS).</p>

<center><b><font color="yellow">Распространение</font></b></center>

<p>Эмулятор ещё не завершён.  Это закрытый проект, впрочем будущее может
измениться.</p>

<div align="right"><font color="yellow" size="1"><b>Автор</b> <i>-= / tnt23 / =-</i> © 01/2008</font></div>

</td>
</tr>
</table>

</table>
<script language="JavaScript" src="../page.js"></script>
</body>
</html>