<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<!-- Converted on 18 Feb 1997 with RexxDoesAmigaGuide2HTML 2.1 by Michael Ranner. -->
<HTML>
<HEAD>
<TITLE>Tarjeta Graffiti</TITLE>
</HEAD>
<BODY BACKGROUND="images/amiga.gif" BGCOLOR="#FFFFFF">

<A HREF="main.html"><IMG SRC="images/content.gif" ALT="[Contents]" BORDER="0"></A> 
<IMG SRC="images/dindex.gif" ALT="[Index]">
<IMG SRC="images/dhelp.gif" ALT="[Help]">
<A HREF="art2.html"><IMG SRC="images/prev.gif" ALT="[Browse &lt;]" BORDER="0"></A> 
<A HREF="art4.html"><IMG SRC="images/next.gif" ALT="[Browse &gt;]" BORDER="0"></A> 
<HR><PRE><FONT SIZE="+1">

Por Toni Pomar

Tarjeta Graffiti

Esta inforción fue sacada de http://web.jet.es/~<A HREF="art1.html">Amigatek</A> /


Esta  tarjeta  incorpora modos de pantalla de 256 colores (de una paleta de
262.144 colores), en formato interno 'chunky', a cualquier modelo de Amiga.
Sobre  chips  OCS/ECS la resolución máxima es de 384x576 pixels y sobre AGA
es  de  768x576  pixels.  Al ser modos en formato chunky esto posibilita la
creacion   de  juegos  de  textura  mapeada,  al  estilo  DOOM,  o  mostrar
animaciones  tipo AVI/FLI/QuickTime sin necesidad de convertirlas en tiempo
real  a la estructura de bitplanos del Amiga.  Tambien facilita enormemente
la  emulación  de  otros sistemas que originalmente usan gráficos 'chunky',
como es el caso de Apple Macintosh.

La  tarjeta  es  un  dispositivo  externo, que se conecta al puerto RGB del
ordenador  e  incorpora  una  salida  RGB para el monitor (la tarjeta 'deja
pasar'  la  señal  original  del  Amiga  cuando  esta inactiva).  Se activa
automáticmente  por  soft.   Los modos añadidos por la tarjeta son del tipo
PAL/NTSC/Euro36,  por  lo  que es necesario un monitor capaz de mostrar ese
tipo de modos (de 15KHz) como el C= 1084 o Amiga 1438S Multisync.

Un  ejemplo  de  soft  que  ya soporta la Graffiti es el Nemac IV, un juego
shareware tipo DOOM que esta disponible en Aminet.

La  tarjeta incluye un driver para el emulador shareware de Apple Macintosh
'Shapeshifter',   disponible  en  Aminet.   Además,  soft  para  visualizar
gráficos  a  256  colores  sobre  cualquier  modelo de Amiga.  En un futuro
próximo  habrá  disponible  un  player de animaciones FLI/AVI, y ya se esta
adaptando el nuevo software Emplant 1200 para usar la Graffiti.

¿CHUNKY? ¿Y ESO QUE ES?

Antes  de  analizar  la  Graffiti  es  necesario explicar el por que de esa
tarjeta,  ya que su objetivo es 'simplemente' añadir modos de pantalla tipo
'chunky' de 256 colores a nuestro querido Amiga.

Desde  siempre  los gráficos del Amiga han sido almacenados y procesados en
forma  de  bitplanos.   Esto significa que, por ejemplo, una pantalla de 32
colores  (5  bits  por  pixel)  esta  formada  por  5 bitplanos, o 'capas',
conteniendo  cada una el bit correspondiente de todos los pixels que forman
la  pantalla  (el bitplano 0 contiene el primer bit de todos los pixels, el
bitplano 1 contiene el segundo bit de todos los pixels, y asi...).

En  el  otro  lado están los gráficos llamados 'chunky', que son los usados
por  el  Macintosh  y el PC en sus modos de 256 colores.  En este modo cada
pixel de la pantalla es representado por un byte en la memoria (se le llama
'chunky'  por  que todos los bits que representan el pixel estan en un solo
'chunk', o bloque, que es un byte).

Cada  uno  de  los  sistemas  tiene  sus  ventajas  y  sus  inconvenientes,
dependiendo  de  lo  que quieras hacer.  Lo mejor, sin duda, es disponer de
ambos sistemas, y usar el mas conveniente en cada caso.  Con la Graffiti se
consigue precisamente esto.

¿POR QUE EL AMIGA NECESITA MODOS 'CHUNKY'?

Hasta no hace mucho los gráficos de bitplanos eran perfectos para todo tipo
de  juegos,  pero  en  los  últimos  tiempos,  cuando  la  potencia  de los
procesadores  ha  ido  aumentando  lo  suficiente, han aparecido los juegos
'mapeados', que usan objetos tridimensionales con texturas en su superficie
(estilo  DOOM  y algunos simuladores de vuelo).  Debido al tipo de cálculos
necesarios  para  representar  estos  objetos  es  mucho mas conveniente la
estructura  'chunky',  en  la que para modificar un pixel de 256 colores se
accede  una  sola  vez a memoria (al byte correspondiente), mientras que en
los bitplanos se debe acceder 8 veces a memoria (para modificar cada uno de
los bits separados de ese pixel).

Se  han  intentado  varias soluciones para implementar este tipo de juegos,
convirtiendo en tiempo real la pantalla completa chunky a bitplanos para su
representación  (el excelente Breathless es un ejemplo), o usando el copper
para  crear  una  pantalla chunky real de 4096 colores (Gloom y Alien Breed
3D).   Pero el primer caso exige bastante potencia de proceso (en base a lo
que  es  el  standard de potencia en Amiga) y el segundo caso está bastante
limitado  en  cuanto a la resolución maxima disponible (bastante baja, como
se  ve  en  los dos juegos mencionados).  De todas formas, ninguno de estos
intentos  son  desdeñables  en absoluto.  Al contrario, el mérito por haber
conseguido estos resultados es extraordinario.

La  Graffiti  representa  la  solución  hardware a este problema, ya que la
pantalla en memoria CHIP es una pantalla chunky real, de 256 colores de una
paleta  de 262.144 colores, con lo que la resolución máxima posible aumenta
bastante  respecto  a  la  copper-screen (768 pixels en AGA y 384 pixels en
OCS/ECS)  y  no  exige  tanta potencia por parte del procesador como en las
conversiones por software.

¿QUE HACE LA GRAFFITI?

Las características generales de la Graffiti son:

- funciona con todos los modelos de Amiga.

- 256 colores de una paleta de 262.144.

- imagen de baja resolución en Amigas OCS/ECS, y de alta resolución en
  Amigas AGA. Se puede usar además Overscan e interlace.

- soporta overscan e interlace

- trabaja a 15kHz (modos PAL, NTSC y Euro36)

- simplemente se conecta en el puerto RGB del ordenador.
  No necesita abrir el ordenador.

- gráficos chunky para animación rápida, juegos de texturas mapeadas...

- los programadores solo tienen que usar modos de 4 bitplanos, por lo
  que el ancho de banda disponible es de 7Mb/seg sobre AGA.

- gráficos mas rápidos reduciendo la resolución.  La Grafitti es capaz
  de generar resoluciones de 160 y 80 pixels por linea por hardware,
  sin que el procesador/blitter tenga que doblar los pixels.

- usa memoria CHIP para almacenar la imagen, o sea que no contiene
  ningún tipo de memoria (es por esto que es tan barato), y se puede
  usar el blitter del Amiga para manipular los graficos chunky.

- precio de venta público de 14.750 pts (precio recomendado).

- software:

  + driver externo de video para shapeshifter (incluido con la tarjeta)
  + IFF/GIF/JPEG viewers
  + AVI Video player
  + juegos tipo DOOM
  + Graffiti support CD editado cada 3 o 6 meses, por unas 850 pesetas.

AL GRANO

La  Graffiti recibida no es el último modelo, ya que debido al conflicto de
la zona de Taiwan ha habido problemas de suministro de componentes, pero la
producción 'en masa' se ha reanudado ya.

La  tarjeta  consiste  en una cajita alargada, con una entrada y una salida
RGB,  que  se  coloca entre el puerto RGB de cualquier modelo de Amiga y el
cable del monitor.

Con  el aparato se incluye un manual de usuario y un manual de programación
(¡en  castellano!),  ademas  de  un  disco  con el programa para visualizar
graficos  IFF 256 colores en cualquier Amiga y los drivers del Shapeshifter
(el emulador shareware de Macintosh).

Una vez conectado el aparato (poniendo los dos dip-switch del aparato en la
posición  correspondiente  al  chipset  que  tienes),  podemos  ver  que la
Graffiti,  cuando  no  está  activa (se activa por software), deja pasar la
señal  del  puerto  RGB  hacia  el  monitor,  sin  ninguna  restricción  de
resolución  o  frecuencia,  con  lo que no molesta en absoluto.  En caso de
algún  problema,  seguramente  indica  que  hay un cable alargador entre el
ordenador  y la Graffiti, y que éste es demasiado largo.  El cable debe ser
lo  mas  corto  posible,  y debe contener todas las señales del puerto RGB.
Bueno, se puede eliminar del cable la señal C1 (pin 15 del puerto RGB) para
evitar el ´famoso´ problema de las barras verticales, ya que la Graffiti no
necesita esta señal.

Para comprobar que funciona usamos el programa para mostrar gráficos en 256
colores.   La  calidad  de  la imagen es bastante buena, sobre todo para un
dispositivo de bajo precio, y el hecho de poder ver gráficos de 256 colores
en un simple A500 es realmente interesante.

Tras  esto  probamos  los  drivers  del  Shapeshifter.   Una vez elegido el
adecuado  para  nuestra  maquina  (los hay para varios tipos de procesador,
con/sin  MMU, y segun la memoria disponible) lo instalamos.  En pricipio la
velocidad  de  refresco  de  la  imagen  crece  notablemente respecto a los
anteriores  drivers,  que  hacian el refresco de pantalla con la conversión
por procesador de la pantala chunky del Macintosh a bitplanos de Amiga.

Sin  duda  los  mejores  drivers  son  los  030MMU y 040MMU, con los que la
velocidad de refresco a 256 colores es muy similar a la del modo monocromo.
Que yo sepa, es la primera vez que la MMU me sirve para acelerar algo ;-)

Con  el  030MMU,  sobre  un  68030/42MHz,  el  emulador  se convierte en un
Macintosh real.  He probado el Netscape de Mac, el DOOM y el Dark Forces, y
funcionaban  bastante  bien  (aunque  estos  dos  ultimos  juegos  son  muy
exigentes  en  cuanto  a  memoria  y  potencia necesaria, incluso en un Mac
real).

Por  último  probamos el único juego que utiliza la Graffiti:  el Nemac IV,
un  clon  de DOOM.  Este juego está en versión Beta disponible en Aminet, y
puede  jugarse  en  256  colores,  con  la Graffiti, en cualquier modelo de
Amiga.

La  suavidad  de  movimiento mejora notablemente, pudiendo jugar a pantalla
completa  en resolución 2x1 en el 68030/42MHz, y a resolución 1x1 a 256x190
pixels (en ambos casos con todas las texturas activadas).

PROBLEMAS

El  único problema a nivel hardware es la falta de la señal de 12 voltios a
la  salida  de  la  Graffiti.   Esto  significa que el modulador C= A520 no
funcionará por falta de corriente.  El fabricante nos enviará un esquema de
como  modificar el aparato para que funcionen correctamente los moduladores
para TV.

Esto  no afecta en absoluto a los poseedores de monitores o televisores con
euroconector RGB.

Otro  problema  es  de  tipo  físico.   En  el  A1200  el conector de video
compuesto  esta demasiado cerca del puerto RGB, dejando apenas espacio para
un  conector  simple  DB-23  con  carcasa  sin bloquear el conector de vido
compuesto.   Por  esto,  con  la  Graffiti  conectada  al puerto RGB es muy
dificil conectar algo a la salida de video compuesto del A1200.

En  lo  que respecta al software, los programas en general tienen problemas
de  visualización cuando el usuario ha movido las preferencias del Overscan
del  sistema.  A nivel tecnico, la Graffiti necesita que el borde izquierdo
se  encuentre  en una posición precisa para poder recoger correctamente los
datos  de  la  memoria  CHIP y representarlos.  Esto es facil de solucionar
simplemente  desplazando  las  preferencias  del  overscan  o  moviendo  la
pantalla  del programa con el ratón (pulsando con el ratón en la pantalla a
la  vez  que  se pulsa la tecla Amiga izquierda) hasta que la visualización
sea  correcta.   Estos  problemas  se deben a que los programas no leen las
preferencias del sistema para calcular la posicion correcta de la pantalla.

Además, los drivers de Macintosh muestran incorrectamente la linea superior
de la pantalla, aunque eso no afecta en absoluto a su funcionamiento.

De  todas  formas,  el  software  irá  mejorando  con el tiempo, con lo que
desaparecerán completamente todos estos problemas.

CONCLUSION

Este  aparato  viene a llenar, por un precio razonable, el vacio dejado por
los  diseñadores  de  los  chips OCS/ECS/AGA, que no incluyeron ningun modo
tipo chunky en ellos.

Con  este dispositivo ya estamos en perfectas condiciones para poder portar
juegos  tipo  DOOM  o Dark Forces a nuestro querido Amiga, igual que se han
portado  al  mundo  Macintosh,  sin  grandes  modificaciones  en el codigo.
Además,  se  facilita la emulación de otras plataformas (como el Macintosh,
el  PC y entornos X-Window) y algunos tratamientos de imagenes (¿que tal un
driver para el Photogenics?).

Por  mi parte, pienso dejar este dispositivo permanentemente conectado a mi
ordenador, y ya estoy probando algunos experimentos de programación.

Hala, me voy a seguir disfrutando de mi nuevo 'juguete' :-)

FICHEROS

Aqui  puedes  bajarte  ficheros  interesantes relacionados con la Graffiti.
Algunos  son  programas de demostración, que no se ven correctamente sin la
Graffiti,  pero  aun asi vale la pena probarlos para hacerse una idea de la
velocidad que se puede conseguir con la tarjeta:

 * Torus.lha (10kb)Un 'donut' en Gouraud a resolución 1x1.

 * Shuttle.lha (16kb)El Columbia en Gouraud a resolución 1x1.

 * Graffiti_prog.lha  (6kb)Manual  de  programación  de  la  graffiti,  en
   castellano.

 * How2CodeGraffiti.lha (187kb)Ejemplos de programación de la Graffiti
   (comentarios en alemán).

©1996 Toni Pomar

Para contactar con <A HREF="art1.html">Amigatek</A>  lo podeis hacer:
Por FAX:    +34-71-702887
Por E-MAIL: amigatek@jet.es

                          =-----------------------=
 -------------------------| <A HREF="noticias.html">Noticias y Articulos</A>  |-------------------------
                          =-----------------------=
</FONT></PRE><HR>
Converted on 18 Feb 1997 with RexxDoesAmigaGuide2HTML 2.1 by <A HREF="http://www.sbox.tu-graz.ac.at/home/rmike">Michael Ranner</A> .</P>
</BODY>
</HTML>
