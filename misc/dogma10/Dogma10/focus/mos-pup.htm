<html>
<!-- created on Pegasos I/600Mhz ATI Radeon 9200SE 128Mb 40GB Nec Combo -->
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<meta http-equiv="content-language" content="ru">
<meta name="robots" content="index,follow">
<meta name="keywords" content="amiga, poweramiga, амига, dogma, догма, magazine, e-zine, журнал, электронный журнал, amif1team, akuji, vinnny, russia, ukraine, amigaone, pegasos, amigaos, morphos, motorola, powerpc, g3, g4, a1200, a4000, cd32, workbench, opus, back to the future, back for the future">
<meta name="description" content="Догма - русскоязычное переодическое интернет издание посвящённое компьютерной платформе Amiga/Pegasos. Until the End of Time!">
<meta name="author" content="amif1team/team Dogma">
<meta name="copyright" content="Copyright © 2002-2006">
<title>Догма - электронное Амижное издание</title>
</head>
<body bgcolor="black">

<script language = "JavaScript">
function newImage(ImageIndex, NewButton)
{
NewButton = "../gfx/" + NewButton+".png"
document.images[ImageIndex].src = NewButton
return;
}
</script>

<table align="center" width="625" border="0" cellspacing="0" cellpadding="0" bgcolor="#eeeeee">

<tr height="92">
<td width="625"><a href="http://www.dogma.org.ua/"><img src="../gfx/up.png" width="625" height="92" border="0" alt="Догма - электронное Амижное издание"></a></td>
</tr>

<table align="center" width="625" border="0" cellspacing="0" cellpadding="0" bgcolor="white">

<tr height="26">

<td width="63"><a href="../about/index.html" onmouseover="newImage(1, '1a')" onmouseout="newImage(1, '1')"><img src="../gfx/1.png" alt="Колонка редакции" width="63" height="26" border="0"></a></td>

<td width="53"><a href="../news/index.html" onmouseover="newImage(2, '2a')" onmouseout="newImage(2, '2')"><img src="../gfx/2.png" alt="Амижные новости" width="53" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="38"><a href="../interview/index.html" onmouseover="newImage(3, '3a')" onmouseout="newImage(3, '3')"><img src="../gfx/3.png" alt="Наши гости" width="38" height="26" border="0" valign="top"></a></td>

<td width="56"><a href="../history/index.html" onmouseover="newImage(4, '4a')" onmouseout="newImage(4, '4')"><img src="../gfx/4.png" alt="Хроника событий" width="56" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="55"><a href="../focus/index.html" onmouseover="newImage(5, '5a')" onmouseout="newImage(5, '5')"><img src="../gfx/5.png" alt="В фокусе" width="55" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="57"><a href="../exclusive/index.html" onmouseover="newImage(6, '6a')" onmouseout="newImage(6, '6')"><img src="../gfx/6.png" alt="Xклюзив" width="57" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="57"><a href="../utilities/index.html" onmouseover="newImage(7, '7a')" onmouseout="newImage(7, '7')"><img src="../gfx/7.png" alt="Программы и утилиты" width="57" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="58"><a href="../games/index.html" onmouseover="newImage(8, '8a')" onmouseout="newImage(8, '8')"><img src="../gfx/8.png" alt="Игротека" width="58" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="50"><a href="../download/index.html" onmouseover="newImage(9, '9a')" onmouseout="newImage(9, '9')"><img src="../gfx/9.png" alt="Download" width="50" height="26" hspace="0" vspace="0" border="0" align="top"></a></td>

<td width="138"><img src="../gfx/10.png" alt="" width="138" height="26" hspace="0" vspace="0" border="0" align="top"></td>

</tr>
</table>

<table align="center" width="625" border="0" cellspacing="0" cellpadding="0" bgcolor="white">
<tr>

<td bgcolor="#FFFFFF" width="75%" valign="top">

<table align="right" width="100%" border="1" cellspacing="0" cellpadding="0" bgcolor="#999999">
<tr>
<td bgcolor="#ffffff" valign="top">
<table width="100%" border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
<tr bgcolor="#FFFFFF">
<td rowspan="2" valign="top" bgcolor="#eeeeee" align="center" width="5%" background="../gfx/b.png"><img src="../gfx/icons/mos.png" vspace="5" hspace="5" width="48" height="48" border="0" alt=""><br>
</td>
<td colspan="2" bgcolor="grey" background="../gfx/b.png"><b><font color="yellow" size="3">

&nbsp;&nbsp;MorphOS на классической Амиге

</font></b></td></tr>
<tr bgcolor="#FFFFFF">
<td colspan="2" bgcolor="#f7f7f7"><font size="2">

&nbsp;&nbsp;<b>Автор</b> <i>-= / Vinnny / =-</i> © 01/2006</font></td>

</tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="8" bgcolor="#eeeeee"><tr bgcolor="#FFFFFF" background="../gfx/back0.jpg">
<td colspan="3"><font size="2">

<h3 align=center><b><font color="maroon">Введение.</font></b></h3>

<p>В конце августа 2005 года у владельцев классических Амиг, оснащённых
PowerPC-акселераторами, появилась возможность бесплатно скачать и
пользоваться свежей версией операционной системы MorphOS.  В этой статье
будет рассмотрена инсталляция этой системы, доступные возможности, и
решение возникающих подводных камней.</p>

<p>Тестовые конфигурации:
<ul><li> Amiga1200, BlizzardPPC 175MHz, BVision, 64MB Ram, FastATA.
<li> Amiga1200, BlizzardPPC+ 224MHz, G-Rex, Voodoo3 3000, 128MB Ram.</ul></p>

<h3 align=center><b><font color="maroon">Минимальная конфигурация.</font></b></h3>

<p>Во-первых, вам потребуется акселератор на базе PowerPC-процессора 603
или 604 от Phase5 или DCE.  Для Amiga3000 и Amiga4000 это будет акселератор
CyberStormPPC, а для Amiga1200 соответственно BlizzardPPC.  MorphOS
работает только на PPC-процессоре, поэтому какой на акселераторе будет
стоять 68k-процессор - без разницы.  Всё равно все 68k-приложения будут
работать через JIT-эмуляцию под управлением PPC-процессора.</p>

<p>Во-вторых, вы должны знать, что MorphOS потребует видео-карту, а
стандартный видео-чипсет Амиги (ECS/AGA) не будет задействован.  Поддержаны
следующие видео-карты:
<ul><li> BVisionPPC
<li> CybervisionPPC
<li> Permedia2
<li> Voodoo 2/3/4/5
<li> SiS6323
<li> SiS305</ul>
PCI-видяхи (Permedia2, Voodoo, SiS) поддержаны в MorphOS только через
PCI-мост G-Rex. 3D-драйвера из них написаны только для Voodoo-карт.</p>

<p>Из дисковых интерфейсов поддержана как внутренняя родная IDE-шина Амиги,
так и SCSI-интерфейсы на базе чипов Symbios 770 (CyberstormPPC) и Symbios
710 (BlizzardPPC, A4091, A4000T).  Если у вас есть FastATA, то только
первый канал на нём будет работать.</p>

<p>И наконец затронем критерии по свободной памяти.  MorphOS в памяти
занимает примерно около 25MB.  То есть на вашем акселераторе должно стоять
хотя бы 64MB памяти, а то и больше, если вы хотите комфортной работы.</p>

<center><a href="../gfx/mos-pup/mos_pup1.jpg" target="_blank"><img src="../gfx/mos-pup/mos_pup1.jpg" alt="MorphOS PowerUP" width="412" height="286" border=0></a></center>

<h3 align=center><b><font color="maroon">Инсталляция.</font></b></h3>

<p>Не забудьте сначала скачать ISO-образ операционной системы с
официального сайта <a href="http://powerup.morphos-team.net/">powerup.morphos-team.net</a>, на котором описана
процедура запуска MorphOS прямо с компакт-диска.  Это довольно подходящий
вариант для подготовки и форматирования винчестера под MorphOS.  Мы же
далее будем исходить из того, что у вас уже есть установленная AmigaOS,
попробуем установить MorphOS на тот же винчестер.  В любом случае процедуры
подготовки и инсталляции не сильно отличаются друг от друга, какой бы
вариант вы не выбрали.</p>

<p>Раз уже ваша любимая AmigaOS уже запущена, то теперь надо выделить
раздел на винчестере под будущую MorphOS.  Для этого запускаем утилиту
HDToolBox, или SCSIConfig (если вы загрузились с компакт-диска MorphOS).
Создайте FFS-раздел с приоритетом, отличающимся от AmigaOS-раздела.
Внимание, настоятельно рекомендуем использовать FFS-систему версии 45 (и
выше) во избежание проблем с загрузкой MorphOS!  Кстати, для создания новых
разделов по большому счёту лучше вообще загрузиться с дискетки Install (из
комплекта Workbench 3.1).</p>

<p>Позже, в "Early Startup" вы сможете выбрать с какой операционной системы
хотите стартовать.  Помните, что при наличии IDE-контроллера FastATA только
его первый канал будет виден под MorphOS, соответственно не создавайте
MorphOS-разделы на винчестере, подключенному ко второму каналу.  :-)</p>

<p>После создания раздела на винчестере, отформатируйте его.  Теперь пора
взяться за тот ISO-образ операционной системы, который вы скачали с
официального сайта.  Первым делом извлекаем его из LHA-архива.  Далее
выбираете любой путь на выбор:
<ul><li> Записываете ISO-образ на компакт-диск.
<li> Монтируете ISO-образ как устройство, например, с помощью утилиты MountISO с Аминета.</ul>

Теперь целиком переписываем всё с ISO-образа на свой только что
отформатированный раздел винчестера.  Это можно сделать или с помощью
какого-нибудь файлового менеджера, или shell-командой "<b>copy cd0:  dh1:
all</b>".</p>

<p>Вы должны знать, что MorphOS физически не нуждается в амижном ПЗУ
(кикстарте), и не производит обращений к нему.  Однако, если вы хотите
пользоваться некоторой периферией, зависящей от кода, расположенного в ПЗУ
(например, дисковод через trackdisk.device, или поддержка Paula-звука через
audio.device), то этот кикстарт всё же потребуется.  Следует отметить, что
звук тем не менее может работать через AHI без кикстарта.</p>

<p>Чтобы получить файл с образом кикстарта вам потребуется утилита,
подобная Transrom, которая поставляется вместе с эмулятором UAE.  В
принципе на Аминете достаточно других утилит, выполняющих эту же функцию.
Запускаем Transrom следующей командой "<b>transrom &gt;ROM3.1</b>", и
получаем файл ROM3.1 в текущем каталоге, который потом нужно скопировать в
"Devs" на ваш раздел с MorphOS.</p>

<p>Последнее, что осталось сделать перед запуском MorphOS - нужно
отредактировать текстовый файл "s/startup-sequence" из состава MorphOS.
Внимание!  Используйте только тот текстовый редактор, который умеет
редактировать длинные строки!  Попробуйте EditPad из комплекта AmigaOS 3.9,
или CygnusED.  Строка запуска MorphOS действительно очень длинная, и
недопустимо, чтобы она была порезана на несколько строк.  Итак, вот этот
текстовый файл:</p>

<table border="1" bgcolor="#c0c0c0" width="100%"><tr><td><font color="#000000" size="-1">
;<br>
; This is the MorphOS loader startup-sequence. If you set the MorphOS partition<br>
; as bootable, this file would cause MorphOS to get loaded on boot automaticly.<br>
;<br>
; By default MorphOS boots without using the ROM contents of your Amiga.<br>
; If you wish to make it use the kickstart contents (to be able to use<br>
; trackdisk.device for example) please follow those steps:<br>
;<br>
; 1) Check if you have a correct kickstart file:<br>
; The Kickstart version required are:<br>
; Amiga4000/4000T/3000 - 40.68 or 40.70<br>
; Amiga1200 - 40.68<br>
; Is is advised that you use the unpatched ROM files<br>
;<br>
; 2) Move or delete fakerom.elf from boot/extmoudles<br>
;<br>
; 3) Change the kickstart variable, remember to tune the file path<br>
<br>
;set kickstart "kickstart=Devs:ROM3.1"<br>
set kickstart "nokickstart"<br>
<br>
; Bootdevice can be used to specify the MorphOS partition if you have more<br>
; than one bootable partition and the MorphOS one doesn't have the highest<br>
; boot priority. Remember to use partition names, not volume names!<br>
; This option requires the 'bootdevice' keyword like in the example below:<br>
; set bootdevice "bootdevice=DH1"<br>
; Leave the var blank if you want to boot from the default boot partition!<br>
<br>
set bootdevice ""<br>
<br>
; The resetlevel and delay variables are there for you to tweak if MorphOS<br>
; startup doesn't reboot the machine properly after loading MorphOS files.<br>
;<br>
; The possible resetlevel values are:<br>
; 0 exec/coldreboot (System Reboot)<br>
; 1 MMU switch off + normal reset in chipram (default)<br>
; 2 MMU switch off + double reset in chipram<br>
; 3 MMU switch off + Cyberstorm HW Reset in chipram<br>
; 4 for (;;);..waiting for manual reset by your hands:-)<br>
; 5 MMU switch off + normal reset in fastram<br>
; 6 MMU switch off + double reset in fastram<br>
; 7 MMU switch off + Cyberstorm HW Reset in fastram<br>
<br>
set resetlevel 1<br>
set delay 1<br>
<br>
; Load the MorphOS loader!<br>
<br>
cd sys:boot<br>
startup hal=roms/hal.com1 kernel=roms/kernel.com1 abox=roms/abox2.com1 module=roms/module.com1 resetlevel=$resetlevel ramdebug verbose debug EDebugFlags="NoLogServer NoLogWindow" sumkick disableled delay=$delay extmodules=extmodules/#? $bootdevice $kickstart >NIL:
</font></td></tr></table>

<p><ul>
<li> Если вы сделали копию кикстарта, и хотите его использовать, то
измените строку "set kickstart" (строка, начинающаяся с символа ";"
считается комментарием), прописав нужный путь, а также переименуйте файл
"fakerom.elf", расположенный в "boot/extmodules/", дав ему любое другое
имя.

<li> Если MorphOS-раздел винчестера не играет роль раздела, запускающего
операционную систему на компьютере (например из-за более низкого приоритета
раздела), то пропишите в строке "set bootdevice" необходимые параметры.
Здесь нужно указать имя раздела, которое вы ввели при разбивке в HDToolBox,
а не название раздела, которое вы задали при форматировании.

<li> Осталось задать параметр resetlevel.  Если у вас Amiga1200, то можете
оставить "1" по умолчанию.  Если же у вас Amiga4000, то очевидно нужно
задать величину "5".  Кстати, "5" вроде бы работает и на Amiga1200.</ul>

Осталось сделать несколько мелочей.  Во-первых, зажечь свечку и молиться
несколько минут на протяжении всего процесса загрузки операционной системы.
:-) Обеспечьте "холодный" пуск компьютеру, чтобы в памяти не было никаких
резидентных программ, в особенности утилиты "softkick", а также не нужно
использовать "blizkick".  Проще всего выключите компьютер на полминуты, или
в течение этого же времени удерживайте нажатыми клавиши LAmiga+RAmiga+Ctrl
(оба варианта полностью очистят память вашей Амиги).  Далее, если
MorphOS-раздел у вас не является запускным по умолчанию, то зайдите в
"Early Startup" (удерживая нажатыми обе кнопки мыши при сбросе компьютера),
и выберите MorphOS-раздел для старта.  Если всё идёт как запланировали
разработчики, то ваша Амига должна несколько секунд "пилить" жёсткий диск
(запуск MorphOS-загрузчика в 68k-режиме), сбросить компьютер, и наконец
начать загружать MorphOS.  Если этот процесс на несколько минут остановился
с чёрным экраном, или с бабочкой, значит у вас какие-то проблемы (без
шуток)!</p>

<p>Этот симптом может вызывать немало причин.  Например, MorphOS довольно
капризно работает с некоторой IDE-периферией.  Во время тестов FastATA для
этой статьи, никак не хотел идентифицироваться винчестер Quantum Fireball
1GB, на котором лежала MorphOS.  Проблема была в CD-приводе (Philips
CDD3610), который висел на этом же канале IDE-шины, хотя оба устройства
прекрасно дружили под AmigaOS 3.9.  Присутствие жёсткого диска на втором
IDE-канале также мешало старту MorphOS.  На SCSI вроде проблем должно быть
меньше.  Хотя если вы с ними столкнулись, то советуем отсоединить все
устройства, кроме того, на котором находится MorphOS.  Не рекомендуем также
оставлять компакт-диски, вставленные в CD-приводы.  Наличие интерфейса мыши
MRooCheck также может помешать запуску системы.</p>

<p>Если во время запуска система просит вас вставить диск "ENV:", значит вы
всё же не послушали совета, и разорвали строку "startup" в файле
"startup-sequence" на несколько строк.</p>

<p>Если проблема не в этом, и у вас по-прежнему чёрный экран во время
загрузки операционной системы, попробуйте следующий вариант:
<ul><li>Поместить в начале файла "startup-sequence" строку "echo toto" (таким образом вы увидите консольное окно при запуске системы).
<li> Между строками "cd sys:boot" и "startup" вставить строку "debugramdump 1".
<li> Закомментировать вашу строку "startup" (то есть добавить перед ней символ ";"), и написать вместо неё следующую строку:

<br><table border="1" bgcolor="#c0c0c0" width="100%"><tr><td><font color="#000000" size="-1">
=========================================================<br>
startup hal=roms/hal.com1 kernel=roms/kernel.com1 abox=roms/abox2.com1 module=roms/module.com1 resetlevel=$resetlevel ramdebug verbose debug HDebugFlags="Init Log" QDebugFlags="Init EmulMapping" EDebugFlags="Init InitResident NoLogServer Log LoadSeg PCI" sumkick disableled delay=$delay extmodules=extmodules/#? $bootdevice $kickstart<br>
=========================================================
</font></td></tr></table>
Не забывайте, что всё это должно уместиться в одной строке.</ul></p>

<p>Это поможет вам разобраться в безрезультатных попытках запуска MorphOS.
При этом будет создан файл "Boot", содержащий всю отладочную информацию,
которой вы сможете поделиться с MorphOS-разработчиками, или друзьями,
которых вы считаете настоящими гуру.</p>

<p>Если же вы желаете получить отладочную информацию в последовательный
порт, то уберите параметр "ramdebug".  По умолчанию порт открывается на
115000 бод, которые не поддерживает последовательный порт классической
Амиги.  Поставьте, например, 9600 бод.  О конкретных параметрах и
аргументах вы можете узнать, запустив вручную файл "startup ?" (в каталоге
"boot" на MorphOS-разделе).</p>

<center><a href="../gfx/mos-pup/mos_pup2.jpg" target="_blank"><img src="../gfx/mos-pup/mos_pup2.jpg" alt="MorphOS PowerUP" width="412" height="284" border=0></a></center>

<h3 align=center><b><font color="maroon">Поддержанные устройства.</font></b></h3>

<p>Помимо карт, описанных в разделе "Минимальная конфигурация", должны функционировать и следующие:

<ul><li> Некоторые версии звуковой карты Delfina с последними драйверами, хотя будет частично задействована 68k-эмуляция, которая в пике нагрузки может скушать до 50% мощности процессора.
<li> Звуковые PCI-карты, основанные на чипе ForteMedia FM801 (через G-Rex 1200), нативно поддержаны в OpenPCI v2.
<li> E3B-карты полностью поддержаны. Драйверы можно найти в пакете <a href="http://www.platon42.de/">Poseidon</a>.
<li> Все PCI-карты, поддержанные в AmigaOS 3.x на G-Rex через OpenPCI+OpenUSB.
<li> NE2000-совместимые PCMCIA-сетевые карты с нативным драйвером CNet.device.
<li> Сетевые карты на чипе RTL8139 с нативным драйвером rtl_8139pci.device.
<li> Сетевые карты, поддержанные в OpenPCI.</ul>

<b>Примечание</b>:  Проверьте прошивку вашего PPC-акселератора, Bios G-Rex
v2.2 рекомендован для поддержки OpenPCI и "более лучшего" управления
картами BVision и CVision.</p>

<p>Для остального железа пробуйте использовать 68k-драйверы, есть шанс что
они будут работать.</p>

<h3 align=center><b><font color="maroon">Бесплатная регистрация.</font></b></h3>

<p>Хотим предупредить, что в обычном режиме пользоваться операционной
системой MorphOS вы сможете только 2 часа, после чего она специально начнёт
тормозить.  Для продолжения работы с полной скоростью бы должны пройти
регистрацию.  Она абсолютно бесплатная, и возможна только через отдельную
утилиту, поставляемую в комплекте с дистрибутивом системы.  А, забыл, вам
ещё понадобится доступ в интернет (например, через Miami, Genesis или
AmiTCP).</p>

<p>После соединения с интернет-провайдером, убедитесь что доступ в интернет
действительно появился (например пропингуйте какой-нибудь сайт, или
залезьте в web-браузере на <a href="http://www.amiga.org.ru/">amiga.org.ru</a>),
запускайте утилиту RegTool, которая лежит в корневом каталоге в
дистрибутиве MorphOS.  Эта программа предложит вам заполнить небольшую
анкету и вписать свой адрес электронной почты, на который вам потом пришлют
ключ активизации MorphOS.</p>

<h3 align=center><b><font color="maroon">Тестирование программного обеспечения.</font></b></h3>

<p>Каких-либо перечней программного обеспечения, работающего под MorphOS,
перечислять здесь нет особого смысла, ибо не хватит места.  :-) Работает
всё, что работает на Pegasos, включая и нативные MorphOS-программы, и
68k-программы, а также написанные для PowerUP/WarpOS и Warp3D.
Единственная разница будет заметна в скорости - примерно в 2 раза
медленнее, чем Pegasos с процессором G3/600MHz.  Таким образом, всё что
ранее говорилось с припиской "только для Pegasos" теперь будет и на вашей
Амиге!</p>

<h3 align=center><b><font color="maroon">Заключение.</font></b></h3>

<p>Это настоящий курс омоложения для классической Амиги, заставляющий
держать своё постепенно стареющее тело в современной форме.  В итоге ваша
Амига сможет выполнять всё, что умеет Pegasos, за исключением может быть
тех задач, которые требуют большей мощности процессора (например, чтение
DVD, или просмотр DivX под MPlayer).  Но ничто не мешает пользоваться
другими разными приятными и полезными программами! Удачи!</p>

По материалам сайта <a href="http://obligement.free.fr/">Obligement</a>.<br>

</td>
</tr>
</table>

<script language="JavaScript" src="../page.js"></script>

</table>
</body>
</html>