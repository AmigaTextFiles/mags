<HTML>
<HEAD>
<TITLE>
Догма - электронное Амижное издание
</TITLE>
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<BODY TEXT="white" bgcolor="black">
</HEAD>
<script language="JavaScript" src="../topalt.js"></script>
<script language="JavaScript" src="../leftalt.js"></script>

<table BACKGROUND="../GFX/fon.jpg" align="center" width="90%" border="0" cellspacing="0" cellpadding="0" bgcolor="black">
<tr>
<td colspan="3"><font color="white">
<CENTER><BR><font size="+1" color="yellow"><b>Модем и кое-что о нём</b></font><BR>
<font size="-1" color="white">Автор -=\<font size="-1" color="yellow">amif1team</font>/=-</font><HR></CENTER>
Для обмена информацией между компьютерами, находящимися на большом расстоянии
друг от друга, пока ещё нужен небольшой блок, называемый модемом. Что у него внутри?
Каким образом он умудряется прокачивать через телефонные каналы мегабайты данных? Ответы
на эти вопросы в этой статье.
<BR><BR>
Прежде всего одно очень важное замечание. Исторически сложилось, что системы телефонной связи
(аппараты, телефонные станции, линии) разрабатывались для передачи на расстояние человеческого
голоса. Вообще говоря, естественные звуки характеризуются переменной высотой тона и непрерывно
изменяющейся интенсивностью. Для передачи по телефонной линии они преобразуются в электрический
сигнал с непрерывно изменяющейся в соответствии с аналогичными характеристиками звука частотой и
силой тока.
<BR><BR>
Такой сигнал называется аналоговым. Компьютер, в отличие от телефонной аппаратуры, использует
электрический ток только двух уровней; каждый из них обозначает одну из двух цифр (двоичной
арифметики?). Чтобы передать цифровой сигнал по телефонной линии, ему нужно придать приемлемый
для нее аналоговый вид. Именно этой работой и занимается модем. Кроме того, он выполняет обратную
процедуру - переводит кодированный аналоговый сигнал в понятный компьютеру цифровой. Слово "модем"
- сокращение от двух других: МОдулятор/ДЕМодулятор. Модем организует мостик между выдаваемым
компьютером цифровым сигналом и аналоговым сигналом, уходящим в линию. При передаче данных
компьютер выдаёт в коммуникационный порт последовательность нулей и единиц, которые могут
представлять собой некоторый текст или программу, или команды модему, или любой другой вид информации.
<BR><BR>
Хотя выполняемые процедуры изменяются в зависимости от скорости работы, основные этапы работы модема
следующие. Первым делом модем принимает данные, поступающие из компьютера, разделяет их на команды
и информацию, которую необходимо передать в линию. Затем полученные команды выполняются, и
нюансы дальнейшей передачи данных зависят от них. Данные, подлежащие передаче, преобразуются в
аналоговый сигнал модулятором модем. Этот сигнал можно слышать через встроенный громкоговоритель
модема как непрерывный шум. Модем передает сигнал двумя различными частотами, причем единицы
в виде сигнала с большей частотой, нули в виде сигнала с меньшей частотой. Другой модем,
находящийся на противоположном конце линии, "слушает" сигнал и демодулирует его обратно в цифровой
сигнал. После того, как это сделано, он посылает информацию в цифровой форме в принимающий
компьютер. В действительности оба компьютер могут одновременно передавать информацию в обе
стороны, потому что они используют определённые соглашения о частотах, различных
для входных и выходных сигналов. Индикаторы на передней панели позволяют получить дополнительную
информацию о том, что творится внутри внешнего модема в данный момент. Она может оказаться полезной,
если вы столкнулись с проблемами при установлении соединения. Расположение индикаторов различно и
зависит от изготовителя модема, однако их обозначения, как правило, представляют собой
двухбуквенные аббревиатуры, одинаковые для различных модемов. Что они обозначают?
<BR><BR>
<font color="yellow">MR (Modem Ready)</font> - показывает, что модем включен и готов к работе. Если этот индикатор не горит,
нужно проверить питание (розетку, кабель, внешний источник питания).
<BR><BR>
<font color="yellow">TR (Terminal Ready)</font> - горит, когда модем обнаруживает сигнал DTR (Datа Terminal Ready), передаваемый
вашим коммуникационным программным обеспечением.
<BR><BR>
<font color="yellow">HS (High Speed)</font> - горит, когда модем работает c максимально возможной для него скоростью.
<BR><BR>
<font color="yellow">CD (CarrierDetect)</font> - горит, когда  ваш модем обнаруживает несущий сигнал, необходимый для
успешного соединения с удаленным компьютером. Он должен гореть на протяжении всего сеанса
связи и гаснуть, лишь когда один из модемов "положит трубку" и несущий сигнал исчезнет.
<BR><BR>
<font color="yellow">AA (Auto Answer)</font> - показывает, что модем включен в режим автоответа, то есть будет сам отвечать
на любые звонки. Когда модем обнаруживает звонок на линии, этот индикатор мерцает.
<BR><BR>
<font color="yellow">OH (Off Hook)</font> - горит, когда модем занимает линию. Эквивалентно снятой трубке телефона.
<BR><BR>
<font color="yellow">RD (Recive Data)</font> - мерцает при приёме компьютером данных из своего модема.
<BR><BR>
<font color="yellow">SD (Send Data)</font> - мигает, когда ваш компьютер передает данные в модем.
<BR><BR>
<font color="yellow">RL (Reliable Link)</font> - такой индикатор присутствует на MNP-модемах. Он означает, что модем договорился
с удаленным модемом о работе в режиме, соответствующем протоколу MNP и в данный момент работает именно так.

<p align="center"><font color="yellow">* * *</font></p>

Сам модем также сообщает содержание S-регистров, код продукта, контрольную сумму и результаты теста (смотри команды  S, I, а также &T).
<BR><BR>
O - после прохождения команды, модем настраивается на режим передачи данных и отвечает CONNECT (если до этого он
находился в командном режиме работы).
<BR><BR>
Sr - управление S-регистрами.
<BR><BR>
Sr? - считывание содержимого S-регистра номера r.
<BR><BR>
Sr=nnn - ввод числового параметр nnn в S-регистр номера r.
<BR><BR>
Все команды модифицируют содержимое одного или более S-регистров. Некоторые S-регистры содержат
временные параметры, которые можно поменять только командой S.
<BR><BR>
Vn - выбор вида ответа модема.
<BR><BR>
   n = 0 ответ цифровым кодом,<BR>
   n = 1 ответ в символьном виде на английском языке.

<p align="center"><font color="yellow">* * *</p>
Стандартный набор ответов модема:</font>
<BR><BR>
OK - Модем выполнил команду
<BR><BR>
CONNECT NNN - Модем подключен со скоростью NNNbps
<BR><BR>
RING  - Модем обнаружил правильный сигнал звонка. Ответ выдается всегда, независимо от режима работы.
<BR><BR>
NO CARRIER - Модем потерял несущую, или не получил ответа от удалённого модема.
<BR><BR>
ERROR - Ошибка в командной строке. Командная строка длиннее 40 символов, или ошибка в контрольной сумме (смотри команду L2).
<BR><BR>
NO DIALTONE - Отсутствие сигнала станции коммутации (смотри команды X2, X4).
<BR><BR>
BUSY - Номер (канал) занят.
<BR><BR>
NO ANSWER - Ответ получается в случае использования в командной строке управляющего символ @ и если
не выполнено условие тишины (см. команду D).

<p align="center"><font color="yellow">* * *</font></p>

Yn - способ отключения модема от линии.<BR>
n = 0 модем отключается обыкновенно (см. команду &D),<BR>
n = 1 модем отключается после получения сигнала из линии.
<BR><BR>
Z - обнуление модема (процессор считывает конфигурацию модема из памяти NOVRAM).
<BR><BR>
+++ - последовательность выхода.
<BR><BR>
Благодаря этой команде можно перейти из режим передачи в командный режим работы модема без
перерыва связи. Команда требует тишины перед и после направления последовательности выхода.
Величина этого времени определена в регистре S12 (обычно 50 = 1s). Десятичную величину знака
ASCII, который является знаком последовательности выхода содержит регистр S2 (обычно 43 т.е. '+').
<BR><BR>
<font color="yellow">Дополнительный набор команд Hayes'a:</font>
<BR><BR>
&Cn - функция сигнала DCD.<BR>
n = 0 сигнал DCD всегда активен,<BR>
n = 1 сигнал DCD существует с момента, когда модем определит несущую.
<BR><BR>
&Dn - функция сигнала DTR в асинхронном режиме работы.<BR>
n = 0 модем игнорирует DTR,<BR>
n = 1 с момента потери DTR модем переходит в командный режим работы,<BR>
n = 2 с момента потери DTR модем прекращает связь, выключает функцию "autoнanswer" и переходит
в командный режим работы,<BR>
n = 3 с момента потери DTR модем автоматически реализует команду ATZ.
<BR><BR>
Модем обнаруживает потерю DTR, если сигнал DTR длится дольше времени, определенного в S-регистре S25.
<BR><BR>
&F - модем считывает свою конфигурацию, записанную в EPROM.
<BR><BR>
&Gn - включение/выключение защитной частоты.<BR>
n = 0 защитная частота выключена,<BR>
n = 1 модем высылает защитную частоту 550 Hz,<BR>
n = 2 модем высылает защитную частоту 1800 Hz.
<BR><BR>
&Ln - вид линии связи.<BR>
n = 0 передача на коммутируемых линиях связи,<BR>
n = 1 передача на постоянных линиях связи.
<BR><BR>
&Mn - режим работы.<BR>
n = 0  синхронный,<BR>
n = 1 для терминалов, которые могут работать как в синхронном, так и в асинхронном режиме работы;
команду набора номера модем передает асинхронно, перед данными синхронно,<BR>
n = 2 с момента появления сигнала DTR, модем набирает номер, записанный командой &Z в памяти NOVRAM,<BR>
n = 3 при неактивном сигнале DTR производится ручной набор номера.
<BR><BR>
После получения соединения, с момента поступления сигнала DTR модем подключается к линии.
<BR><BR>
&Pn - установка импульсного коэффициента.<BR>
n = 0 коэффициент заполнения замыкание/интервал 39/61%,<BR>
n = 1 коэффициент заполнения замыкание/интервал 33/67%.
<BR><BR>
&Rn - управление зависимостей RTS/CTS:<BR>
n = 0 сигнал CTS наступает после сигнала RTS
<BR><BR>
Такой вариант проявляется во время моделирования полудуплексного режима работы. Данные,
появляющиеся до поступления сигнала CTS, игнорируются.
<BR><BR>
n = 1 модем игнорирует RTS, при активном CTS сразу после подключения модема. Во время синхронной передачи
данных (команда &M0) сигнал CTS всегда активен.
<BR><BR>
&Sn - функции сигнала DSR:<BR>
   n = 0 сигнал DSR активен,<BR>
   n = 1 DSR активизируется, после окончания этапа установления связи.
<BR><BR>
&Tn - тесты модема.<BR>
   n = 0 окончание текущего теста,<BR>
   n = 1 - начало местной налоговой петли,<BR>
   n = 2 не используется,<BR>
   n = 3 начало местной цифровой петли,<BR>
   n = 4 модем дает согласие на начало цифровой петли, которую передает удаленный модем,<BR>
   n = 5 модем не дает внешнему устройству согласия,<BR>
   n = 6 начало дистанционной цифровой петли,<BR>
   n = 7 модем генерирует петлю RDL, затем генерирует и передает тестирующий сигнал,<BR>
   n = 8 аналоговая петля, связанная с внутренним тестом.
<BR><BR>
&W - модем читает свою конфигурацию из памяти RAM и записывает её в память NOVRAM.
<BR><BR>
&Z - запись телефонного номера в памяти NOVRAM, (максимум 33 знака).
<BR><BR>
<font color="yellow">Описание S-регистров.</font>
<BR><BR>
Вашему вниманию предлагается описание S-регистров, непосредственно используемых при работе с модемом.
Для описания отдельных S-регистров указано два параметра:
<BR><BR>
Диапазон - обозначает диапазон параметров сохраняемых в S-регистре.
<BR><BR>
Величина - обозначает заводскую величину параметра, записанную в S-регистре фирмой изготовителем.
<BR><BR>
S0 - Количество сигналов звонка<BR>
   Диапазон: 0 - 255<BR>
   Величина: 0
<BR><BR>
Количество сигналов звонка, которого ждёт модем перед ответом - вызов телефонной линии:<BR>
   S0 = 0 автоответ выключен<BR>
   S0 > 0 автоответ включен
<BR><BR>
S1 - Счетчик сигналов звонка (информационный параметр)<BR>
   Диапазон: 0 - 255
<BR><BR>
Содержимое S-регистра увеличивается каждый раз, когда модем получает сигнал звонка из телефонной
линии и по истечении 8s после сигнала ответ сбрасывается.
<BR><BR>
Этот регистр - единственный, исполняющий чисто информационную роль, его содержимое можно только читать.
<BR><BR>
S2 - Символ возврата<BR>
   Диапазон: 0 - 255<BR>
   Величина: 043 (ASCII '+')
<BR><BR>
Содержит десятичный код символа ASCII, который является знаком последовательности
возврата (смотри '+++').
<BR><BR>
В случае, когда S2 > 127 происходит блокировка последовательности возврата.
<BR><BR>
S3 - Символ (CR)<BR>
   Диапазон: 0 - 127<BR>
   Величина: 013
<BR><BR>
Содержит десятичный код символа ASCII, который является знаком (CR).
<BR><BR>
S4 - Символ (LF)<BR>
   Диапазон: 0 - 127<BR>
   Величина: 010
<BR><BR>
Содержит десятичный код символа ASCII, который является знаком новой строки (LF).
<BR><BR>
S5 - Символ (BS)<BR>
   Диапазон: 0 - 32, 127<BR>
   Величина: 008
<BR><BR>
Содержит десятичный код символа ASCII, который является знаком "забой" (backspase) (BS).
<BR><BR>
S6 - Время ожидания заявления станции<BR>
   Диапазон: 2 - 255<BR>
   Величина: 2 s
<BR><BR>
S7 - Ожидание сигнала несущей<BR>
   Диапазон: 1 - 155<BR>
   Величина: 30 s
<BR><BR>
S8 - Время интервала при наборе<BR>
   Диапазон: 0 - 255<BR>
   Величина: 2 s
<BR><BR>
S9 - Время реакции DCD<BR>
   Диапазон: 0 - 255<BR>
   Величина: 5 (x1/10s = 0,6s)
<BR><BR>
Время задержки активизации сигнала DCD вследствие появления несущей.
<BR><BR>
S10 - Задержка разъединения после потери несущей<BR>
   Диапазон: 1 - 255<BR>
   Величина: 14 (x1/10s = 1,4s)
<BR><BR>
S11 - Не используется
<BR><BR>
S12 - Время требуемой тишины для последовательности возврата<BR>
   Диапазон: 20 - 255<BR>
   Величина: 050 (x20ms = 1,0ms)
<BR><BR>
Содержимое регистра определяет в 1/50s время требуемой тишины в передаче перед и после
последовательности возврата (смотри '+++').
<BR><BR>
S13 - Не используется

<p align="center"><font color="yellow">* * *</font></p>

P.S. Здесь приведены только стандартные команды. Модемы разных производителей могут иметь множество
других команд, описание которых следует смотреть в документации к модему.
<BR><BR>
</font></td></tr>
</table>

<script language="JavaScript" src="../downalt.js"></script>
</BODY>
</HTML>
