<HTML>
<HEAD>
<TITLE>MUI Programming
</TITLE>
</HEAD>
<script language="JavaScript">
<!--
function makearray(n) {
    this.length = n;
    for(var i = 1; i <= n; i++)
        this[i] = 0;
    return this;
}
hexa = new makearray(16);
for(var i = 0; i < 10; i++)
    hexa[i] = i;
hexa[10]="a"; hexa[11]="b"; hexa[12]="c";
hexa[13]="d"; hexa[14]="e"; hexa[15]="f";
function hex(i) {
    if (i < 0)
        return "00";
    else if (i > 255)
        return "ff";
    else
        return "" + hexa[Math.floor(i/16)] + hexa[i%16];
}
function setbgColor(r, g, b) {
    var hr = hex(r); var hg = hex(g); var hb = hex(b);
    document.bgColor = "#"+hr+hg+hb;
}
function fade(sr, sg, sb, er, eg, eb, step) {
    for(var i = 0; i <= step; i++) {
        setbgColor(
        Math.floor(sr * ((step-i)/step) + er * (i/step)),
        Math.floor(sg * ((step-i)/step) + eg * (i/step)),
        Math.floor(sb * ((step-i)/step) + eb * (i/step)));
    }
}
/* Usage:
 *   fade(inr,ing,inb, outr,outg,outb, step);
 * example.
 *   fade(0,0,0, 255,255,255, 255);
 * fade from black to white with very slow speed.
 *   fade(255,0,0, 0,0,255, 50);
 *   fade(0xff,0x00,0x00, 0x00,0x00,0xff, 50); // same as above
 * fade from red to blue with fast speed.
 * step 2 is very fast and step 255 is very slow.
 */
function fadein() {
    fade(0,0,0, 255,255,255, 64);
}
function fadeout() {
   fade(255,255,255, 0,0,0, 64);
}
/* do fadein */
fadein();
/***** end fade script *****/
/************************************************************/
// -->
</script>
</Head>
 <SCRIPT LANGUAGE="JavaScript">
<!-- Beginning of JavaScript Applet -------------------
/* Copyright (C)1996 Web Integration Systems, Inc. DBA Websys, Inc.
   All Rights Reserved.
   We will not be held responsible for any unwanted effects due to the 
   usage of this applet or any derivative.  No warrantees for usability 
   for any specific application are given or implied.
   Wazir Shpoon 9/17/96
   Scrolling Text edited by Wazir A. Shpoon For Folger Shakespeare Library
*/
function scrollit_r2l(seed)
{
        var m1 = "Thank you for reading my Editorial";
        var m2 = ".....It is nice to know someone reads this!!!.....";
        var m3 = ".....This site was last updated on 10/10/98......";
        var m4 =  ".....Bookmark this site, as changes are in progress!!!!";
        var m5 =  ".....Contact us for any additional information!!!!";
        var msg=m1+m2+m3+m4+m5;
        var out = " ";
        var c   = 1;
        if (seed > 100) {
                seed--;
                var cmd="scrollit_r2l(" + seed + ")";
                timerTwo=window.setTimeout(cmd,100);
        }
        else if (seed <= 100 && seed > 0) {
                for (c=0 ; c < seed ; c++) {
                        out+=" ";
                }
                out+=msg;
                seed--;
                var cmd="scrollit_r2l(" + seed + ")";
                    window.status=out;
                timerTwo=window.setTimeout(cmd,100);
        }
        else if (seed <= 0) {
                if (-seed < msg.length) {
                        out+=msg.substring(-seed,msg.length);
                        seed--;
                        var cmd="scrollit_r2l(" + seed + ")";
                        window.status=out;
                        timerTwo=window.setTimeout(cmd,100);
                }
                else {
                        window.status=" ";
                        timerTwo=window.setTimeout("scrollit_r2l(100)",75);
                }
        }
}
// -- End of JavaScript code -------------- -->
</SCRIPT>
</base>
<BODY BACKGROUND="marble.GIF">

<H1><B><CENTER><FONT COLOR=#0000FF>A</FONT><FONT COLOR=#0700FC>n</FONT><FONT COLOR=#0E00F9> </FONT><FONT COLOR=#1500F6>I</FONT><FONT COLOR=#1C00F3>n</FONT><FONT COLOR=#2300F0>t</FONT><FONT COLOR=#2A00ED>r</FONT><FONT COLOR=#3100EA>o</FONT><FONT COLOR=#3800E7>d</FONT><FONT COLOR=#3F00E4>u</FONT><FONT COLOR=#4600E1>c</FONT><FONT COLOR=#4D00DE>t</FONT><FONT COLOR=#5400DB>i</FONT><FONT COLOR=#5B00D8>o</FONT><FONT COLOR=#6200D5>n</FONT><FONT COLOR=#6900D2> </FONT><FONT COLOR=#7000CF>t</FONT><FONT COLOR=#7700CC>o</FONT><FONT COLOR=#7E00C9> </FONT><FONT COLOR=#8500C6>M</FONT><FONT COLOR=#8C00C3>U</FONT><FONT COLOR=#9300C0>I</FONT><FONT COLOR=#9A00BD> </FONT><FONT COLOR=#A100BA>P</FONT><FONT COLOR=#A800B7>r</FONT><FONT COLOR=#AF00B4>o</FONT><FONT COLOR=#B600B1>g</FONT><FONT COLOR=#BD00AE>r</FONT><FONT COLOR=#C400AB>a</FONT><FONT COLOR=#CB00A8>m</FONT><FONT COLOR=#D200A5>m</FONT><FONT COLOR=#D900A2>i</FONT><FONT COLOR=#E0009F>n</FONT><FONT COLOR=#E7009C>g</FONT></CENTER></B></H1>

<P>In this tutorial, I hope to explain the basics of MUI programming. I'll be concentrating on C/C++, although what I say can be applied to other languages.

<P>The thing about MUI is that it makes programming interfaces incredibly easy - far easier than the standard AmigaOS way. The hardest part is taking the plunge and deciding you want to learn - after that, you'll find yourself learning at a rapid rate. Later on, you'll come across custom classes, and admittedly, you may be put off by these when you see them, as it makes programming different somewhat to what you may have been used to (they're very object orientated), but nonetheless, I recommend learning MUI over the standard routines for both its power and ease of use.

<P>You're probably familiar with the way MUI works from a user's point of view, and you should bear this in mind when programming.
Every window in an MUI applicaton can be resized, and the interface is resized accordingly. As a programmer, you don't have to worry about this. In fact, designing interfaces is simply a matter of listing the gadgets in turn, and letting MUI lay them out - you certainly don't have to specify individual coordinate positions. This makes designing, and also editing your interfaces
extremely easy.

<P>Another feature of MUI applications is that the user decides what screen to open on, and this screen will be a public one. This means that you shouldn't assume that you are on a particular
screen, and you may be sharing with other programs (indeed, you may be on the Workbench). In particular, you should be careful about using and setting colour indices. You should use the standard routines (ObtainBestPen(), FindColor(), etc) to get the colour you want, or give you an unused pen if there isn't such a colour - but we'll cover this in more detail in a later tutorial.

<P><B>What Do You Need?</B>

<P>You should get hold of the developers' archive for MUI, available on Aminet (and should be on most CoverCDs). Follow the instructions for your chosen language, installing the necessary includes.

<P>Also, in the examples folder is a file 'demo.h'. I found this to be a useful file to have for all MUI programs you wrote, so I copied this to my Includes folder too, and you should do also for
the benefit of this tutorial. I also suggest renaming it to something more descriptive ('mui_header.h' for the purposes of this tutorial).

<P>One thing I had trouble with was using MUI with C++ (with StormC, at least - C mode was fine). If anyone else is having trouble, then do the following. The first concerns the 'demo.h' file I said about. The line:
<CENTER>static VOID fail(APTR app,char *str)</CENTER>
for compatibility with C++ should read:
<CENTER>static VOID  fail(Object *app,char *str)</CENTER>
If you are still having problems, then check out the file mui.h which was installed to Include/libraries/. At the end of the 'Macro' definitions, there's a bit where it says 'Controlling Objects'. Just after that is some code enclosed in '#ifndef __cplusplus' and '#endif'. I have no idea why this should be (can
anyone enlighten me?) I wanted to use the 'get' and 'set' routines in C++, so I just commented out the two said lines, and everything worked fine.

<P>Lastly, some changes are necessary for StormC (both C or C++),
regarding the Register macros. These are defined in 'demo.h', but
not for Storm C. The ones for Storm C are:
<BR>#define REG(x) register __## x
<BR>#define ASM
<BR>#define SAVEDS

<P>Hope that works...

<P><B>Your First MUI Program</B>

<P>Now let's finally look at an MUI program. We'll be using plain
C, so you don't need to worry about the above for now (but you do need to copy 'demo.h' to your Includes folder, and rename it to 'mui_header.h'. The source for this program is under the file <A HREF="mui_dc7tut1.c">'mui_dc7tut1.c'</A>.

<P>Compile it, and you'll see it opens up a window with a few gadgets in it. The source code is commented, so shouldn't be too hard to understand. The key point is that the window is all defined in the bit following on from 'app = ApplicationObject,' -
in fact, you generally define all the windows for an application beforehand, even if they are not initially open.

<P>The code in this section (where the windows are defined) is not 'proper' C code, since it is using macros (defined in Include/libraries/mui.h) to make things even easier. You just lay
out your objects, using things like VGroup, HGroup, Child and ColGroup() to lay out things the way you want them. Note that we have the pointers STR_example and CY_example for pointers to the string and cycle gadgets respectively. Although unused in this example, you would need them if you wanted to refer to the gadgets (read or set the contents, for example).

<P>The initial 'MUIA_Application_' tags just set up some necessary information about your program.

<P><B>Learning More...</B>

<P>The thing about MUI is that you can generally learn by just looking at examples, so be sure to check out all the files in the
Examples folder in the MUI developers' archive, and of course the Autodocs contain all you need to know.

<P>In future tutorials, I'll be looking at the aspects of MUI which aren't too well covered by the documentation then...

<P><B><A HREF="dc7edmh.htm" TARGET="text">Mark Harman</A></B>

</BODY>
</HTML>



