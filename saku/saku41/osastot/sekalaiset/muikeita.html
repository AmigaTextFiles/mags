<!!!!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<title>Sekalaiset</title>
		<meta name="generator" content="Handmade in Finland">
	</head>

	<body bgcolor="white" link="navy" vlink="navy" alink="red" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0">
		<center>
			<a name="top"></a>
			<table border="0" cellspacing="0" cellpadding="12">
				<tr>
					<td><img src="../../framet/grafiikka/bullet.gif" alt="" height="8" width="8" border="0" hspace="6"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><a href="hakemisto.html" target="_self">Sekalaiset</a></font>&nbsp;&nbsp;&nbsp;<img src="../../framet/grafiikka/bullet.gif" alt="" height="8" width="8" border="0" hspace="6"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><a href="../sivukartta.html" target="_self">Sivukartta</a></font></td>
				</tr>
			</table>
			<table width="80%" border="0" cellspacing="1" cellpadding="4" bgcolor="navy">
				<tr>
					<td align="center" bgcolor="navy" width="100%"><font size="3" color="yellow" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>MUIkeita k&auml;ytt&ouml;liittymi&auml;</b></font></td>
				</tr>
				<tr height="15">
					<td align="center" bgcolor="#d8ecfd" width="100%" height="15"><font size="2" color="#000066" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Ilkka Lehtoranta &lt;<a href="mailto:ilkleht@isoveli.org" target="_blank">ilkleht@isoveli.org</a>&gt;</font></td>
				</tr>
			</table>
			<font size="1" face="Trebuchet MS,Verdana,Arial,Helvetica"><br>
			</font>
			<table width="80%" border="0" cellspacing="1" cellpadding="3" bgcolor="navy">
				<tr>
					<td bgcolor="#d8ecfd" width="50%"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><b>Amigalla k&auml;ytt&ouml;liittym&auml;n rakentamisessa on aina ollut monta mutkaa. Alun perin k&auml;ytt&ouml;j&auml;rjestelm&auml; tarjosi vain minimaalisen tuen k&auml;ytt&ouml;liittym&auml;n rakentamiseen, eiv&auml;tk&auml; my&ouml;hemm&auml;t p&auml;ivitykset tuoneet paljon apua. </b></font></td>
				</tr>
			</table>
			<font size="1" face="Trebuchet MS,Verdana,Arial,Helvetica"><br>
			</font>
			<table width="80%" border="0" cellspacing="1" cellpadding="3" bgcolor="navy">
				<tr>
					<td bgcolor="#d8ecfd" width="50%"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica">Usein k&auml;ytt&ouml;liittym&auml; oli suunniteltu toimimaan yhdell&auml; ainoalla fontilla ja resoluutiolla. Toisaalta k&auml;ytt&ouml;liittym&auml;n ohjelmoiminen oli tuhottoman hankalaa, aikaa viev&auml;&auml; ja kulutti resursseja t&auml;rke&auml;mmilt&auml; asioilta. L&auml;&auml;kkeeksi ongelmaan Stefan Stuntz kehitti uuden oliopohjaisen k&auml;ytt&ouml;liittym&auml;kirjaston: Magic User Interface oli syntynyt.<br>
							<br>
							Olio-ominaisuuksiensa ansiosta MUI on helposti laajennettavissa, eik&auml; ohjelmoijan tarvitse v&auml;ltt&auml;m&auml;tt&auml; j&auml;&auml;d&auml; jumiin, jos jotakin puuttuu. Olioihin voi helposti lis&auml;t&auml; toimintoja tai vaikka rakentaa siit&auml; t&auml;ysin uudenlaisen nappulatyypin. Ohjelmoijan ei tarvitse kuitenkaan sis&auml;ist&auml;&auml; olio-ohjelmoinnin alkeita, jos tyytyy k&auml;ytt&auml;m&auml;&auml;n valmisluokkia, ja kuka tahansa ohjelmointitaitoinen voi oppia hy&ouml;dynt&auml;m&auml;&auml;n MUIta. K&auml;ytt&auml;jillekin MUI on yleens&auml; mieluisin vaihtoehto.</font></td>
				</tr>
			</table>
			<br>
			<table width="80%" border="0" cellspacing="1" cellpadding="3" bgcolor="navy">
				<tr>
					<td align="center" bgcolor="#b0c4de" width="50%">
						<table border="0" cellspacing="0" cellpadding="0" align="right" height="20">
							<tr>
								<td><a title="Alkuun" href="#top" target="_self"><img src="../../framet/grafiikka/top.gif" alt="alkuun" height="14" width="15" border="0"></a></td>
							</tr>
						</table>
						<b><font size="3" face="Trebuchet MS,Verdana,Arial,Helvetica">K&auml;ytt&ouml;liittym&auml;n tekeminen</font></b></td>
				</tr>
				<tr>
					<td bgcolor="#d8ecfd" width="50%"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica">MUI-k&auml;ytt&ouml;liittym&auml; koostuu yhdest&auml; isosta oliopuusta. Puun juurena toimii aina Application-objekti ja t&auml;m&auml;n alle tulevat ikkunat. Ikkunoiden alle tulevat taas varsinaiset k&auml;ytt&ouml;liittym&auml;oliot. Ikkunoiden m&auml;&auml;r&auml;&auml; ei ole mill&auml;&auml;n tavalla rajoitettu, mutta ikkunat voivat tulla vain ohjelmaolion alle.<br>
							<br>
							Yksitt&auml;iseen ikkunaan taas voi liitt&auml;&auml; vain yhden GUI-komponentin, VGroup- tai HGroup-olion. Vasta t&auml;m&auml;n Group-olion alle m&auml;&auml;ritell&auml;&auml;n varsinainen k&auml;ytt&ouml;liittym&auml;. Nimens&auml; mukaisesti Group on ryhm&auml;olio, jonka alle voi laittaa loputtoman m&auml;&auml;r&auml;n omia GUI-komponentteja. Riippuen siit&auml;, onko kyseess&auml; VGroup tai HGroup (vertical, horizontal), oliot piirret&auml;&auml;n joko allekkain tai rinnakkain m&auml;&auml;rittelyj&auml;rjestyksess&auml;.<br>
							<br>T&auml;rkeimpi&auml; Area-luokasta periytyvi&auml; komponentteja:<br>
							<table border="0" cellspacing="2" cellpadding="3">

<tr>
  <th bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Luokka</font></th>
  <th bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Perillisiä</font></th>
  <th bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Selitys</font></th>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Balance</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Antaa käyttäjän muuttaa ryhmien välisiä suhteita</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Gauge</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Edistymismittari</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Gadget</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">String, Boopsi, Prop</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Intuitionin komponentteja</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Group</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Katso oheinen taulukko</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Kerää muita GUI-komponentteja</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Image</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Kuvat</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">List</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Floattext, Volumelist, Dirlist</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Kaikenlaiset listat, vaatii isännäksi Listviewin</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Numeric</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Knob, Slider</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Hissimäiset liukupainikkeet</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Pendisplay</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Poppen</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Värivalitsin (piirtokynä)</font></td>
</tr>


<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Text</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Näyttää tekstiä</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Rectangle</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Tekee tyhjiä alueita</font></td>
</tr>

</table>
							<br>Group-luokasta periytyvi&auml; uusia komponentteja:<table border="0" cellspacing="2" cellpadding="3">

<tr>
  <th bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Luokka</font></th>
  <th bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Selitys</font></th>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Cycle</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Perinteinen kääntönappi</font></td>
</tr>


<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Listview</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">List-luokan isäntä</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Popstring</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Erityyppiset ponnahdusikkunat</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Radio</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Radiopainikkeet</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Register</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Kokoaa komponentit erillisiksi sivuiksi</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Scrollbar</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Vieritysnappulat</font></td>
</tr>

<tr>
  <td bgcolor="#336699"><font size="2" color="white" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Virtgroup</font></td>
  <td bgcolor="#b0c4de"><font size="2" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Eräänlainen virtuaalinäyttö</font></td>
</tr>


</table>
							<br>
							

							Listaus <a href="Esimerkki1.c" target="_blank">Esimerkki1.c</a> toteuttaa yksinkertainen MUI-ohjelman k&auml;ytt&auml;en vain muutamaa oliota. Listauksessa komponentit on ryhmitetty ikkunaan VGroupin alle, joten oliot tulevat allekkain. HGroupilla voisimme laittaa ne vastaavasti riviin ja Groupiin voi lis&auml;t&auml; my&ouml;s muita ryhmi&auml;. N&auml;in voidaan helposti rakentaa hyvinkin monimutkaisia (ja joskus raskaita) k&auml;ytt&ouml;liittymi&auml;.<br>
							<br>
							Kaikkein vaikeinta on muistaa laittaa End oikeisiin paikkoihin. End lopettaa aina sisimm&auml;n oliom&auml;&auml;rityksen, mutta pitk&auml;ss&auml; listauksessa voi olla vaikea hahmottaa, mik&auml; End kuuluu millekin oliolle. Onkin hyv&auml; opetella k&auml;ytt&auml;m&auml;&auml;n sisennyst&auml; heti alusta pit&auml;en.</font></td>
				</tr>
			</table>
			<br>
			<table width="80%" border="0" cellspacing="1" cellpadding="3" bgcolor="navy">
				<tr>
					<td align="center" bgcolor="#b0c4de" width="50%">
						<table border="0" cellspacing="0" cellpadding="0" align="right" height="20">
							<tr>
								<td><a title="Alkuun" href="#top" target="_self"><img src="../../framet/grafiikka/top.gif" alt="alkuun" height="14" width="15" border="0"></a></td>
							</tr>
						</table>
						<b><font size="3" face="Trebuchet MS,Verdana,Arial,Helvetica">Tapahtumien k&auml;sitteleminen</font></b></td>
				</tr>
				<tr>
					<td bgcolor="#d8ecfd" width="50%"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica">Jos satuit kokeilemaan ensimm&auml;ist&auml; ohjelmalistausta, huomasit varmaan, ettei sit&auml; voinut sulkea vasemmasta yl&auml;kulmasta eik&auml; tekem&auml;mme painikekaan reagoinut. T&auml;m&auml; siksi, koska emme m&auml;&auml;ritt&auml;neet yht&auml;&auml;n tapahtumaa k&auml;sitelt&auml;v&auml;ksi. Ohjelman saa lopetettua ainoastaan Exchangella tai ARexxilla. Tapahtumak&auml;sittelij&auml; voidaan liitt&auml;&auml; olioon MUIM_Notify-metodilla:<br>
							<br>
							DoMethod(obj, MUIM_Notify, ULONG TrigAttr, ULONG TrigVal, APTR DestObj, ULONG FollowParams, /* ... */);<br>
							<br>
							TrigAttr on attribuutti jota valvotaan ja TrigVal arvo joka k&auml;ynnist&auml;&auml; tapahtumak&auml;sittelij&auml;n. Esimerkiksi ikkunaluokan attribuutti CloseRequest on TRUE kun ikkunansulkunappia on painettu:<br>
							<br>
							DoMethod(mainwindow, MUIM_Notify, MUIA_Window_CloseRequest, TRUE, MUIV_Notify_Application, 2, MUIM_Application_ReturnID, MUIV_Application_ReturnID_Quit);<br>
							<br>
							Loput parametrit kertovat mit&auml; tehd&auml;&auml;n ja kuka tekee jos tapahtumak&auml;sittelij&auml; k&auml;ynnistet&auml;&auml;n. </font><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica">MUIV_Notify_Application kertoo, ett&auml; metodi halutaan kutsuttavaksi ohjelmaoliossa. Jos se olisi jotain muuta, kutsuttava olio ei tunnistaisi ohjelmaluokkaan kuuluvaa metodia. Seuraava arvo (2 t&auml;ss&auml; tapauksessa) kertoo parametrien m&auml;&auml;r&auml;n toimintametodista alkaen. On t&auml;rke&auml;&auml; laittaa se oikein, ettei MUI kopioi liikaa muistia asettaessaan k&auml;sittelij&auml;&auml;! Vasta t&auml;m&auml;n j&auml;lkeen tulevat varsinainen kutsuttava metodi ja sen parametrit. Er&auml;s hyvin yleinen tapa lis&auml;t&auml; tapahtumak&auml;sittelij&auml; on k&auml;ytt&auml;&auml; apuna CallHook-metodia kuten listauksessa <a href="Esimerkki2.c" target="_blank">Esimerkki2.c</a> on tehty:<br>
							<br>
							DoMethod(button, MUIM_Notify, MUIA_Pressed, FALSE, MUIV_Notify_Self, 2, MUIM_CallHook, &amp;ButtonHook);<br>
							<br>
							ButtonHook on t&auml;ss&auml; osoitin Amigan Hook-struktuuriin. Kun nappula painetaan alas, attribuutti MUIA_Pressed saa arvon TRUE ja yl&ouml;stullessaan se muuttuu takaisin FALSE:ksi ja laukaisee tapahtuman. T&auml;ll&ouml;in MUI suorittaa CallHook-metodin oliossa parametrinaan osoitin ButtonHookiin, ja lopulta suoritus ohjautuu omaan koodiin.</font></td>
				</tr>
			</table>
			<br>
			<table width="80%" border="0" cellspacing="1" cellpadding="3" bgcolor="navy">
				<tr>
					<td align="center" bgcolor="#b0c4de" width="50%">
						<table border="0" cellspacing="0" cellpadding="0" align="right" height="20">
							<tr>
								<td><a title="Alkuun" href="#top" target="_self"><img src="../../framet/grafiikka/top.gif" alt="alkuun" height="14" width="15" border="0"></a></td>
							</tr>
						</table>
						<b><font size="3" face="Trebuchet MS,Verdana,Arial,Helvetica">Lopuksi</font></b></td>
				</tr>
				<tr>
					<td bgcolor="#d8ecfd" width="50%"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica">Viimeiseen esimerkkilistaukseen, <a href="Esimerkki3.c" target="_blank">Esimerkki3.c</a>, olen lis&auml;nnyt kaksi uutta komponenttia: Dirlistin ja Balancen. Nyt ohjelma alkaa jo n&auml;ytt&auml;&auml; joltain, ja parilla lis&auml;yksell&auml; GUI:n toiminnallisuus kasvoi huomattavasti. Ensimm&auml;ist&auml; MUI-ohjelmaa tehdess&auml;&auml;n kannattaa kokeilla muuttaa valmista esimerkki&auml; ja tutkia, kuinka eri komponentit muuttavat k&auml;ytt&ouml;liittym&auml;n toimintaa. Siit&auml; voi alkaa kehitell&auml; omia suurohjelmiaan, ja n&auml;lk&auml;h&auml;n tunnetusti kasvaa sy&ouml;dess&auml;...<br>
							<br>
							Katso my&ouml;s jutun mukana tuleva <a href="makefile" target="_blank">makefile</a>.</font></td>
				</tr>
			</table>
			<table border="0" cellspacing="0" cellpadding="12">
				<tr>
					<td><img src="../../framet/grafiikka/bullet.gif" alt="" height="8" width="8" border="0" hspace="6"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><a href="hakemisto.html" target="_self">Sekalaiset</a></font>&nbsp;&nbsp;&nbsp;<img src="../../framet/grafiikka/bullet.gif" alt="" height="8" width="8" border="0" hspace="6"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><a href="#top" target="_self">Sivun alkuun</a>&nbsp;&nbsp;</font><img src="../../framet/grafiikka/bullet.gif" alt="" height="8" width="8" border="0" hspace="6"><font size="2" face="Trebuchet MS,Verdana,Arial,Helvetica"><a href="../sivukartta.html" target="_self">Sivukartta</a></font>&nbsp;&nbsp;&nbsp;</td>
				</tr>
			</table>
		</center>
	</body>

</html>