<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<meta name="generator" content="Adobe GoLive 6">
<title>Saku #49 (1/2006) | Muut &gt; AHI-ohjelmoinnin alkeet</title>
<link href="../GeneratedItems/saku_tyyli.css" rel="stylesheet" media="screen">
<meta http-equiv="imagetoolbar" content="no">
<link href="../GeneratedItems/saku_tyyli.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="../GeneratedItems/CSScriptLib.js"></script>
<script type="text/javascript"><!--
CSAct[/*CMP*/ '16C99F1'] = new Array(CSSetImageURL,/*CMP*/ 'muut',/*URL*/ '../media/ulkoasu/linkkipalkki/muut_f2.gif');

// --></script>

</head>

<body background="../media/tausta2.gif" bgcolor="#ffffff" link="#000099" vlink="#000099" alink="red" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0">
<div align="center">
<a name="top"></a>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr height="86">
<td width="239" height="86"><img src="../media/ulkoasu/logo.jpg" alt="" height="86" width="239" usemap="#logo" border="0"></td>
<td height="86"><img src="../media/ulkoasu/ylabanneri.jpg" alt="" height="86" width="507" border="0"></td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0" background="../media/ulkoasu/linkkipalkki/linkkirivin_tausta.jpg" height="25">
<tr>
<td valign="middle">
<div align="center">
<table border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td><a href="../index.html"><img src="../media/ulkoasu/linkkipalkki/etusivu.gif" alt="" name="etusivu" height="11" width="51" border="0" hspace="20" vspace="7"></a></td>
<td><a href="../ajankohtaiset/index.html"><img src="../media/ulkoasu/linkkipalkki/ajankohtaiset.gif" alt="" name="ajankohtaiset" height="11" width="87" border="0" hspace="20" vspace="7"></a></td>
<td>
<div align="center">
<a href="../testit/index.html"><img src="../media/ulkoasu/linkkipalkki/testit.gif" alt="" name="testit" height="11" width="44" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="../pelit/index.html"><img src="../media/ulkoasu/linkkipalkki/pelit.gif" alt="" name="pelit" height="11" width="36" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="index.html"><img src="../media/ulkoasu/linkkipalkki/muut.gif" alt="" name="muut" height="11" width="41" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="../vakiot/index.html"><img src="../media/ulkoasu/linkkipalkki/vakiot.gif" alt="" name="vakiot" height="11" width="46" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="right">
<a href="../sivukartta/index.html"><img src="../media/ulkoasu/linkkipalkki/sivukartta.gif" alt="" name="sivukartta" height="11" width="67" border="0" hspace="20" vspace="7"></a></div>
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>

<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2" width="376"><img src="../media/juttu/juttu_osa.jpg" alt="" height="50" width="376" border="0"></td>
<td colspan="2" valign="middle" width="370">
<p><img src="../media/ulkoasu/otsikkopalkit/muut.jpg" alt="" height="50" width="370" border="0"></p>
</td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td rowspan="5" bgcolor="#048ce2" width="62">&nbsp;</td>
<td valign="top" width="314" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_osa_1.jpg" alt="" height="24" width="314" border="0"></td>
<td valign="top" width="308" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_osa_2.jpg" alt="" height="24" width="308" border="0"></td>
<td rowspan="5" bgcolor="#cc0000" width="62">&nbsp;</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr height="42">
<td width="10" height="42"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td valign="bottom" width="602" height="42">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Juha Niemim&auml;ki</b></font><font size="2"><br>
</font><font size="4" color="#cc0000" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>AHI-ohjelmoinnin alkeet</b></font></p>
</td>
<td width="10" height="42"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
<tr>
<td width="10"><img src="../media/spacer.gif" alt="" height="5" width="10" border="0"></td>
<td width="602"></td>
<td width="10"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_viiva.gif" alt="" height="1" width="622" border="0"></td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_tausta.gif">
<div align="left">
<table border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td colspan="3" valign="top" width="444" height="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td rowspan="2" valign="top" width="178">
<div align="right">
<table width="178" border="0" cellspacing="0" cellpadding="0">
<tr>
<td background="../media/palkit/palkki_muut.gif">
<div align="right">
<a href="index.html"><img src="../media/spacer.gif" alt="Ajankohtaiset" height="20" width="178" border="0"></a></div>
</td>
</tr>
<tr>
<td><img src="../media/spacer.gif" alt="" height="6" width="178" border="0"></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="boogie.html">Boogien palsta</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Boogie</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="starwreck.html">Star Wreck -spesiaali</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="tylsaa_tulevaisuutta.html">Elet&auml;&auml;n tyls&auml;&auml; tulevaisuutta</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Tohtori AivoTurmio</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="ohjelmointia.html">Ohjelmointia:&nbsp;AHI, MorphOS, Tinygl</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Juha Niemim&auml;ki, Ilkka Lehtoranta, J-P Jokela</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="0xaa.html">0xAA - Codex Alpe Adria 2005</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Sami Yl&ouml;nen</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="pcisti_amigaan.html">Kun PCisti Amigaan ryhtyi</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Tero S&auml;&auml;rel&auml;</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="videokaappari.html">Videokaappari k&auml;ytettyn&auml;?</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="20">
<td valign="top" height="20" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Jarmo Piippo</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="178" border="0" cellspacing="0" cellpadding="0">
<tr>
<td></td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td valign="top" width="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td valign="top" width="424">
<div align="left">
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Johdanto</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Alkuaikoina Amigan &auml;&auml;nikorteille ei ollut yhteist&auml; ohjelmointirajapintaa, vaan &auml;&auml;nt&auml; tuotettiin k&auml;ytt&auml;en &auml;&auml;nikorttien omia API-ratkaisuja. Martin Blom kehitti AHI-j&auml;rjestelm&auml;n, josta muodostui de facto -ratkaisu &auml;&auml;nikorttien tukemiseen Amiga-ymp&auml;rist&ouml;iss&auml;. AHI-j&auml;rjestelm&auml; on laite (Device), joka tuottaa &auml;&auml;nt&auml; AHI-ajureiden avulla.<br>
<br>

T&auml;ll&auml; hetkell&auml; AHI:sta on julkaistu versio 6.0 (rc4). AHI-websivu l&ouml;ytyy osoitteesta: <a href="http://www.lysator.liu.se/(dl)/~lcs/ahi.html" target="_blank">http://www.lysator.liu.se/(dl)/~lcs/ahi.html</a>.<br>
<br>

Sovellusohjelmoijan kannalta AHI-j&auml;rjestelm&auml;&auml; voi ohjelmoida kahden erillisen rajapinnan kautta. Mielest&auml;ni helpompi tapa on k&auml;ytt&auml;&auml; korkean tason rajapintaa, toiselta nimelt&auml;&auml;n laiterajapintaa. Monipuolisempaan ohjelmointiin on tarjolla matalan tason rajapinta, tunnettu my&ouml;s funktiorajapintana.<br>
<br>

T&auml;m&auml; juttu havainnollistaa vain laiterajapinnan k&auml;ytt&ouml;&auml; &auml;&auml;nen toistamiseen. AHI SDK:n mukana tulevia esimerkkej&auml; seuraamalla p&auml;&auml;see kyll&auml; jyv&auml;lle my&ouml;s funktiorajapinnasta sek&auml; &auml;&auml;nen digitoimisesta.</font>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr height="20">
<td height="20"></td>
</tr>
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Alustus- ja lopetustoimet</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">K&auml;yt&auml;nn&ouml;ss&auml; AHI on laite, joka t&auml;ytyy avata, ennen kuin sit&auml; voidaan k&auml;ytt&auml;&auml;. Avattaessa tarvitaan IO-pyynt&ouml; (jota varten tarvitaan viestiportti), laitteen nimi sek&auml; toivottu laiteyksikk&ouml; (unit). On huomattavaa, ett&auml; Exec-kirjaston OpenDevice-kutsu palauttaa 0:n, mik&auml;li laitteen avaus onnistuu. AHINAME ja AHI_DEFAULT_UNIT on m&auml;&auml;ritelty otsikkotiedostossa devices/ahi.h. AHINAME on &quot;ahi.device&quot; ja AHI_DEFAULT_UNIT 0.<br>
<br>

Laitteen sulkeminen tapahtuu v&auml;litt&auml;m&auml;ll&auml; kelvollinen IO-pyynt&ouml; Exec-kirjaston CloseDevice-kutsulle. Ennen laitteen sulkemista tulee keskeytt&auml;&auml; mahdolliset k&auml;ynniss&auml; olevat IO-pyynn&ouml;t tai odottaa, ett&auml; ne on k&auml;sitelty. T&auml;st&auml; lis&auml;&auml; my&ouml;hemmin ohjelmaesimerkiss&auml; 3.<br>
<br>

Esimerkki resurssien varaamisesta ja vapauttamisesta:<br>
<br>
<a href="esim1.c" target="_blank">Esimerkki 1.c</a></font>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr height="20">
<td height="20"></td>
</tr>
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>AHI:n tietotyypit ja AHIRequest</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">AHI k&auml;ytt&auml;&auml; &quot;Fixed&quot;-tyyppi&auml; liukulukutyyppien sijasta kuvaamaan &auml;&auml;nenvoimakkuutta ja panorointiasetuksia. Fixed-tyypiss&auml; sek&auml; kokonais- ett&auml; desimaaliosat ovat 16-bittisi&auml; numeroita. Seuraava taulukko on kopioitu suoraan AHI-dokumentaatiosta:<br>
<br>
<table border="0" cellspacing="1" cellpadding="2" bgcolor="#0c5c91">
<tr>
<td bgcolor="#0c5c91"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Decimal</b></font></td>
<td bgcolor="#0c5c91"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Fixed</b></font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">1.0</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0x00010000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0.5</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0x00008000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0.25</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0x00004000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0x00000000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-0.25</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0xffffc000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-0.5</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0xffff8000</font></td>
</tr>
<tr>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-1.0</font></td>
<td bgcolor="#d8ecfd"><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">0xffff0000</font></td>
</tr>
</table>
<br>

&Auml;&auml;nen panoroinnista sen verran, ett&auml; 0 tarkoittaa &auml;&auml;nen olevan kokonaan vasemmalla stereokanavalla, 0.5 keskell&auml; ja 1.0 kokonaan oikealla stereokanavalla. T&auml;m&auml; ilmaistaan siis Fixed-tyyppisell&auml; numerolla (0x0=vasemmalla, 0x8000=keskell&auml; ja 0x10000 oikealla). AHI-dokumentaation mukaan negatiiviset panorointiarvot muokkaavat &auml;&auml;nen surround-tyyppiseksi, mutta en ole kokeillut t&auml;t&auml; k&auml;yt&auml;nn&ouml;ss&auml;.<br>
<br>

&Auml;&auml;nenvoimakkuusarvo on my&ouml;s Fixed-tyyppi&auml;, v&auml;lilt&auml; 0x0 ... 0x10000. AHI-dokumentaation mukaan negatiivinen &auml;&auml;nenvoimakkuus soittaa &auml;&auml;nin&auml;ytteen takaperin.<br>
<br>

Ohessa on devices/ahi.h:sta ry&ouml;stetty <a href="ahirequest.txt" target="_blank">kuvaus AHIRequestista</a>. AHIRequest on siis laajennettu IO-pyynt&ouml;, jota k&auml;ytet&auml;&auml;n AHI-ohjelmoinnissa. &Auml;&auml;nen toistamisen kannalta meit&auml; kiinnostavat viisi alinta j&auml;senmuuttujaa. ahir_Volume ja ahir_Position -muuttujien on k&auml;ytt&ouml; tulikin jo puolivahingossa kuvattua kahdessa aikaisemmassa kappaleessa, joten k&auml;sitell&auml;&auml;n nyt loputkin tarvittavat.<br>
</font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>ahir_Frequency</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"> on &auml;&auml;nin&auml;ytteen taajuus hertsein&auml;.<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>ahir_Link</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">-muuttujaa tarvitaan, mik&auml;li halutaan k&auml;ytt&auml;&auml; kaksoispuskurointia per&auml;kk&auml;isten &auml;&auml;nin&auml;ytteiden toistoon. K&auml;yt&auml;nn&ouml;ss&auml; esim. MOD- tai MP3-playerit vaativat t&auml;m&auml;n muuttujan k&auml;ytt&auml;mist&auml;. Ideana on siis k&auml;ytt&auml;&auml; kahta &auml;&auml;nipuskuria ja kahta IO-pyynt&ouml;&auml;, joita vuorotellaan siten, ett&auml; toista puskuria soitettaessa t&auml;ytet&auml;&auml;n toinen puskuri uudella datalla. Asetetaan NULL:ksi, jos kaksoispuskurointia ei tarvita (esim. soitettaessa yksinkertainen &auml;&auml;nitehoste).<br>
<br>

N&auml;iden lis&auml;ksi tarvitsemme tavallisesta IO-pyynn&ouml;st&auml; muuttujat:<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>ahir_Std.io_Command</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">: asetamme CMD_WRITE:ksi &auml;&auml;nt&auml; toistettaessa.<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>ahir_Std.io_Length</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">: &auml;&auml;nipuskurin koko tavuina.<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>ahir_Std.io_Data</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">: &auml;&auml;nipuskurin osoite.</font>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr height="20">
<td height="20"></td>
</tr>
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Yksitt&auml;isen &auml;&auml;nin&auml;ytteen soitto</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">T&auml;ss&auml; generoidaan p&auml;tk&auml; siniaaltoa ja soitetaan 8-bittisen&auml; mono&auml;&auml;nen&auml; l&auml;hett&auml;m&auml;ll&auml; IO-pyynt&ouml; Exec-kirjaston DoIO-kutsun avulla. DoIO-Kutsu odottaa niin kauan ett&auml; IO-pyynt&ouml; on t&auml;ytetty, toisin sanoen ohjelman suoritus pys&auml;htyy hetkeksi.<br>
<br>
<a href="esim2.c" target="_blank">Esimerkki 2.c</a></font>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr height="20">
<td height="20"></td>
</tr>
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Kaksoispuskurointi: yksinkertainen Ogg Vorbis -soitin</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">T&auml;m&auml; esimerkki k&auml;ytt&auml;&auml; libVorbisFile-kirjastoa hyv&auml;kseen purkaakseen Ogg Vorbis -dataa. K&auml;sitykseni mukaan VorbisFile.library l&ouml;ytyy MorphOSille, mutta AmigaOS 4 -k&auml;ytt&auml;j&auml;t linkkaavat ohjelmaan staattisen version libVorbisFile-kirjastosta, jonka pit&auml;isi tulla AmigaOS 4 SDK:n mukana.<br>
<br>

Soitto-ohjelma ottaa yhden komentoriviparametrin ja ilman isompia hienosteluja yritt&auml;&auml; tulkita sit&auml; Ogg Vorbis -tiedostona. Ov_-alkuiset kutsut kuuluvat siis libVorbisFile-kirjastoon. Ohjelman suoritus lakkaa jos musiikki loppuu tai k&auml;ytt&auml;j&auml; painaa Control-C:t&auml;. Ohjelma olettaa datan olevan 16-bittist&auml; stereo&auml;&auml;nt&auml;.<br>
<br>

Kaksoispuskurointia varten tarvittiin siis - yll&auml;tt&auml;en - kaksi datapuskuria ja kaksi IO-pyynt&ouml;&auml;. Toinen IO-pyynt&ouml; on ensimm&auml;isen kopio. Joka silmukan suorituskerralla otetaan ei-aktiivinen puskuri ja ei-aktiivinen IO-pyynt&ouml; k&auml;ytt&ouml;&ouml;n, puretaan Ogg Vorbis -dataa 4096 tavua, yhdistet&auml;&auml;n aktiivinen IO-pyynt&ouml; edelliseen ja l&auml;hetet&auml;&auml;n aktiivinen pyynt&ouml; Exec-kirjaston SendIO-kutsulla maailmalle.<br>
<br>

Koodi pyrkii kiert&auml;m&auml;&auml;n harmillisen kaksoispuskurointiongelman, joka ilmenee joissakin tapauksissa ainakin AmigaOS 4:n AHI-versiossa. Yksinkertaisesti tarkistetaan, p&auml;&auml;ttyik&ouml; edellinen IO-pyynt&ouml; ennenkuin siihen voitiin yhdist&auml;&auml; seuraava, jos n&auml;in k&auml;vi, aloitetaan kaksoispuskurointi uudelleen.<br>
<br>

Lis&auml;tietoa Ogg Vorbis-formaatista: <a href="http://www.vorbis.com/faq/" target="_blank">http://www.vorbis.com/faq/</a><br>
<br>
<a href="esim3.c">Esimerkki 3.c</a></font>
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr height="20">
<td height="20"></td>
</tr>
<tr>
<td bgcolor="#048ce2"><font size="2" color="white" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Loppusanat</b></font></td>
</tr>
<tr height="6">
<td height="6"></td>
</tr>
</table>
<font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Lis&auml;tietoa l&ouml;ytyy AHI SDK:n dokumentaatiosta sek&auml; esimerkkiohjelmista.<br>
<br>

Muita ty&ouml;kaluja &auml;&auml;nen tuottamiseen Amiga-ymp&auml;rist&ouml;ss&auml; ovat esimerkiksi Simple DirectMedia Layer (SDL) -kirjasto sek&auml; SDL_Mixer. SDL ja sen tukikirjastot ovat loistava valinta alustariippumattomaan (&auml;&auml;ni)ohjelmointiin. Lis&auml;tietoja: <a href="http://www.libsdl.org" target="_blank">http://www.libsdl.org</a><br>
<br>

PS. AmigaOS 4 -k&auml;ytt&auml;jien kannattaa huomioida, ett&auml; funktiorajapintaa k&auml;ytett&auml;ess&auml; on pyydett&auml;v&auml; IAHI-rajapinta systeemilt&auml;, ennen kuin AHI:n funktioita voidaan kutsua.<br>
<br>

Esimerkki:<br>
<br>
</font><font size="2" color="#cc0000" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">struct AHIIFace * IAHI;<br>

// olettaa, ett&auml; AHI device on avattu ensiksi normaalisti<br>

IAHI = (struct AHIIFace *) GetInterface( (struct Library *) AHIio-&gt;ahir_Std.io_Device, &quot;main&quot;, 1, NULL );<br>
<br>

...koodia...<br>
<br>

// suljetaan IAHI<br>

DropInterface( (struct Interface *) IAHI );<br>
<br>

// nyt voidaan sulkea ahi.device<br>
</font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><br>
<a href="#top">Sivun alkuun</a><br>
<br>
</font></div>
</td>
<td valign="top" width="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
<tr>
<td colspan="4" width="622" height="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_alareuna.jpg" alt="" height="23" width="622" border="0"></td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2" width="690">
<div align="right">
<table width="376" border="0" cellspacing="0" cellpadding="0">
<tr height="27">
<td width="19" height="27"><img src="../media/ulkoasu/vasen_reuna.gif" alt="" height="27" width="19" border="0"></td>
<td width="357" height="27"><img src="../media/ulkoasu/osa_3.jpg" alt="" height="27" width="357" usemap="#alaosa_linkit" border="0"><map name="alaosa_linkit"><area shape="rect" coords="177,9,309,22" href="http://saku.amigafin.org" alt="" target="_blank"><area shape="rect" coords="41,9,129,22" href="http://foorumi.amigafin.org" alt="" target="_blank"></map></td>
</tr>
</table>
</div>
</td>
<td width="308"><img src="../media/ulkoasu/osa_4.jpg" alt="" height="27" width="308" border="0"></td>
<td width="62"><img src="../media/ulkoasu/oikea_reuna.gif" alt="" height="27" width="62" border="0"></td>
</tr>
</table>
<table border="0" cellspacing="4" cellpadding="0">
<tr>
<td>
<div align="center">
<script type="text/javascript"><!--
CSAction(new Array(/*CMP*/ '16C99F1'));

// --></script>
</div>
</td>
</tr>
</table>
<map name="logo"><area shape="rect" coords="60,15,182,71" href="../index.html" alt="" target="_top"></map><br>
</div>
</body>



</html>