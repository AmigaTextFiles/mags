1
1
-1 PowerFlyer.IFF 0 0
1 PowerFlyer.IFF 0 102*

{4                       Power Flyer - Enhanced IDE Amigaan
{4                       ----------------------------------
 
                                  Jarmo Piippo
 
 
Tietokoneet ovat aina pullollaan pullonkauloja, ja yksi kuuluisimmista on  Amiga
1200:n emolevyn hidas IDE-liitäntä. Hampaiden kiristelyn ja  itkun  tuhertamisen
voi kuitenkin onneksi lopettaa, sillä kiertoteitä ongelmaan on tarjolla.
 
Vanhan polven amigistien mielissä kiintolevyliitäntöjen ylivoimainen ykkönen  on
tietysti nopee ja upee SCSI. Mutta IDE- ja  SCSI-levyjen  hintaerojen  kasvettua
vähitellen tyrmäävän suuriin mittoihin on valtaosa populaatiosta  joutunut  nie-
lemään ylpeytensä ja siirtymään IDEalistiksi. Power Flyer on  yksi  keino  ottaa
IDE-pyörittimensä siirtonopeudesta mahdollisimman paljon irti, eikä  lysti  edes
maksa juurikaan enempää kuin vastaavan tehoinen SCSI-ohjain.
 
 
{4Vauhdin hurmaa ja perusturvaa
{4-----------------------------
 
Power Flyer korvaa koneesi vakio-IDE:n kahdella nopealla  EIDE-portilla,  joista
kumpaankin voi liittää kaksi laitetta. Molemmat  liitännät  on  sekä  puskuroitu
että terminoitu, joten edes neljän laitteen käytöllä ei tarvitse pelätä ylikuor-
mittavansa koneen dataväyliä. Flyer tunnistaa automaattisesti siihen liitettyjen
laitteiden tukemat siirtomoodit ja vaihtaa nopeimmat mahdolliset käyttöön. Siir-
tomoodeja (PIO eli Programmed Input/Output) on käytettävissä kolme,  PIO0,  PIO3
ja PIO4. A1200:n  oma  IDE-liitin  pystyy  käyttämään  levyjä  vain  hitaimmassa
PIO0-tilassa. Flyerin ajuriohjelma tunnistaa myös käytössä olevan prosessorin ja
valitsee sille optimoidut siirtorutiinit.
 
Flyer liitetään A1200:aan Kickstart-ROM-piirien kannoille, joten sillä on  suora
pääsy koneen dataväylälle täydellä leveydellä. Laite onkin emolevyn  liitäntänsä
osalta täysin 32-bittinen, mikä selittää suuren siirtonopeuden. Flyer on  konfi-
guroitu samalle Chip-muistialueelle kuin emolevyn IDE-portti.  Ratkaisu  mahdol-
listaa sen  hienon  ominaisuuden,  että  ohjaimen  ykkösportissa  olevat  asemat
näkyvät koneelle jo ennen ajuriohjelman käynnistämistä, aivan kuin  ne  olisivat
emolevyn omassa liittimessä. Niinpä koneen kylmäkäynnistykseen ei tarvita  käyn-
nistyslevykettä, kuten esimerkiksi Surf Squirrelin tapauksessa. Tosin haittapuo-
lena on, ettei Flyerin asentamisen jälkeen  emolevyn  IDE-liittimessä  saa  olla
enää mitään laitetta kytkettynä.
 
{7                                            Power Flyer kurkistaa tornin  johto-
{7                                            viidakon keskeltä.
 
                                            Yksi Flyerin tuomista  mukavuuksista
                                            on se, että ATAPI-CD-ROM-asemat toi-
                                            mivat nyt A1200:n oman  scsi.devicen
                                            avulla eivätkä tarvitse  mitään  ul-
                                            koisia laiteajureita  (kuten  IDEfix
                                            tai atapi.device).  CD-ROM-tiedosto-
                                            järjestelmäksi kelpaa mainiosti Ami-
                                            CDFS 2.40 tai sen vanhempi  ilmainen
                                            versio AmiCDROM 1.15, jotka molemmat
                                            löytyvät Aminetistä.  Power  Flyeria
                                            tukee myös uusi ja monipuolinen kau-
                                            pallinen CD-tiedostojärjestelmä  Al-
legroCDFS. Siinä on ensimmäisenä Amigalla tuki UDF:lle, joka on  video-DVD-levy-
jen formaatti. Itselläni ei ole vielä AllegroCD- FS:ää, eikä  sen  puoleen  DVD-
asemaakaan, mutta DVD-tuki saa kyllä tulevaisuuden näyttämään  paljon  valoisam-
malta.
 
Flyerin omistaja voi kauppareissulla käydessään huoletta ostaa vaikkapa kymmenen
gigatavun kiintolevyn. Laite nimittäin jakaa neljän  gigatavun  rajan  ylittävät
levyt automaattisesti näkymään koneelle useina korkeintaan  tasan  neljän  gigan
kokoisina levyinä. Niinpä uudella jättilevyllä  voi  turvallisin  mielin  jatkaa
vaikka vanhan tutun FFS:n käyttöä. Haittapuolena on, ettei ilmeisesti tuon rajan
ylittävän kokoista yksittäistä tiedostoa voi luoda.  Sellaiselle  kun  saattaisi
tulla tarvetta esimerkiksi kirjoittavien DVD-RAM-asemien yleistyessä, jos joutuu
käyttämään levyn poltossa image-tiedostoa. Tällä hetkellä DVD-RAM-levylle mahtuu
2,6 Gt molemmille puolille, eli yhteensä yli viisi gigatavua. Tänä syksynä myyn-
tiin tulevissa DVD-RW-asemissa tallennuskapasiteetti on jo kolme gigatavua levy-
puolta kohti. Osion maksimikokoa en ole itse pystynyt testaamaan, sillä en vielä
edes omista siihen riittävän suurta kiintolevyä, joten en voi sanoa mitään  var-
maa asiasta.
 
 
{4Nyt tiukkana, sanoi Flyer!
{4--------------------------
 
Asennus on melko hankala toimenpide piirikantojen  ylettömän  tiukkuuden  takia.
Kantoihin tulevat Flyerin piikit ovat pyöreitä, eivätkä litteitä kuten  ROM-pii-
rien jalat, joten laitteen saaminen paikoilleen vaatii enemmän voimaa kuin  pii-
rien. Tilannetta vielä pahentaa se, että Flyerin  tapauksessa  joutuu  painamaan
kaikki pinnit kiinni molempiin kantoihin yhtä aikaa. Emolevy onkin siinä  tilan-
teessa melkoisella rasituksella, joten kannattaa ehkä ottaa  sen  alapuolinenkin
suojapelti kokonaan pois ja laittaa emolevy tasaiselle alustalle, jottei se tai-
vu murtumispisteeseen asti. Kun kortti on paikallaan, laitetaan ROM-piirit Flye-
rin ROM-kantoihin, jotka ovat samalla kohdalla  kuin  alkuperäiset.  Kokonaisuus
vielä kiinnitetään nippusiteillä ROM-piirien kantojen alta. Sen jälkeen on kyllä
hankala enää vaihdella ROMeja uudempiin, joten mahdollinen  KS3.1-päivitys  kan-
nattaa tehdä samalla kun hankkii Power Flyerin.
 
Kortin asettelussa ROM-kannoille on oltava tarkkana, sillä niissä on yksi aukko-
pari enemmän kuin itse piireissä tai Flyerissa on jalkoja. Ylimääräiset aukot on
varattu suurempien ROM-piirien asennusta varten, sillä A1200:aan voi asentaa yh-
den megatavun verran ROM-muistia. Tosin suurempien piirien  asennus  ei  onnistu
enää Flyerin hankinnan jälkeen, sillä Flyerin kannat ovat vain  nykyisille  pii-
reille sopivaa kokoa. Laitteen asennus on selostettu manuaalissa hyvin  tarkasti
ja runsaiden valokuvien kera. Kuvat ovat tosin melko pieniä ja hiukan liian tum-
mia.
 
Flyerin piirilevyyn nauhakaapelilla yhdistetyllä pienellä  erillisellä  kortilla
on piirikanta, joka täytyy painaa nurinpäin A1200:n Gayle-piirin  päälle.  Sekin
on melko tiukka laittaa, mutta ei onneksi niin tiukka kuin  ROM-kannat.  Lisäksi
sen perillemenonkin huomaa paremmin, sillä kanta napsahtaa kuuluvasti mennessään
paikoilleen. Sen irtisaaminen voikin olla sitten jo toinen  juttu,  ainakin  jos
haluaa ettei Gayle irtoa juotoksistaan  piirilevyltä  kannan  mukana...  Lopuksi
vielä yhdistetään Flyerista yksi erillinen kytkentälanka emolevyn  IDE-liittimen
piikkiin 39, jotta A1200:n kiintolevy-LED palaa nätisti  levytoimintojen  aikana
kuten aina ennenkin.
 
Ohjelmiston asennus tapahtuu normaaliin tapaan installer-ohjelman avulla.  Asen-
nuksessa Startup-Sequenceen tulee muutama rivi lisää. Lisäys käynnistää bootissa
Flyerin  ajuriohjelman  ATA3.driver,  joka  ottaa  myös  ohjaimen   kakkosportin
käyttöön ja vaihtaa kaikki liitetyt asemat käyttämään nopeinta mahdollista siir-
tomoodia. Ajuri jää muistiin ja on resetin kestävä, joten seuraavassa  resetissä
myös kakkosportin asemat näkyvät käynnistysvalikossa.
 
{4"Olisinpa tiennyt tämän!"
{4-------------------------
 
Ennen Power Flyerin ostopäätöstä on ehdottoman tärkeää tarkistaa koneensa kello-
portin piikkien sijoitus.  Siinä  on  nimittäin  ollut  eroja  valmistussarjojen
välillä, ainakin Flyerin manuaalin mukaan. Koneen edestä katsottuna  kelloportin
piikkien on oltava liitinalueen oikeassa puoliskossa, ja sen vasemmassa  puolis-
kossa emolevyllä tulee näkyä  pelkät  käyttämättömät  paikat  toiselle  satsille
piikkejä. Jos piikit ovat vasemmassa päädyssä tai niitä on koko alueen matkalla,
ei Flyerin asennus onnistu,  sillä  sen  piirilevy  yltää  kelloportin  vasemman
päädyn kohdalle asti (ja Chip-RAM-piirien päälle).
 
Toinen huomioitava asia on, että  piirilevy  yltää  näppäimistökontrolleripiirin
reunalle asti, joten ennen laitteen ostoa kannattaa kysyä, mahtuuko se koneeseen
yhtä aikaa esimerkiksi BlizzardVision-näytönohjaimen  kanssa,  jos  suunnittelee
sellaisen hankintaa. Kelloporttiin liitettävien laitteiden käyttö Flyerin kanssa
onnistuu, mutta vaatii lyhyen jatkokappaleen Flyerin läpi. Jatkokappale ei kuulu
laitteen hintaan, joten se on hankittava erikseen tai tehtävä itse.  Kelloportin
jatkeen pituus ei saa ylittää neljää senttimetriä, sillä kyseiseen porttiin  tu-
lee muutamia koneen osoite- ja dataväylän linjoja.
 
Kun asennus on sitten lopultakin valmis, huomataan yllättäen, ettei A1200:n pel-
tisen suojakotelon yläosa ehkä mahdukaan enää kiinni. Noh, tornikoteloissahan on
häiriösuojaukset omasta takaa, mutta pöytäkotelossa majaileva Amiga kyllä vaati-
si suojapellin säilyttämisen ennallaan. Vaikka emolevyn kellotaajuus  ei  mikään
kunnioitusta herättävän suuri olekaan, aiheuttaa se silti kohtalaisen voimakkai-
ta radiohäiriöitä ilman suojausta.
 
IDE-kaapelin ja laitteiden liittämisessä on varmistettava, että ne  tulevat  oi-
kein päin. Flyerin liitin on toisin päin kuin emolevyn vastaava, joten erehtymi-
sen vaara on olemassa. Erityisen tarkkana on oltava tiheän 44-piikkisen  liitti-
men käytössä, siinä kun on mukana myös käyttöjännitteet, joten väärin kytkeminen
voi olla tuhoisaa. Valmistaja suosittelee ennen  levyjen  liittämistä  ohjaimeen
kokeilemaan sitä tyhjänä, jotta voi varmistaa, että kone yleensä yhä käynnistyy.
Mikäli näkyviin ilmestyy normaali alkuanimaatio, joka kehottaa laittamaan  käyn-
nistyskorpun asemaan, voi seuraavaksi kokeilla käynnistyskiintolevyn  kytkemistä
kaapeliin, ja mikäli sekin toimii,  kytkeä  loput  laitteet.  (Kaikki  kytkennät
tehdään tietysti virtojen ollessa sammutettuna, mutta senhän  toki  jokainen  jo
tietääkin...)
 
Levyn, jolta kone halutaan käynnistää, on oltava ykkösportissa masterina. Rajoi-
tus koskee vain kylmäkäynnistystä, resetvalikosta voi koneen bootata  miltä  ta-
hansa Flyeriin liitetyltä asemalta (mukaanlukien Zip ja  LS-120).  Ykkösportille
on valittavissa joko 40 tai 44 pinnin liitin (3,5:n tai 2,5:n tuuman levy).  Mo-
lempia ei  tietenkään  saa  kytkeä  yhtä  aikaa.  Kakkosportille  on  ainoastaan
40-piikkinen liitin. Samaan kaapeliin ei  kannata  sijoittaa  nopeaa  (PIO3  tai
PIO4) ja hidasta (PIO0) moodia käyttäviä asemia, koska silloin  kyseinen  portti
toimii aina hitaammalla nopeudella. Nopeiden  moodien  levyjen  (PIO3  ja  PIO4)
välillä tätä rajoitusta ei ole.
 
IDE-liitännän reset-linja (kaapelin johtimessa 1) välittyy Flyerin  läpi,  joten
CD-ROM-asemat kolistelevat lukupäitään jokaisessa resetissä. Turhaan  kolisevat,
sillä siitä ei ole mitään hyötyä normaalikäytössä,  ja  tuskinpa  se  kuitenkaan
riittää vikatilanteitakaan ratkaisemaan. Haittaakaan siitä tuskin silti on. Sitä
paitsi sama ominaisuus kuuluu myös perus-IDE-porttiin.
 
 


{E                                                                     ---------->
{4Gentlemen, start your engines!
{4------------------------------
 
Kylmäkäynnistyksen aikana Flyerin ajuri ei tietenkään ole vielä muistissa, joten
kiintolevy toimii silloin vain emolevyn  IDE-liitännän  nopeudella.  Startup-Se-
quencessa ajetaan kuitenkin yleensä niin pieniä tiedostoja, että kiintolevyn lu-
kunopeudella on käynnistymisaikaan vähemmän merkitystä kuin levyn hakuajalla.
 
"Mutta entäs se nopeus sitten? Kerro nyt jo!" Hyvä on, seuraavassa taulukossa on
Flyerin kautta saavutettu lukunopeus hiukan vanhahtavilla kahden gigatavun kiin-
tolevyilläni, mitattuna ScsiSpeed 4.2-ohjelmalla, kahdella eri puskurikoolla (32
kt ja 256 kt). 

                  Power Flyer  A1200 IDE
                  -----------  ---------
WD Caviar (32kt)   4 456 448   2 488 729  tavua/sek
WD Caviar (256kt)  4 521 984   2 529 689  tavua/sek
Bigfoot (32kt)     6 915 686   2 221 670  tavua/sek
Bigfoot (256kt)    7 222 067   2 555 904  tavua/sek

Levyillä käytetyn tiedostojärjestelmän nopeudesta tietysti riippuu, kuinka  pal-
jon  käytännön  nopeus  poikkeaa   raakanopeuden   sanelemasta   maksimiarvosta.
Käytännön testinä kokeilin suurten tiedostojen siirtoa kopioimalla IMDb:n  data-
tiedostoja, joita on noin 210 megatavua. Niiden kopiointi levyltä  toiselle  sa-
massa portissa toimi hiukan yli kaksi megatavua  sekunnissa.  Kopiointinopeuteen
osaltaan vaikutti PFS2-tiedostojärjestelmän käyttö, mutta nopeutta saa huomatta-
vasti lisää myös FFS:llä nostamalla levyn blokkikoon  vaikkapa  kahteen  kilota-
vuun.  Kopiointinopeus  nousisi   tietysti   vielä   olennaisesti   lisää,   jos
käytettävissä olisi edes hiukan nykyaikaisempia kiintolevyjä. :-/
 
Vaikka yhteys Flyerilta emolevylle toimiikin  nopeasti,  lopputulosta  rajoittaa
tiedonsiirto Flyerin käyttämän Chip-muistialueen ja varsinaisen kohteen välillä.
Lisäksi kyseinen siirto tapahtuu täysin ohjelmallisesti, joten se vie  runsaasti
prosessoritehoa. Tosin niinhän se vie emolevyn omaa IDE-porttiakin käytettäessä,
mutta vain selvästi huonommalla hyötysuhteella.
 
 
{4Hienosäätöä ilman lekaa
{4-----------------------
 
Siltä varalta, ettei Flyerin ajuri tunnistaisi jotain liitetyistä  asemista  oi-
kein,  voi  asemien  siirtomoodeja  vaihtaa  myös  käsin   ATA3Prefs-ohjelmalla.
Käytännössä sitä ei pitäisi tarvita, ellei porttiin kytketä jotain epästandardia
tai ikivanhaa laitetta. Kokeilin kerran erästä lainassa ollutta 170-megaista yli
viisi vuotta vanhaa Conner CP30174E -kiintolevyä, ja Flyer tunnisti senkin  heti
oikein, joten tuskinpa asetuksia joutuu koskaan käyttäjä  muuttelemaan.  Samalla
asetusohjelmalla voi tarvittaessa myös asettaa ATA3.driverin tilaan, jossa se ei
säily koneen muistissa resetin yli, kuten se normaalisti oletuksena tekee.
 
Ajamalla shellissä komentoriviltä Flyerin ajuriohjelma  ATA3.driver  ikään  kuin
normaalina komentona voi varmistaa, että kaikki käytössä olevat IDE-laitteet  on
tunnistettu oikein. Ohjelma antaa omassa koneessani  seuraavan  näköisen  tulos-
teen: 

Primary   Master  ATA  PIO4  WDC AC22100H              2111MB
Primary   Slave   ATA  PIO4  QUANTUM BIGFOOT_CY2160A   2111MB
Secondary Master ATAPI PIO3  CR-2801TE

Ilmoituksesta näkee kaiken tarpeellisen aina asemien sijoituksia ja niiden siir-
tomoodeja myöten, käynnistämättä edes HDToolboxia. Erinomaista! Huomaa, että jos
ATA3.driveria ei ole käynnistetty Startup-Sequencessa, sen ensimmäinen  ajokerta
shellissä vain aktivoi ajurin muistiin ja vasta toinen  antaa  tällaisen  tulos-
teen.
 
Vaihdettavaa mediaa käyttävät asemat kuten CD-ROM toimivat Flyerin kautta  hyvin
siinäkin mielessä, ettei levyn vaihtoa tarvitse välttämättä tutkia pollauksella.
Keskeytyspohjainen levynvaihdon tunnistus tulee  automaattisesti  käyttöön,  jos
asema itse (ja käytetty CD-tiedostojärjestelmä)  vain  tukee  sitä.  Sen  huomaa
siitä, ettei aseman tai IDE-ohjaimen LED  välky  kolmen  sekunnin  välein  kuten
yleensä, vaan pysyy pimeänä, vaikkei asemassa olisikaan levyä. Varsinainen hait-
ta ohjelmallisesta levynvaihdon pollauksesta on se, että se vie  useimmilla  oh-
jaimilla hiukan prosessoritehoa kolmen sekunnin välein,  mikä  voi  hankaloittaa
aikakriittisten ohjelmien virheetöntä toimintaa ja saattaa jopa aiheuttaa pieniä
nykäyksiä animaatioihin. Suurimman osan uudemmista CD-ROM-asemista luulisi tuke-
van keskeytyspohjaista levynvaihdon tunnistusta, ja ainakin oma  Mitsumini  niin
tekee, vaikka onkin jo yli vuoden vanha malli. 


{4Plussat ja miinukset
{4--------------------

+ nopeus perus-IDE:hen verrattuna
+ automaattinen toiminnan optimointi
+ vakiona ATAPI-, Zip-drive- ja LS-120-tuki
+ toimii myös ilman ajuria (kuin emolevyn IDE-portti)
+ liitännät puskuroitu ja terminoitu
+ poistaa 4 Gt:n ongelman ilman softamuutoksia(!)
+ yhteensopivuus uusimpienkin IDE-levyjen kanssa
+ kopiointi levyjen välillä nopeaa samassakin portissa
+ helppo ohjelmiston asennus
- tiukka kovopuolen asennus
- tulee ehkä osittain samalle kohdalle kuin BVision?
- irrotus ehkä vaikeaa repimättä Gaylea mukana
- kelloportin käyttö vaatii jatkopalan Flyerin läpi
- CPU-teho maistuu
- Chip-muistin hitaus saattaa ehkä rajoittaa nopeutta
- korkeahko hinta (minkäs teet, erikoistuote...)


{4        Power Flyer

        Markkinointi:   Power Computing Ltd, http://www.powerc.com

        Myyjä:          Gentle Eye Ky, puh. (03) 363 0048
                        ge@vip.fi, http://www.ge.vip.fi/

        Hinta:          670 markkaa

        Nopeus:         16,6 Mt/sek (maksimi)

        Tukee:          IDE/EIDE (FastATA-2), ATAPI, Zip ja LS-120

        Siirtomoodit:   PIO0, PIO3 ja PIO4

        Vaatimukset:    Amiga 1200 ja IDE-kiintolevy

        Suositus:       tornitettu A1200, 4 Mt Fast, FastATA-2-kiintolevy

        Testattu:       tornitettu A1200, 32 Mt Fast, Apollo 1260/50 MHz,
                        kaksi FastATA-2-kiintolevyä ja CD-R-asema
Kirjoittajan tavoittaa sähköpostitse osoitteesta jpiippo@ratol.fi tai Sakunetis-
tä nimellä Jarmo Piippo.
