<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<meta name="generator" content="Adobe GoLive 6">
<title>Saku #48 (2/2005) | Muut &gt; Tinygl-kurssi, osa 3</title>
<link href="../GeneratedItems/saku_tyyli.css" rel="stylesheet" media="screen">
<meta http-equiv="imagetoolbar" content="no">
<link href="../GeneratedItems/saku_tyyli.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="../GeneratedItems/CSScriptLib.js"></script>
<script type="text/javascript"><!--
CSAct[/*CMP*/ '16C99F1'] = new Array(CSSetImageURL,/*CMP*/ 'muut',/*URL*/ '../media/ulkoasu/linkkipalkki/muut_f2.gif');

// --></script>

</head>

<body background="../media/tausta2.gif" bgcolor="#ffffff" link="#000099" vlink="#000099" alink="red" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0">
<div align="center">
<a name="top"></a>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr height="86">
<td width="239" height="86"><img src="../media/ulkoasu/logo.jpg" alt="" height="86" width="239" usemap="#logo" border="0"></td>
<td height="86"><img src="../media/ulkoasu/ylabanneri.jpg" alt="" height="86" width="507" border="0"></td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0" background="../media/ulkoasu/linkkipalkki/linkkirivin_tausta.jpg" height="25">
<tr>
<td valign="middle">
<div align="center">
<table border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td><a href="../index.html"><img src="../media/ulkoasu/linkkipalkki/etusivu.gif" alt="" name="etusivu" height="11" width="51" border="0" hspace="20" vspace="7"></a></td>
<td><a href="../ajankohtaiset/index.html"><img src="../media/ulkoasu/linkkipalkki/ajankohtaiset.gif" alt="" name="ajankohtaiset" height="11" width="87" border="0" hspace="20" vspace="7"></a></td>
<td>
<div align="center">
<a href="../testit/index.html"><img src="../media/ulkoasu/linkkipalkki/testit.gif" alt="" name="testit" height="11" width="44" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="../pelit/index.html"><img src="../media/ulkoasu/linkkipalkki/pelit.gif" alt="" name="pelit" height="11" width="36" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="index.html"><img src="../media/ulkoasu/linkkipalkki/muut.gif" alt="" name="muut" height="11" width="41" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="center">
<a href="../vakiot/index.html"><img src="../media/ulkoasu/linkkipalkki/vakiot.gif" alt="" name="vakiot" height="11" width="46" border="0" hspace="20" vspace="7"></a></div>
</td>
<td>
<div align="right">
<a href="../sivukartta/index.html"><img src="../media/ulkoasu/linkkipalkki/sivukartta.gif" alt="" name="sivukartta" height="11" width="67" border="0" hspace="20" vspace="7"></a></div>
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>

<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2" width="376"><img src="../media/juttu/juttu_osa.jpg" alt="" height="50" width="376" border="0"></td>
<td colspan="2" valign="middle" width="370">
<p><img src="../media/ulkoasu/otsikkopalkit/muut.jpg" alt="" height="50" width="370" border="0"></p>
</td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td rowspan="5" bgcolor="#048ce2" width="62">&nbsp;</td>
<td valign="top" width="314" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_osa_1.jpg" alt="" height="24" width="314" border="0"></td>
<td valign="top" width="308" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_osa_2.jpg" alt="" height="24" width="308" border="0"></td>
<td rowspan="5" bgcolor="#cc0000" width="62">&nbsp;</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr height="42">
<td width="10" height="42"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td valign="bottom" width="602" height="42">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Juha-Pekka Jokela | </b><a href="mailto:jpjokela@surfeu.fi">jpjokela@surfeu.fi</a></font><font size="2"><br>
</font><font size="4" color="#cc0000" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Tinygl-kurssi, osa 3</b></font></p>
</td>
<td width="10" height="42"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
<tr>
<td width="10"><img src="../media/spacer.gif" alt="" height="5" width="10" border="0"></td>
<td width="602"></td>
<td width="10"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_viiva.gif" alt="" height="1" width="622" border="0"></td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_tausta.gif">
<div align="left">
<table border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td colspan="3" valign="top" width="444" height="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td rowspan="2" valign="top" width="178">
<div align="right">
<table width="178" border="0" cellspacing="0" cellpadding="0">
<tr>
<td background="../media/palkit/palkki_muut.gif">
<div align="right">
<a href="index.html"><img src="../media/spacer.gif" alt="Ajankohtaiset" height="20" width="178" border="0"></a></div>
</td>
</tr>
<tr>
<td><img src="../media/spacer.gif" alt="" height="6" width="178" border="0"></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="boogie.html">Boogien palsta</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="24">
<td valign="top" height="24" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Boogie</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="tinygl_osa3.html">Tinygl-kurssi, osa 3</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="lapinakyvyytta.html">L&auml;pin&auml;kyvyytt&auml; ikkunoihin</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="24">
<td valign="top" height="24" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Juha-Pekka Jokela</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="orson_welles.html">Orson Welles</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="citizen_kane.html">Citizen Kane (DVD)</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="24">
<td valign="top" height="24" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Jarkko Pienim&auml;ki</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" background="#">
<tr>
<td valign="middle" background="../media/jutun_otsikon_tausta.jpg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" bgcolor="#78c2ef" width="14"><img src="../media/bullet.gif" alt="" height="6" width="6" border="0" hspace="6" vspace="6"></td>
<td width="100%">
<p><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><span class="12px"><span class="12px_korkea"><a href="videon_uusi_ulottuvuus.html">Videon uusi ulottuvuus</a></span></span></b></font></p>
</td>
</tr>
</table>
</td>
</tr>
<tr height="24">
<td valign="top" height="24" background="#">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="middle" width="14"><img src="../media/spacer.gif" alt="" height="10" width="14" border="0" hspace="2"></td>
<td width="100%">
<p><font size="1" color="#000066" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><span class="12px"><span class="12px_korkea">Jarmo Piippo</span></span></font></p>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="178" border="0" cellspacing="0" cellpadding="0">
<tr>
<td></td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td valign="top" width="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
<td valign="top" width="424">
<div align="left">
<p><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Tinygl on MorphOS:n opengl-yhteensopiva 3D-rajapinta, joka l&ouml;ytyy MorphOS:n versiosta 1.4 tai sit&auml; uudemmista. Kurssi sopii kaikille, jotka ovat kiinnostuneita opengl-ohjelmoinnista. Kurssin osat 1 ja 2 k&auml;siteltiin <a href="http://saku.amigafin.org/lehti/online/47/muut/tinygl.html" target="_self">Sakussa #47 (1/2005)</a>.<br>
</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b><br>
</b></font><font size="2" color="#cc0000" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Uudet asiat: Display listit, valaistus, face culling<br>
<br>
</b></font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Display list</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><br>

Display list sis&auml;lt&auml;&auml; joukon opengl-kutsuja, jotka suoritetaan j&auml;rjestyksess&auml; listaa kutsuttaessa. Display list voi sis&auml;lt&auml;&auml; my&ouml;s kutsuja muihin listoihin. Jos jokin kappale vaatii laskemista, mutta se ei muutu ohjelman suorituksen aikana, kannattaa se &quot;laskea suoraan display listiin&quot;. T&auml;ll&ouml;in laskut lasketaan ohjelman suorituksen aikana vain kerran. Siirtyminen k&auml;ytt&auml;m&auml;&auml;n display listej&auml; vaatii ylens&auml; vain eritt&auml;in pieni&auml; muutoksia koodiin (vertaa osa 2:n ja osa 3:n koodeja) ennen glCallList():i&auml; suoritetut funktiot (translaatiot, py&ouml;ritykset, skaalaukset, v&auml;rin vaihto ym.) voivat vaikuttaa siihen, mihin/miten listan sis&auml;lt&ouml; piirret&auml;&auml;n.<br>
<br>

opengl:ll&auml; voi piirt&auml;&auml; primitivej&auml; kolmella eri tavalla:<br>

1) Suoraan k&auml;skyill&auml;<br>

2) Display Listeill&auml;<br>

3) Vertex Arraylla<br>
<br>

Periaatteessa ensimm&auml;inen vaihtoehto on hitain ja viimeinen nopein. Tosin jos esim. piirrett&auml;v&auml; data muuttuu jatkuvasti, ei ole ehk&auml; j&auml;rkev&auml;&auml; k&auml;ytt&auml;&auml; display listej&auml; tai vertex arrayta.<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Face culling<br>
</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Jos face culling on k&auml;yt&ouml;ss&auml;, piirret&auml;&auml;n polygoneista vain yksi puoli (eli esimerkiksi kuution sivu piirret&auml;&auml;n vain silloin, jos se on kameraan p&auml;in)<br>
<br>

Tapa jolla polygonin etupuoli m&auml;&auml;r&auml;ytyy voidaan valita funktiolla glFrontFace(). GL_CW m&auml;&auml;ritt&auml;&auml;, ett&auml; polygonin etupuoli piirret&auml;&auml;n my&ouml;t&auml;p&auml;iv&auml;&auml;n, GL_CCW taas vastap&auml;iv&auml;&auml;n. Perusasetus on GL_CCW. Jotta homma saataisiin viel&auml; sekavammaksi, voidaan my&ouml;s erikseen valita se, kumpi sivu piirret&auml;&auml;n. T&auml;m&auml; onnistuu funktiolla glCullFace(), mahdollisina argumentteina tietenkin GL_FRONT ja GL_BACK.<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Normaalit</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><br>
<img src="kuvat/tinygl/6.jpg" alt="" height="367" width="145" align="right" border="0">Sivun normaali on suora (normaalisti yksikk&ouml;vektori), joka on kohtisuorassa sivua vasten. Normaaleja k&auml;ytet&auml;&auml;n valaistuksen laskemisessa. Normaali m&auml;&auml;ritet&auml;&auml;n funktiolla glNormal3f().<br>
<br>

Normaali voidaan m&auml;&auml;ritt&auml;&auml; erikseen joka tasolle tai joka vertexille. Normaalit t&auml;ytyy m&auml;&auml;ritt&auml;&auml; joka vertexille erikseen, jos halutaan k&auml;ytt&auml;&auml; smooth shadingia (glShadeModel(GL_SMOOTH)). Ylens&auml; vertex-kohtaiset normaalit voidaan laskea siten, ett&auml; otetaan keskiarvo kaikkien niiden sivujen normaaleista, jotka jakavat saman vertexin. T&auml;m&auml; tapa on hyv&auml; varsinkin silloin, jos data on &quot;ennalta tuntematon&quot;. Esimerkkikoodissa kuusen yl&auml;osan vertexit on laskettu &quot;suunnilleen&quot;, tarkkuudessa olisi parantamisen varaa.<br>
<br>

Huom! Normaali m&auml;&auml;ritt&auml;&auml; suunnan (yksikk&ouml;vektori), ei normaalin p&auml;&auml;tepistett&auml;!<br>
<br>
</font><font size="2" color="#000088" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular"><b>Valaistus<br>
</b></font><font size="2" color="#0c5c91" face="Trebuchet MS,Arial,Helvetica,Geneva,Swiss,SunSans-Regular">Valaistus riippuu useista eri tekij&ouml;ist&auml; ja niiden keskin&auml;isist&auml; suhteista, kuten:<br>
<img src="kuvat/tinygl/ambdif.jpg" alt="" height="368" width="149" align="right" border="0">- Valonl&auml;hteen tyyppi ja sijainti<br>

- 3D-mallien sijainti<br>

- 3D-mallien materiaaliasetukset<br>

- &quot;Kameran&quot; sijainti<br>
<br>

Valaistuksen tyyppi&auml; voidaan muuttaa funktiolla glLightfv(). Argumentteina annetaan muutettavan valon numero, mit&auml; muutetaan ja uudet arvot. Eli siis esimerkiksi glLightfv(GL_LIGHT0, GL_AMBIENT, LightAmbient) (kts. esimerkkikoodi).<br>
<br>
<b>Ambient:</b> Valokomponentti, joka tulee joka suunnasta yht&auml; voimakkaana. Minimiarvo pimeimmille kohdille. Pelk&auml;ll&auml; ambient-valaistuksella kuva n&auml;ytt&auml;&auml; samalta kuin ilman valaistusta.<br>
<br>
<b>Diffuse:</b> Valokomponentti, jonka m&auml;&auml;r&auml; riippuu tason kulmasta suhteessa valonl&auml;hteeseen. Saa 3D-grafiikan n&auml;ytt&auml;m&auml;&auml;n kolmiulotteiselta.<br>
<br>
<b>Specular:</b> Valokomponentti, joka m&auml;&auml;ritt&auml;&auml;, mill&auml; tavalla pinta heijastaa valoa. Riippuu vahvasti materiaalin asetuksista.<br>
<br>

Kuvan vasemmassa reunassa Ambient on maksimiarvossaan, oikeassa reunassa taas Diffuse (muut arvot ovat nollassa).<br>
<br>
<a href="osa3.c" target="_blank">Esimerkkikoodi</a><br>
<a href="makefile" target="_blank">Makefile osalle kolme</a><br>
<br>
<a href="#top">Sivun alkuun<br>
<br>
</a></font></p>
</div>
</td>
<td valign="top" width="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
<tr>
<td colspan="4" width="622" height="10"><img src="../media/spacer.gif" alt="" height="10" width="10" border="0"></td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td colspan="2" valign="top" width="622" background="../media/juttu/juttu_otsikon_tausta.jpg"><img src="../media/juttu/juttu_alareuna.jpg" alt="" height="23" width="622" border="0"></td>
</tr>
</table>
<table width="746" border="0" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2" width="690">
<div align="right">
<table width="376" border="0" cellspacing="0" cellpadding="0">
<tr height="27">
<td width="19" height="27"><img src="../media/ulkoasu/vasen_reuna.gif" alt="" height="27" width="19" border="0"></td>
<td width="357" height="27"><img src="../media/ulkoasu/osa_3.jpg" alt="" height="27" width="357" usemap="#alaosa_linkit" border="0"><map name="alaosa_linkit"><area shape="rect" coords="177,9,309,22" href="http://saku.amigafin.org" alt="" target="_blank"><area shape="rect" coords="41,9,129,22" href="http://foorumi.amigafin.org" alt="" target="_blank"></map></td>
</tr>
</table>
</div>
</td>
<td width="308"><img src="../media/ulkoasu/osa_4.jpg" alt="" height="27" width="308" border="0"></td>
<td width="62"><img src="../media/ulkoasu/oikea_reuna.gif" alt="" height="27" width="62" border="0"></td>
</tr>
</table>
<table border="0" cellspacing="4" cellpadding="0">
<tr>
<td>
<div align="center">
<script type="text/javascript"><!--
CSAction(new Array(/*CMP*/ '16C99F1'));

// --></script>
</div>
</td>
</tr>
</table>
<map name="logo"><area shape="rect" coords="60,15,182,71" href="../index.html" alt="" target="_top"></map><br>
</div>
</body>



</html>