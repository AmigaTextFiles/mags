11
1
-1 Seagate.IFF 0 0
1 Seagate.IFF 347 0
2 HDToolBox.IFF 0 0*

{1                      Ison IDE-kiintolevyn asennus Amigaan
{1                      ------------------------------------
 
                                Janne Karppanen
 
 
Olen ollut Amiga 1200 -koneeni onnellinen omistaja jo kolme vuotta. Ostin vuoden
1997 alussa Escom-version, jonka 170 Mt:n  kiintolevy  jäi  parissa  kuukaudessa
pieneksi. Seuraavaksi levyksi hankin 3,5-tuumaisen Seagaten 1,2 Gt:n levyn, Ran-
dy-merkkisen IDE-portin tuplaajan sekä CD-ROM-aseman. Seagate viettikin  Amigas-
sani 2,5 vuotta ja sai jossain vaiheessa kaverikseen Samsungin 560-megaisen  le-
vyn. Amigani on kokenut paljon rattoisia hetkiä kanssani,  se  mm.  muutti  PC:n
tornikoteloon ja  kolmas  turbokorttikin  on  jo  menossa.  Itse  asiassa  alku-
peräisestä Amigastani on jäljellä enää ROM-piirit ja hiiri, johon  asensin  van-
hasta Microsoft-hiirestä ottamani pienoismikrokytkimet, alkuperäismallisten kes-
toikä kun oli vain n. puoli vuotta.
 
Maaliskuussa 2000 tuli isomman kiintolevyn asentaminen ajankohtaiseksi. Olin  jo
vuoden 1999 puolella asentanut käyttöjärjestelmän 3.5-version, joten oletin iso-
jen levyjen tuen olevan kunnossa.  Päätin  kuitenkin  katsoa  version-komennolla
tiedostojärjestelmän versiotiedot, ja yllätyksekseni huomasin, että  scsi.device
oli OS 3.5:stä ja asentamastani BoingBag1:stä huolimatta versio 40, kun sen oli-
si pitänyt olla v43. Aikani asiaa ihmeteltyäni sain selville,  että  boottauksen
yhteydessä ajettava SetPatch-komento  päivittää  Kickstartin  DEVS:-hakemistossa
olevasta tiedostosta "AmigaOS ROM Update", jonka kopioin sinne BoingBag-paketis-
ta. Boottasin Amigan, ja nyt scsi.device oli v43. Fastfilesystemkin näytti  ole-
van v45, mutta aikomukseni oli käyttää tiedostojärjestelmänä ainoastaan SmartFi-
leSystemiä (http://www.xs4all.nl/~hjohn/), jonka uusin versio on 1.84.
 
Kaavin kirstun pohjalta viimeisetkin pen-
noset ja sain kokoon 850 mk, joilla ostin
VK  Systemsiltä  8,4-gigaisen   Seagaten.
Levy on aika  mielenkiintoisen  näköinen,
sen päällä on musta  kumihuppu,  joka  on
kulmien kohdalta noin sentin paksuinen ja
antaa suojaa kolhuja vastaan. Levy  onkin
selvästi  entistä  Seagatea   hiljaisempi
varsinkin lukuoperaatioiden aikana,  eikä
edes kuumene kumihupusta  huolimatta yhtä
paljon. Luvatusta 66,6 Mt/s  purskenopeu-
desta ei ole meikäläisen käytössä hyötyä,
mutta taaksepäin yhteensopivuus on  hyvä,
joten levy toimii Amigan  PIO-0-ohjaimes-
sa.
 
{*{B340 G:n kesto  on  aika  paljon  luvattu,   {CKuvan  copyright (c)  2000   Seagate
{*{Bsillä yleensä  levyjen  taataan  kestävän   {CTechnology Inc.,  julkaistu  Sakussa
{*{Bvain 75 G:tä, joka vastaa levyn  pudotta-   {Coikeudenomistajan luvalla
mista 25 sentin korkeudelta 3 mm:n  jous-
tavalle alustalle. Tämä malli kestäisi siis pudottamisen 116 sentin korkeudelta.
Löysin myös tiedon, että käynnissä ollessaan levy kestää 63 G:n iskun. Paksuutta
levyllä on lähes tuplasti - entinen Seagate oli vain hiukan yli  sentin  paksui-
nen. Samsung puolestaan on yhtä paksu kuin uusi Seagate.  Laskeskelin  huvikseni
levyn koon tietokonegigoina ja sain 7,8 Gt, joten ROM-piirillä olevan scsi.devi-
cen kahdeksan gigan rajakaan ei ylittynyt. Annoin kuitenkin varmuuden vuoksi ROM
Updaten olla DEVS:-hakemistossa.


{1                                                                     ---------->

























{1Nyt kaikki tuntui olevan kunnossa, joten avasin Amigan kotelon ja liitin  vapai-
{1den virtajohtojen puutteen takia uuden levyn kakkosporttiin CD-ROM-aseman tilal-
{1le. Osioin sen OS 3.5:n HDtoolbox-ohjelmalla siten, että Workbench sai tilaa 200
{1megaa entisen 30:n sijaan.

Seuraavaksi laitoin 50 megan osion, johon suunnittelin asentavani pelkän käyttö-
järjestelmän ilman mitään lisäroinaa, jolloin voin  testata  jonkun  kaatuilevan
ohjelman toimivuuden pelkällä OS 3.5:lla. Work-osion  suurensin  200  megasta  2
gigaan. Olin kuullut Shapeshifterin sotkevan levyn, jos sen osio on 4 Gt:n  ylä-
puolella, joten tyrkkäsin vielä 500 megan osion sitä varten. Loput  osiot  meni-
vätkin kokonaan tai osittain 4 Gt:n yläpuolelle. Laitoin kaikkien osioiden  Max-
Transfer-arvoksi 0x00FFFF eli 64 kt, koska Randy-palikan mukana  tulleessa  Ide-
Fix'96-ohjelmistossa on bugi, jonka takia isot tiedostot hajoavat, jos MaxTrans-
fer on yli antamani arvon.
 

{1Vaikeuksien kautta voittoon
{1---------------------------

Osioinnin jälkeen boottasin koneen ja pika-alustin kaikki osiot. Aloitin tiedos-
tojen kopioinnin vanhoilta levyiltä uudelle ensin Filemasterilla, joka kuitenkin
kaatuili monta kertaa - olisiko sillä jotain ongelmia ison levyn kanssa. Ainakin
se näytti vapaan tilan aivan pieleen ja käyttöprosentit olivat joillakin osioil-
la miinusnerkkiset. Kyllästyneenä Filemasterin sekoiluun  kopioin  loput  tiedot
ensin  Workbenchistä  hiirellä,  mutta  huomasin  jossain  vaiheessa,   etteivät
työpöydällä olevat ikonit eivät tulleetkaan mukaan.
 
Tässä vaiheessa työpöytä olikin jo aika sekava,  lähes  kaikki  ikonit  näkyivät
kahteen kertaan, koska olin välillä bootannut (samalla SFS herjasi  jotain  vii-
meisen osion toimimattomuudesta), ja pöydälle jätetyt  ikonit  tulivat  näkyviin
myös uudelta levyltä. Asiaa pahensi vielä se, että kaikkia osioita oli nyt kaksi
kappaletta. Ollessani näin epätoivoisessa tilanteessa  muistin  Amigassa  olevan
shell-ikkunan, jota heti päätin käyttää hyväksi. Onneksi Amigalla oli sen verran
älyä, etteivät osioiden tunnukset olleet samat, vaan uuden  levyn  osiot  olivat
saaneet ykkösen peräänsä tyyliin HD0: -> HD0.1:.  Shellin  avulla  sain  viimein
kaikki kopioitua.
 
Poistin vanhat levyt ja laitoin uuden levyn ensimmäiseen IDE-porttiin. Boottasin
ja sain taas painaa cancel-nappia SFS:n herjatessa viimeisen  osion  toimimatto-
muutta. Kone resetoitui SetPatchin päivitettyä käyttöjärjestelmän ja käynnistyk-
sen alettua näyttö jäi pimeäksi. Resetoin, ja taas sama peli: herjaus, cancel ja
pimeä näyttö. Jossain vaiheessa keksin tutkia Amigan emolevyltä lähtevää signaa-
lia TV:n kautta. Nyt vika löytyikin: atapi.devicehän siellä herjaili,  että  CD-
ROM-asema ei toimi. Painoin cancel ja siitä käynnistyikin uusi hauska peli: muu-
taman sekunnin välein näytölle (tällä kertaa sekä BVisionin  että  AGAn  kautta)
pomppasi neljä SFS:n herjausikkunaa: kaikki osittainkaan 4 Gt:n yläpuolella ole-
vat osiot eivät toimineet.
 
Aarrrggghhh! Kyllä meinasivat pelihousut revetä. Pienemmältä levyltä  bootatessa
iso levy toimi hienosti, ja nyt tämä...  Pelasin  hauskaa  cancel-cancel-cancel-
cancel-peliä ja poistin CD0:-ikonin DEVS:-hakemistosta. Boottasin.  Sama  hauska
peli alkoi taas. Nyt epäilyni kohdistuivat Idefixiin, joten poistin sen ja lähes
kaiken muunkin startup-sequencesta. Sama  peli  jatkui  edelleen.  Cancel-nappia
painellen laitoin HDToolBoxilla kaikista 4 Gt:n  yläpuolella  olevista  osioista
automountin pois päältä. Boottasin, ja nyt tuli vain pari  käyttiksen  herjausta
puuttuvista osioista. Tässä vaiheessa katsoin parhaaksi  kysellä  apua  toisilta
käyttäjiltä ja ryntäsin AmigaFIN-IRC-kanavalle.
 
Pulmaani ei löytynyt suoraa ratkaisua, mutta sain pari erittäin  hyvää  vihjettä
yli 4 Gt:n levyn käytöstä: kun jättää 4 Gt:n yli menevistä osioista  automountin
pois päältä, ei tarvitse  painaa  cancel-nappia  kylmäkäynnistyksen  yhteydessä.
Käynnistettäessä SetPatch asentaa käyttöjärjestelmäpäivityksen, boottaa ja  kat-
soo sitten tiedostoa DEVS:Nsdpatch.cfg, johon lisätään rivi: DEVICE  scsi.device
RDBUNIT 0 ACTIVATE #?, jolloin otetaan käyttöön mounttaamatta jääneet osiot. Kun
SFS tässä vaiheessa huomaa 4 Gt:n yläpuolella olevat osiot,  on  scsi.device  jo
päivitetty versioon 43, jolloin herjausikkuna ei avaudu.  Lisäksi  tästä  on  se
hyöty, että jos käynnistetään ohittamalla startup-sequence, käytössä oleva vanha
scsi.device ei voi tuhota 4 Gt:n yläpuolella olevia osioita,  koska  ne  tulevat
näkyviin vasta kun SetPatch on ajettu.
 
Pääsin taas pelaamaan cancel-peliä ja kiinnitin vasta nyt huomiota  herjaukseen,
ettei Pelit-osiota löydy. Eihän sieltä mitään pitänyt  käynnistyksen  yhteydessä
latautua!  Nyt  löysinkin  ongelman  aiheuttajan:  syyllinen  oli  xpk.libraryjä
käyttävä Artic-pakkausohjelma, jolla olin pakannut yhden hakemiston nyt  4  Gt:n
yläpuolelle joutuneella Pelit-osiolla. Poistin Devs:Dosdrivers-hakemistosta  Pe-
lit2-ikonin ja boottasin. Ei herjauksia! Uusi levy toimii!
 
Nyt pulmana oli, miten puran pakatun hakemiston, koska Artic  ei  toimi  isoilla
levyillä. Boottasin vanhalta levyltä ja kopioin sieltä Pelit2:n kautta tiedostot
uudelle levylle, jolloin pakkaus samalla purkaantui. Käynnistin samalla  ShapeS-
hifterin ja kopioin sen avulla Mac-osion sisällön uudelle  levylle.  Nyt  kaikki
oli viimein kopioitu ja levy toimi niinkuin pitääkin.  Aikaa  tähän  operaatioon
kului pari vuorokautta.
 
Vanhat levyt ovat nyt käytössä PC:ssäni, ja jätin ennen uuden levyn  asentamista
Amigan pariksi yöksi tallentamaan tietoja vanhalta  levyltä  videonauhalle,  jos
tuo uusi levy vaikka  päättää  hajota.  BVisionin  ansiosta  VideoBackupSystemin
käyttäminenkin oli työn ja tuskan takana. Näytönpäivitys nauhalle oli luokkaa  2
fps, joten hommasta ei ensin meinannut  tulla  yhtään  mitään.  Kokeilin  kytkeä
PowerPC-kortin pois päältä pitämällä 2- tai a-näppäintä  pohjassa  käynnistyksen
yhteydessä. Nyt pulmaksi tuli pelkän Chip-muistin riittämättömyys yli 20000 tie-
dostoa sisältävää osiota kopioitaessa. PPC-kortin  flashromin  päivityspaketista
löysin viimein tiedon siitä, että  BVision  saadaan  pois  päältä  pitämällä  c-
näppäintä pohjassa käynnistyksen yhteydessä, jolloin VBS:kin alkoi toimia  halu-
tulla tavalla. 
{1        Seagate ST38410

        Valmistaja: Seagate Technology Inc., http://www.seagate.com

        Myyjä:      VK Systems Oy, Taipalsaari
                    http://wwnet.fi/vks, puh. (05) 454 4789

        Hinta:      850 mk (3/2000)

        Tekniikkaa: 8,4 Gt, 5400 rpm, hakuaika 8,9 ms, UltraATA/66

Kirjoittajan tavoittaa sähköpostitse osoitteesta
janne.karppanen@quicknet.inet.fi.
